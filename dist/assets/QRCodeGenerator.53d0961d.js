import{d as E,r as p,y as M,H as j,an as $,b as R,a as e,w as a,u as b,o as w,g as H,R as s,t as d,ci as U,c as O,E as T,aQ as A,aR as I,j as Q,h as n,_ as z}from"./index.fa3829f9.js";import{L as F}from"./layout3.7094ea6f.js";import{t as J,a as K,b as P}from"./browser.b44e01a3.js";const W={class:"QRCodeGenerator"},X=["href","download"],Y={class:"output"},Z=E({__name:"QRCodeGenerator",props:{text:null},setup(B){const _=B,h=p(null),l=p({errorCorrectionLevel:"M",margin:4,scale:4,color:{dark:"#000000",light:"#ffffff"}}),f=p("png"),C=p(!1),m=p(!1),v=p({url:"",filename:"",disabled:!0});M(()=>_.text,()=>{i()}),j(()=>{i()});async function i(){if(_.text===""){C.value=!1,v.value.disabled=!1;return}J(h.value,_.text,l.value).catch(t=>{$.error(t.message)}),C.value=!0;let o=await K(_.text,l.value);v.value={url:o,disabled:!1,filename:"qrcode"}}const D=async()=>{m.value=!0,P(_.text).then(o=>{const t=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),c=window.URL.createObjectURL(t),r=document.createElement("a");r.href=c,r.setAttribute("download","qrcode"),document.body.appendChild(r),r.click(),document.body.removeChild(r),m.value=!1}).catch(o=>{$.error(o.message),m.value=!1})};return(o,t)=>{const c=n("a-radio"),r=n("a-row"),S=n("a-radio-group"),g=n("a-form-item"),y=n("a-input-number"),G=n("a-input"),q=n("a-col"),x=n("a-input-group"),N=n("a-form"),L=n("a-select-option"),V=n("a-select"),k=n("a-button");return w(),R("div",W,[e(b(F),{"left-width":500},{one:a(()=>[H(o.$slots,"default",{},void 0,!0),e(N,{"label-col":{span:8},"wrapper-col":{span:16}},{default:a(()=>[e(g,{label:o.$t("qrCodeGenerator.errorCorrectionLevel.title")},{default:a(()=>[e(S,{value:l.value.errorCorrectionLevel,"onUpdate:value":t[0]||(t[0]=u=>l.value.errorCorrectionLevel=u),onChange:i},{default:a(()=>[e(r,null,{default:a(()=>[e(c,{value:"L"},{default:a(()=>[s(d(o.$t("qrCodeGenerator.errorCorrectionLevel.low")+" ~7%"),1)]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(c,{value:"M"},{default:a(()=>[s(d(o.$t("qrCodeGenerator.errorCorrectionLevel.medium")+" ~15%"),1)]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(c,{value:"Q"},{default:a(()=>[s(d(o.$t("qrCodeGenerator.errorCorrectionLevel.quartile")+" ~25%"),1)]),_:1})]),_:1}),e(r,null,{default:a(()=>[e(c,{value:"H"},{default:a(()=>[s(d(o.$t("qrCodeGenerator.errorCorrectionLevel.high")+" ~30%"),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),e(g,{label:o.$t("qrCodeGenerator.margin")},{default:a(()=>[e(y,{value:l.value.margin,"onUpdate:value":t[1]||(t[1]=u=>l.value.margin=u),min:1,max:100,onChange:i},null,8,["value"])]),_:1},8,["label"]),e(g,{label:o.$t("qrCodeGenerator.scale")},{default:a(()=>[e(y,{value:l.value.scale,"onUpdate:value":t[2]||(t[2]=u=>l.value.scale=u),min:1,max:100,onChange:i},null,8,["value"])]),_:1},8,["label"]),e(g,{label:o.$t("qrCodeGenerator.color"),"wrapper-col":{span:24}},{default:a(()=>[e(x,null,{default:a(()=>[e(r,{gutter:10},{default:a(()=>[e(q,{span:6},{default:a(()=>[e(G,{value:l.value.color.dark,"onUpdate:value":t[3]||(t[3]=u=>l.value.color.dark=u),type:"color",onChange:i},null,8,["value"])]),_:1}),e(q,{span:6},{default:a(()=>[e(G,{value:l.value.color.light,"onUpdate:value":t[4]||(t[4]=u=>l.value.color.light=u),type:"color",onChange:i},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})]),two:a(()=>[s(d(o.$t("qrCodeGenerator.label"))+" ",1),e(V,{class:"qr-type",value:f.value,"onUpdate:value":t[5]||(t[5]=u=>f.value=u),style:{width:"80px"}},{default:a(()=>[e(L,{value:"png"},{default:a(()=>[s(d(".png"),1)]),_:1},8,["value"]),e(L,{value:"svg"},{default:a(()=>[s(d(".svg"),1)]),_:1},8,["value"])]),_:1},8,["value"]),f.value==="png"?(w(),R("a",{key:0,href:v.value.url,download:v.value.filename},[e(k,{type:"primary",disabled:v.value.disabled},{icon:a(()=>[e(b(U))]),default:a(()=>[s(" "+d(o.$t("qrCodeGenerator.save")),1)]),_:1},8,["disabled"])],8,X)):f.value==="svg"?(w(),O(k,{key:1,type:"primary",onClick:D,disabled:v.value.disabled,loading:m.value},{icon:a(()=>[e(b(U))]),default:a(()=>[s(" "+d(o.$t("qrCodeGenerator.save")),1)]),_:1},8,["disabled","loading"])):T("",!0),A(Q("div",Y,[Q("canvas",{ref_key:"container",ref:h,class:"output-image"},null,512)],512),[[I,C.value]])]),_:3})])}}});const te=z(Z,[["__scopeId","data-v-4dfa4240"]]);export{te as Q};

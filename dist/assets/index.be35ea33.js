import{d as S,q as G,r as s,y as f,cB as M,ah as N,as as q,bk as U,bl as V,cC as A,a8 as D,H as F,o as P,b as x,j as u,aQ as z,aR as W,J as Z,Z as k,O as c,a as m,u as C,cD as $,R as j,t as J,w as E,E as Q,h as X,p as Y,k as _,_ as ee}from"./index.fa3829f9.js";import{c as oe,C as te}from"./utils.ffc8936d.js";import{I as le}from"./Icon.87d3d941.js";const ae=l=>(Y("data-v-30a3c747"),l=l(),_(),l),re={class:"color-picker-plus-wrapper"},ne={key:0,class:"screen-color-picker"},se=ae(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[u("path",{fill:"currentColor",d:"M3 21v-4.75l8.95-8.95l-1.45-1.4l1.45-1.4l1.9 1.9l3.1-3.1q.275-.275.7-.275q.425 0 .7.275l2.35 2.35q.275.275.275.7q0 .425-.275.7l-3.075 3.075l1.9 1.95L18.1 13.5l-1.4-1.45L7.75 21Zm2-2h1.95l8.3-8.35l-1.9-1.9L5 17.05Z"})],-1)),ie=S({__name:"index",props:{pureColor:{default:"rgb(0,0,0)"},gradientColor:{default:"linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"},activeKey:{default:"pure"},isWidget:{type:Boolean,default:!1},pickerType:{default:"fk"},useType:{default:"pure"},disableHistory:{type:Boolean,default:!1},roundHistory:{type:Boolean,default:!1},disableAlpha:{type:Boolean,default:!1},closeBtnCorner:{default:"TOP_RIGHT"},position:null,colorCallBack:null},emits:["update:pureColor","update:gradientColor","update:activeKey","pureColorChange","gradientColorChange","activeKeyChange"],setup(l,{emit:a}){const r=l,{t:b}=G(),n=s(r.pureColor),d=s(r.gradientColor),v=s(r.activeKey);f(()=>r.pureColor,o=>{M.validateHTMLColorRgb(o)&&(n.value=o)},{immediate:!0}),f(n,o=>{r.colorCallBack&&r.colorCallBack(o)});const H=o=>{a("update:pureColor",o)},I={TOP_LEFT:{top:"-10px",left:"-6px"},TOP_RIGHT:{top:"-11px",left:"268px"},BOTTOM_LEFT:{top:"320px",left:"-6px"},BOTTOM_RIGHT:{top:"320px",left:"268px"}},K=N(),i=s(!1),w=o=>{o!==i.value&&(i.value=o)},L=q(()=>v.value==="pure"?n.value:d.value),y=s(!1),h=o=>{o!==y.value&&(y.value=o)},B=U()===V.WIN,{open:O}=A(),T=async()=>{h(!0),O().then(o=>{if(o){const e=oe(o.sRGBHex,te.RGB);n.value=e,d.value=e,a("update:pureColor",e),a("update:gradientColor",e)}}).finally(()=>{h(!1)})},g=o=>{B||o.key==="c"&&T()};f(i,o=>{o?(document.addEventListener("keydown",g),document.addEventListener("click",e=>{e.target!=p.value&&w(!1)})):document.removeEventListener("keydown",g)},{immediate:!0}),D(()=>{document.removeEventListener("keydown",g)});const p=s(null);return F(()=>{if(p.value){const o=p.value.getElementsByClassName("vc-btn__content");o.length===2&&(o[0].textContent=b("colorPickerPlus.pure"),o[1].textContent=b("colorPickerPlus.gradient"))}}),(o,e)=>{const R=X("a-button");return P(),x("div",re,[u("div",{class:"preview-color-block",style:k({backgroundColor:C(L)}),onClick:e[10]||(e[10]=c(t=>w(!i.value),["stop"]))},[z(u("div",{ref_key:"colorPickerEle",ref:p,class:Z(["color-picker",!l.disableAlpha&&"enable-alpha"]),style:k({...l.position}),onClick:e[8]||(e[8]=c(()=>{},["stop"])),onKeydown:e[9]||(e[9]=c(()=>{},["stop"]))},[m(C($),{pureColor:n.value,"onUpdate:pureColor":[e[0]||(e[0]=t=>n.value=t),H],gradientColor:d.value,"onUpdate:gradientColor":[e[1]||(e[1]=t=>d.value=t),e[3]||(e[3]=t=>a("update:gradientColor",t))],"active-key":v.value,"onUpdate:active-key":e[2]||(e[2]=t=>v.value=t),lang:"En","is-widget":!0,format:"rgb","picker-type":l.pickerType,"use-type":l.useType,"disable-history":l.disableHistory,"round-history":l.roundHistory,"disable-alpha":l.disableAlpha,"onUpdate:activeKey":e[4]||(e[4]=t=>a("update:activeKey",t)),onPureColorChange:e[5]||(e[5]=t=>a("pureColorChange",t)),onGradientColorChange:e[6]||(e[6]=t=>a("gradientColorChange",t)),onActiveKeyChange:e[7]||(e[7]=t=>a("activeKeyChange",t))},null,8,["pureColor","gradientColor","active-key","picker-type","use-type","disable-history","round-history","disable-alpha"]),u("div",{class:"close-btn",shape:"round",type:"text",style:k({color:C(K).dark?"var(--gray-7)":"var(--gray-6)",...I[l.closeBtnCorner]})},null,4),B?Q("",!0):(P(),x("div",ne,[j(J(o.$t("colorPickerPlus.pressC"))+" ",1),m(R,{shape:"circle",loading:y.value,size:"small",onClick:c(T,["stop"])},{icon:E(()=>[m(C(le),null,{component:E(()=>[se]),_:1})]),_:1},8,["loading","onClick"])]))],38),[[W,i.value]])],4)])}}}),ce=ee(ie,[["__scopeId","data-v-30a3c747"]]);export{ce as C};

var ba=Object.defineProperty;var xa=(t,e,n)=>e in t?ba(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var O=(t,e,n)=>(xa(t,typeof e!="symbol"?e+"":e,n),n);import{d as ee,r as E,o as _,c as A,w as g,a as p,b as L,e as Ke,u as m,C as wa,F as be,f as _t,A as Ea,g as Kt,h as k,_ as oe,i as bn,j as x,p as tt,k as nt,l as te,s as Z,m as _o,n as de,t as S,q as Ue,v as xn,x as cs,y as ce,z as hn,B as mt,P as yt,D as no,E as B,G as xt,H as pe,I as Ca,T as us,J as ae,K as Re,L as gt,M as K,N as ds,O as Ie,S as ka,Q as Sa,V as $a,R as P,U as Ia,W as Ta,X as Fe,Y as On,Z as hs,$ as Oa,a0 as Ma,a1 as Aa,a2 as Da,a3 as La,a4 as ps,a5 as St,a6 as wn,a7 as wt,a8 as Xt,a9 as pn,aa as qt,ab as Ra,ac as Na,ad as En,ae as Pa,af as Fa,ag as yo,ah as De,ai as Mn,aj as fs,ak as To,al as Ua,am as za,an as ne,ao as He,ap as Ba,aq as Ha,ar as gs,as as Oo,at as Wa,au as Ve,av as Va,aw as ja,ax as Ka,ay as Ga,az as Ya,aA as Xa,aB as qa,aC as Za,aD as Ja,aE as Qa,aF as ei,aG as ti,aH as ni,aI as Mo,aJ as oi,aK as si,aL as bo,aM as ai,aN as ii,aO as Lt,aP as ms,aQ as vs,aR as _s,aS as ri,aT as li,aU as oo,aV as ci,aW as tn,aX as ui,aY as di,aZ as hi,a_ as pi,a$ as fi,b0 as gi,b1 as mi,b2 as vi,b3 as _i,b4 as yi,b5 as bi,b6 as Ao,b7 as Pn,b8 as rt,b9 as xi,ba as wi,bb as Ei,bc as Ci,bd as ki,be as ys,bf as bs,bg as Si,bh as $i,bi as Ii,bj as xs,bk as ws,bl as fn,bm as Ti,bn as Oi,bo as Mi,bp as Ai,bq as Di,br as Do,bs as Li,bt as Fn,bu as Ri,bv as Ni,bw as Lo,bx as Pi,by as Fi,bz as Ui}from"./index.fa3829f9.js";import{J as $t}from"./judgeType.9795f0d8.js";import{I as Es}from"./Icon.87d3d941.js";const zi=ee({__name:"index",emits:["chosenIcon"],setup(t,{emit:e}){const n=E(!1);function o(a){n.value!==a&&(n.value=a)}function s(a){e("chosenIcon",a),o(!1)}return(a,i)=>{const r=k("a-button"),l=k("a-space"),c=k("a-collapse-panel"),u=k("a-collapse"),d=k("a-tab-pane"),h=k("a-tabs"),f=k("a-popover");return _(),A(f,{visible:n.value,"onUpdate:visible":i[0]||(i[0]=v=>n.value=v),trigger:"click"},{content:g(()=>[p(h,{"tab-position":"bottom"},{default:g(()=>[(_(!0),L(be,null,Ke(m(Ea),(v,y)=>(_(),A(d,{key:y,tab:a.$t(`iconPicker.${y}`),"destroy-inactive-panel":""},{default:g(()=>[p(u,{"destroy-inactive-panel":"",ghost:"",accordion:""},{expandIcon:g(({isActive:w})=>[p(m(wa),{rotate:w?90:0},null,8,["rotate"])]),default:g(()=>[(_(!0),L(be,null,Ke(v,(w,C)=>(_(),A(c,{key:C,header:a.$t(`iconPicker.${C}`),style:{"max-width":"200px"}},{default:g(()=>[p(l,{style:{"flex-wrap":"wrap","max-height":"200px",overflow:"auto"}},{default:g(()=>[(_(!0),L(be,null,Ke(w,(b,I)=>(_(),A(r,{key:I,shape:"circle",onClick:F=>s(I)},{default:g(()=>[(_(),A(_t(b)))]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["header"]))),128))]),_:2},1024)]),_:2},1032,["tab"]))),128))]),_:1})]),default:g(()=>[Kt(a.$slots,"default",{},void 0,!0)]),_:3},8,["visible"])}}}),Bi=oe(zi,[["__scopeId","data-v-7148a8c4"]]),Hi=ee({__name:"Icon",props:{icon:null},setup(t){const n=E(bn(t.icon));return(o,s)=>(_(),A(_t(n.value)))}}),Zt=oe(Hi,[["__scopeId","data-v-86c46195"]]),Wi=t=>(tt("data-v-6b1eef27"),t=t(),nt(),t),Vi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"},ji=Wi(()=>x("g",{id:"canvas"},[x("path",{class:"canvas",d:"M 15 15 H 0 V 0 H 15 Z"})],-1)),Ki={id:"level-1"},Gi=["fill"],Yi=["fill"],Xi=["fill"],qi=ee({__name:"SideBarIcon",props:{lineColor:{default:"var(--static-text-color)"},bgColor:{default:"var(--primary-bg-color)"},isFill:{type:Boolean,default:!1}},setup(t){return(e,n)=>(_(),L("svg",Vi,[ji,x("g",Ki,[x("path",{class:"line",fill:t.lineColor,d:"M 13 1 H 2 L 1 2 V 13 L 2 14 H 13 L 14 13 V 2 L 13 1 Z"},null,8,Gi),x("path",{class:"content left",fill:t.bgColor,d:"M 2 2 v 11 h 7 V 2 Z"},null,8,Yi),x("path",{class:"content right",fill:t.isFill?t.lineColor:t.bgColor,d:"M 10 2 v 11 h 3 V 2 Z"},null,8,Xi)])]))}}),Zi=oe(qi,[["__scopeId","data-v-6b1eef27"]]),Cs=t=>(tt("data-v-9a0d91a1"),t=t(),nt(),t),Ji={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},Qi=Cs(()=>x("g",{id:"canvas"},[x("path",{class:"canvas",d:"M16,0V16H0V0Z"})],-1)),er=["transform"],tr=Cs(()=>x("path",{class:"light-default",d:"M14,4.293,14.707,5,8.354,11.354H7.646L1.293,5,2,4.293l6,6Z"},null,-1)),nr=[tr];var ks=(t=>(t.right="rotate(-90)",t.left="rotate(90)",t.top="rotate(180)",t.bottom="rotate(0)",t))(ks||{});const or=ee({__name:"RightAngleIcon",props:{type:{default:"right"}},setup(t){return(e,n)=>(_(),L("svg",Ji,[Qi,x("g",{id:"level-1",transform:ks[t.type]},nr,8,er)]))}}),sr=oe(or,[["__scopeId","data-v-9a0d91a1"]]);async function ar(){const t=await Z.getCategoryTree(),e=await _o(),n=[];for(let o=0;o<t.length;o++)n.push(ir(t[o],e));return n}function ir(t,e){const n=de.exports.cloneDeep(t);return e.map(({category:o,id:s})=>{o.map(a=>{a===t.key&&(n.extIds||(n.extIds=[]),n.extIds.push(s))})}),n}function An(t,e){const n=e.find(o=>o.key===t);return n==null?void 0:n.icon}function rr(t){const e=te.find(n=>n.id===t);if(!e)throw new Error("Extension config not found.");return e.category}const Ss={HOME:"home"};async function $s(){const e=(await Z.getCategoryTree()).filter(n=>!n.disabled);return[{key:Ss.HOME,icon:"HomeOutlined"},...e]}async function Is(t){var o;const e=await ar();if(t==="all"){const s=new Set;return e.map(a=>{var i;return(i=a.extIds)==null?void 0:i.map(r=>s.add(r))}),Array.from(s)}const n=e.find(s=>s.key===t);return n?(o=n.extIds)!=null?o:[]:(console.error("category not found"),[])}const lr={key:0},cr={key:1},ur=ee({__name:"CategoryName",props:{categoryLeaf:null},setup(t){return(e,n)=>t.categoryLeaf.type&&t.categoryLeaf.type==="custom"?(_(),L("span",lr,S(t.categoryLeaf.name),1)):(_(),L("span",cr,S(e.$t(`category.${t.categoryLeaf.key}.label`)),1))}});const Ts=oe(ur,[["__scopeId","data-v-263c67dd"]]),dr=ee({__name:"EditCategory",props:{extId:null},emits:["afterClose"],setup(t,{emit:e}){const n=t,{t:o}=Ue(),s=E(!1);function a(y){y!==s.value&&(s.value=y)}const i=E([]),r=xn({category:null}),l=xn({category:[{required:!0,message:o("curatedCards.editCategory.atLeastOne"),trigger:"change"}]}),{resetFields:c,validate:u,validateInfos:d,mergeValidateInfo:h}=cs(r,l);ce(()=>n.extId,async y=>{if(y===null)a(!1),r.category=null;else{a(!0);const w=await Z.getCategoryTree();i.value=w.filter(b=>b.key!==yt.STAR&&b.key!==yt.ALL);const C=await Z.getCustomExtensionConfig(y);C&&C.category&&C.category.length>0?r.category=C.category:r.category=rr(y)}},{immediate:!0});async function f(){try{if(await u(),!n.extId)throw new Error("extId is null");const y=hn(r).category,w=await Z.getCustomExtensionConfig(n.extId);Z.setCustomExtensionConfig({...w,id:n.extId,category:y}),mt(),a(!1)}catch(y){console.error(y)}}function v(){e("afterClose")}return(y,w)=>{const C=k("a-checkbox"),b=k("a-checkbox-group"),I=k("a-form-item"),F=k("a-form"),H=k("a-modal");return _(),A(H,{visible:s.value,title:y.$t("curatedCards.editCategory.title"),class:"edit-category-wrapper","z-index":2e3,"destroy-on-close":"","after-close":v,onOk:f,onCancel:w[1]||(w[1]=V=>a(!1))},{default:g(()=>[p(F,null,{default:g(()=>[p(I,no({required:""},m(d).category),{default:g(()=>[r.category!==null?(_(),A(b,{key:0,value:r.category,"onUpdate:value":w[0]||(w[0]=V=>r.category=V),class:"edit-category-wrap"},{default:g(()=>[(_(!0),L(be,null,Ke(i.value,V=>(_(),A(C,{key:V.key,value:V.key},{default:g(()=>[p(Ts,{"category-leaf":V},null,8,["category-leaf"])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):B("",!0)]),_:1},16)]),_:1})]),_:1},8,["visible","title"])}}});const hr=oe(dr,[["__scopeId","data-v-7aa9396e"]]);async function Os(t){const e=await Z.getExtIdsOfCategoryLeaf(yt.STAR),n=de.exports.cloneDeep(t);return e.length<=0||t.map((o,s)=>{e.find(i=>i===o.id)!==void 0&&(n[s].isStarred=!0)}),n}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,o)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ro(Object(n),!0).forEach(function(o){pr(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function gn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gn=function(e){return typeof e}:gn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}function pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qe(){return Qe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Qe.apply(this,arguments)}function fr(t,e){if(t==null)return{};var n={},o=Object.keys(t),s,a;for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function gr(t,e){if(t==null)return{};var n=fr(t,e),o,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)o=a[s],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(n[o]=t[o]))}return n}var mr="1.15.0";function Je(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ot=Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Jt=Je(/Edge/i),No=Je(/firefox/i),zt=Je(/safari/i)&&!Je(/chrome/i)&&!Je(/android/i),Ms=Je(/iP(ad|od|hone)/i),As=Je(/chrome/i)&&Je(/android/i),Ds={capture:!1,passive:!1};function le(t,e,n){t.addEventListener(e,n,!ot&&Ds)}function re(t,e,n){t.removeEventListener(e,n,!ot&&Ds)}function Cn(t,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function vr(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Be(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Cn(t,e):Cn(t,e))||o&&t===n)return t;if(t===n)break}while(t=vr(t))}return null}var Po=/\s+/g;function Te(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Po," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Po," ")}}function Y(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Ot(t,e){var n="";if(typeof t=="string")n=t;else do{var o=Y(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function Ls(t,e,n){if(t){var o=t.getElementsByTagName(e),s=0,a=o.length;if(n)for(;s<a;s++)n(o[s],s);return o}return[]}function Ge(){var t=document.scrollingElement;return t||document.documentElement}function xe(t,e,n,o,s){if(!(!t.getBoundingClientRect&&t!==window)){var a,i,r,l,c,u,d;if(t!==window&&t.parentNode&&t!==Ge()?(a=t.getBoundingClientRect(),i=a.top,r=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,r=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!ot))do if(s&&s.getBoundingClientRect&&(Y(s,"transform")!=="none"||n&&Y(s,"position")!=="static")){var h=s.getBoundingClientRect();i-=h.top+parseInt(Y(s,"border-top-width")),r-=h.left+parseInt(Y(s,"border-left-width")),l=i+a.height,c=r+a.width;break}while(s=s.parentNode);if(o&&t!==window){var f=Ot(s||t),v=f&&f.a,y=f&&f.d;f&&(i/=y,r/=v,d/=v,u/=y,l=i+u,c=r+d)}return{top:i,left:r,bottom:l,right:c,width:d,height:u}}}function Fo(t,e,n){for(var o=lt(t,!0),s=xe(t)[e];o;){var a=xe(o)[n],i=void 0;if(n==="top"||n==="left"?i=s>=a:i=s<=a,!i)return o;if(o===Ge())break;o=lt(o,!1)}return!1}function Mt(t,e,n,o){for(var s=0,a=0,i=t.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==G.ghost&&(o||i[a]!==G.dragged)&&Be(i[a],n.draggable,t,!1)){if(s===e)return i[a];s++}a++}return null}function xo(t,e){for(var n=t.lastElementChild;n&&(n===G.ghost||Y(n,"display")==="none"||e&&!Cn(n,e));)n=n.previousElementSibling;return n||null}function Le(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==G.clone&&(!e||Cn(t,e))&&n++;return n}function Uo(t){var e=0,n=0,o=Ge();if(t)do{var s=Ot(t),a=s.a,i=s.d;e+=t.scrollLeft*a,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function _r(t,e){for(var n in t)if(!!t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function lt(t,e){if(!t||!t.getBoundingClientRect)return Ge();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=Y(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ge();if(o||e)return n;o=!0}}while(n=n.parentNode);return Ge()}function yr(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Un(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Bt;function Rs(t,e){return function(){if(!Bt){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),Bt=setTimeout(function(){Bt=void 0},e)}}}function br(){clearTimeout(Bt),Bt=void 0}function Ns(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Ps(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var Ae="Sortable"+new Date().getTime();function xr(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(Y(s,"display")==="none"||s===G.ghost)){t.push({target:s,rect:xe(s)});var a=Ye({},t[t.length-1].rect);if(s.thisAnimationDuration){var i=Ot(s,!0);i&&(a.top-=i.f,a.left-=i.e)}s.fromRect=a}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(_r(t,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var a=!1,i=0;t.forEach(function(r){var l=0,c=r.target,u=c.fromRect,d=xe(c),h=c.prevFromRect,f=c.prevToRect,v=r.rect,y=Ot(c,!0);y&&(d.top-=y.f,d.left-=y.e),c.toRect=d,c.thisAnimationDuration&&Un(h,d)&&!Un(u,d)&&(v.top-d.top)/(v.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Er(v,h,f,s.options)),Un(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,v,d,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,s,a,i){if(i){Y(o,"transition",""),Y(o,"transform","");var r=Ot(this.el),l=r&&r.a,c=r&&r.d,u=(s.left-a.left)/(l||1),d=(s.top-a.top)/(c||1);o.animatingX=!!u,o.animatingY=!!d,Y(o,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=wr(o),Y(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Y(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){Y(o,"transition",""),Y(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function wr(t){return t.offsetWidth}function Er(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var Et=[],zn={initializeByDefault:!0},Qt={mount:function(e){for(var n in zn)zn.hasOwnProperty(n)&&!(n in e)&&(e[n]=zn[n]);Et.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Et.push(e)},pluginEvent:function(e,n,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var a=e+"Global";Et.forEach(function(i){!n[i.pluginName]||(n[i.pluginName][a]&&n[i.pluginName][a](Ye({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](Ye({sortable:n},o)))})},initializePlugins:function(e,n,o,s){Et.forEach(function(r){var l=r.pluginName;if(!(!e.options[l]&&!r.initializeByDefault)){var c=new r(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Qe(o,c.defaults)}});for(var a in e.options)if(!!e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var o={};return Et.forEach(function(s){typeof s.eventProperties=="function"&&Qe(o,s.eventProperties.call(n[s.pluginName],e))}),o},modifyOption:function(e,n,o){var s;return Et.forEach(function(a){!e[a.pluginName]||a.optionListeners&&typeof a.optionListeners[n]=="function"&&(s=a.optionListeners[n].call(e[a.pluginName],o))}),s}};function Cr(t){var e=t.sortable,n=t.rootEl,o=t.name,s=t.targetEl,a=t.cloneEl,i=t.toEl,r=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[Ae],!!e){var y,w=e.options,C="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!ot&&!Jt?y=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(o,!0,!0)),y.to=i||n,y.from=r||n,y.item=s||n,y.clone=a,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=u,y.newDraggableIndex=d,y.originalEvent=h,y.pullMode=f?f.lastPutMode:void 0;var b=Ye(Ye({},v),Qt.getEventProperties(o,e));for(var I in b)y[I]=b[I];n&&n.dispatchEvent(y),w[C]&&w[C].call(e,y)}}var kr=["evt"],$e=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,a=gr(o,kr);Qt.pluginEvent.bind(G)(e,n,Ye({dragEl:M,parentEl:ge,ghostEl:Q,rootEl:he,nextEl:pt,lastDownEl:mn,cloneEl:fe,cloneHidden:it,dragStarted:Pt,putSortable:Ee,activeSortable:G.active,originalEvent:s,oldIndex:It,oldDraggableIndex:Ht,newIndex:Oe,newDraggableIndex:at,hideGhostForTarget:Bs,unhideGhostForTarget:Hs,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(r){Se({sortable:n,name:r,originalEvent:s})}},a))};function Se(t){Cr(Ye({putSortable:Ee,cloneEl:fe,targetEl:M,rootEl:he,oldIndex:It,oldDraggableIndex:Ht,newIndex:Oe,newDraggableIndex:at},t))}var M,ge,Q,he,pt,mn,fe,it,It,Oe,Ht,at,nn,Ee,kt=!1,kn=!1,Sn=[],dt,Pe,Bn,Hn,zo,Bo,Pt,Ct,Wt,Vt=!1,on=!1,vn,ke,Wn=[],so=!1,$n=[],Dn=typeof document<"u",sn=Ms,Ho=Jt||ot?"cssFloat":"float",Sr=Dn&&!As&&!Ms&&"draggable"in document.createElement("div"),Fs=function(){if(!!Dn){if(ot)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Us=function(e,n){var o=Y(e),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=Mt(e,0,n),i=Mt(e,1,n),r=a&&Y(a),l=i&&Y(i),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+xe(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+xe(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var d=r.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||c>=s&&o[Ho]==="none"||i&&o[Ho]==="none"&&c+u>s)?"vertical":"horizontal"},$r=function(e,n,o){var s=o?e.left:e.top,a=o?e.right:e.bottom,i=o?e.width:e.height,r=o?n.left:n.top,l=o?n.right:n.bottom,c=o?n.width:n.height;return s===r||a===l||s+i/2===r+c/2},Ir=function(e,n){var o;return Sn.some(function(s){var a=s[Ae].options.emptyInsertThreshold;if(!(!a||xo(s))){var i=xe(s),r=e>=i.left-a&&e<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(r&&l)return o=s}}),o},zs=function(e){function n(a,i){return function(r,l,c,u){var d=r.options.group.name&&l.options.group.name&&r.options.group.name===l.options.group.name;if(a==null&&(i||d))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(r,l,c,u),i)(r,l,c,u);var h=(i?r:l).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var o={},s=e.group;(!s||gn(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=n(s.pull,!0),o.checkPut=n(s.put),o.revertClone=s.revertClone,e.group=o},Bs=function(){!Fs&&Q&&Y(Q,"display","none")},Hs=function(){!Fs&&Q&&Y(Q,"display","")};Dn&&!As&&document.addEventListener("click",function(t){if(kn)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),kn=!1,!1},!0);var ht=function(e){if(M){e=e.touches?e.touches[0]:e;var n=Ir(e.clientX,e.clientY);if(n){var o={};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Ae]._onDragOver(o)}}},Tr=function(e){M&&M.parentNode[Ae]._isOutsideThisEl(e.target)};function G(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Qe({},e),t[Ae]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Us(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:G.supportPointer!==!1&&"PointerEvent"in window&&!zt,emptyInsertThreshold:5};Qt.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);zs(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Sr,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?le(t,"pointerdown",this._onTapStart):(le(t,"mousedown",this._onTapStart),le(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(le(t,"dragover",this),le(t,"dragenter",this)),Sn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qe(this,xr())}G.prototype={constructor:G,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,M):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var n=this,o=this.el,s=this.options,a=s.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(r||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=s.filter;if(Pr(o),!M&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&zt&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Be(l,s.draggable,o,!1),!(l&&l.animated)&&mn!==l)){if(It=Le(l),Ht=Le(l,s.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Se({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),$e("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Be(c,d.trim(),o,!1),d)return Se({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:o,toEl:o}),$e("filter",n,{evt:e}),!0}),u)){a&&e.cancelable&&e.preventDefault();return}s.handle&&!Be(c,s.handle,o,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,n,o){var s=this,a=s.el,i=s.options,r=a.ownerDocument,l;if(o&&!M&&o.parentNode===a){var c=xe(o);if(he=a,M=o,ge=M.parentNode,pt=M.nextSibling,mn=o,nn=i.group,G.dragged=M,dt={target:M,clientX:(n||e).clientX,clientY:(n||e).clientY},zo=dt.clientX-c.left,Bo=dt.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,M.style["will-change"]="all",l=function(){if($e("delayEnded",s,{evt:e}),G.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!No&&s.nativeDraggable&&(M.draggable=!0),s._triggerDragStart(e,n),Se({sortable:s,name:"choose",originalEvent:e}),Te(M,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){Ls(M,u.trim(),Vn)}),le(r,"dragover",ht),le(r,"mousemove",ht),le(r,"touchmove",ht),le(r,"mouseup",s._onDrop),le(r,"touchend",s._onDrop),le(r,"touchcancel",s._onDrop),No&&this.nativeDraggable&&(this.options.touchStartThreshold=4,M.draggable=!0),$e("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Jt||ot))){if(G.eventCanceled){this._onDrop();return}le(r,"mouseup",s._disableDelayedDrag),le(r,"touchend",s._disableDelayedDrag),le(r,"touchcancel",s._disableDelayedDrag),le(r,"mousemove",s._delayedDragTouchMoveHandler),le(r,"touchmove",s._delayedDragTouchMoveHandler),i.supportPointer&&le(r,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){M&&Vn(M),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;re(e,"mouseup",this._disableDelayedDrag),re(e,"touchend",this._disableDelayedDrag),re(e,"touchcancel",this._disableDelayedDrag),re(e,"mousemove",this._delayedDragTouchMoveHandler),re(e,"touchmove",this._delayedDragTouchMoveHandler),re(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?le(document,"pointermove",this._onTouchMove):n?le(document,"touchmove",this._onTouchMove):le(document,"mousemove",this._onTouchMove):(le(M,"dragend",this),le(he,"dragstart",this._onDragStart));try{document.selection?_n(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(kt=!1,he&&M){$e("dragStarted",this,{evt:n}),this.nativeDraggable&&le(document,"dragover",Tr);var o=this.options;!e&&Te(M,o.dragClass,!1),Te(M,o.ghostClass,!0),G.active=this,e&&this._appendGhost(),Se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Pe){this._lastX=Pe.clientX,this._lastY=Pe.clientY,Bs();for(var e=document.elementFromPoint(Pe.clientX,Pe.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pe.clientX,Pe.clientY),e!==n);)n=e;if(M.parentNode[Ae]._isOutsideThisEl(e),n)do{if(n[Ae]){var o=void 0;if(o=n[Ae]._onDragOver({clientX:Pe.clientX,clientY:Pe.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Hs()}},_onTouchMove:function(e){if(dt){var n=this.options,o=n.fallbackTolerance,s=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=Q&&Ot(Q,!0),r=Q&&i&&i.a,l=Q&&i&&i.d,c=sn&&ke&&Uo(ke),u=(a.clientX-dt.clientX+s.x)/(r||1)+(c?c[0]-Wn[0]:0)/(r||1),d=(a.clientY-dt.clientY+s.y)/(l||1)+(c?c[1]-Wn[1]:0)/(l||1);if(!G.active&&!kt){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Q){i?(i.e+=u-(Bn||0),i.f+=d-(Hn||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Y(Q,"webkitTransform",h),Y(Q,"mozTransform",h),Y(Q,"msTransform",h),Y(Q,"transform",h),Bn=u,Hn=d,Pe=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Q){var e=this.options.fallbackOnBody?document.body:he,n=xe(M,!0,sn,!0,e),o=this.options;if(sn){for(ke=e;Y(ke,"position")==="static"&&Y(ke,"transform")==="none"&&ke!==document;)ke=ke.parentNode;ke!==document.body&&ke!==document.documentElement?(ke===document&&(ke=Ge()),n.top+=ke.scrollTop,n.left+=ke.scrollLeft):ke=Ge(),Wn=Uo(ke)}Q=M.cloneNode(!0),Te(Q,o.ghostClass,!1),Te(Q,o.fallbackClass,!0),Te(Q,o.dragClass,!0),Y(Q,"transition",""),Y(Q,"transform",""),Y(Q,"box-sizing","border-box"),Y(Q,"margin",0),Y(Q,"top",n.top),Y(Q,"left",n.left),Y(Q,"width",n.width),Y(Q,"height",n.height),Y(Q,"opacity","0.8"),Y(Q,"position",sn?"absolute":"fixed"),Y(Q,"zIndex","100000"),Y(Q,"pointerEvents","none"),G.ghost=Q,e.appendChild(Q),Y(Q,"transform-origin",zo/parseInt(Q.style.width)*100+"% "+Bo/parseInt(Q.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,s=e.dataTransfer,a=o.options;if($e("dragStart",this,{evt:e}),G.eventCanceled){this._onDrop();return}$e("setupClone",this),G.eventCanceled||(fe=Ps(M),fe.removeAttribute("id"),fe.draggable=!1,fe.style["will-change"]="",this._hideClone(),Te(fe,this.options.chosenClass,!1),G.clone=fe),o.cloneId=_n(function(){$e("clone",o),!G.eventCanceled&&(o.options.removeCloneOnHide||he.insertBefore(fe,M),o._hideClone(),Se({sortable:o,name:"clone"}))}),!n&&Te(M,a.dragClass,!0),n?(kn=!0,o._loopId=setInterval(o._emulateDragOver,50)):(re(document,"mouseup",o._onDrop),re(document,"touchend",o._onDrop),re(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",a.setData&&a.setData.call(o,s,M)),le(document,"drop",o),Y(M,"transform","translateZ(0)")),kt=!0,o._dragStartId=_n(o._dragStarted.bind(o,n,e)),le(document,"selectstart",o),Pt=!0,zt&&Y(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,s,a,i,r=this.options,l=r.group,c=G.active,u=nn===l,d=r.sort,h=Ee||c,f,v=this,y=!1;if(so)return;function w(ve,we){$e(ve,v,Ye({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:i,dragRect:s,targetRect:a,canSort:d,fromSortable:h,target:o,completed:b,onMove:function(en,Rn){return an(he,n,M,s,en,xe(en),e,Rn)},changed:I},we))}function C(){w("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function b(ve){return w("dragOverCompleted",{insertion:ve}),ve&&(u?c._hideClone():c._showClone(v),v!==h&&(Te(M,Ee?Ee.options.ghostClass:c.options.ghostClass,!1),Te(M,r.ghostClass,!0)),Ee!==v&&v!==G.active?Ee=v:v===G.active&&Ee&&(Ee=null),h===v&&(v._ignoreWhileAnimating=o),v.animateAll(function(){w("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===M&&!M.animated||o===n&&!o.animated)&&(Ct=null),!r.dragoverBubble&&!e.rootEl&&o!==document&&(M.parentNode[Ae]._isOutsideThisEl(e.target),!ve&&ht(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function I(){Oe=Le(M),at=Le(M,r.draggable),Se({sortable:v,name:"change",toEl:n,newIndex:Oe,newDraggableIndex:at,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=Be(o,r.draggable,n,!0),w("dragOver"),G.eventCanceled)return y;if(M.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||v._ignoreWhileAnimating===o)return b(!1);if(kn=!1,c&&!r.disabled&&(u?d||(i=ge!==he):Ee===this||(this.lastPutMode=nn.checkPull(this,c,M,e))&&l.checkPut(this,c,M,e))){if(f=this._getDirection(e,o)==="vertical",s=xe(M),w("dragOverValid"),G.eventCanceled)return y;if(i)return ge=he,C(),this._hideClone(),w("revert"),G.eventCanceled||(pt?he.insertBefore(M,pt):he.appendChild(M)),b(!0);var F=xo(n,r.draggable);if(!F||Dr(e,f,this)&&!F.animated){if(F===M)return b(!1);if(F&&n===e.target&&(o=F),o&&(a=xe(o)),an(he,n,M,s,o,a,e,!!o)!==!1)return C(),F&&F.nextSibling?n.insertBefore(M,F.nextSibling):n.appendChild(M),ge=n,I(),b(!0)}else if(F&&Ar(e,f,this)){var H=Mt(n,0,r,!0);if(H===M)return b(!1);if(o=H,a=xe(o),an(he,n,M,s,o,a,e,!1)!==!1)return C(),n.insertBefore(M,H),ge=n,I(),b(!0)}else if(o.parentNode===n){a=xe(o);var V=0,N,D=M.parentNode!==n,R=!$r(M.animated&&M.toRect||s,o.animated&&o.toRect||a,f),$=f?"top":"left",j=Fo(o,"top","top")||Fo(M,"top","top"),T=j?j.scrollTop:void 0;Ct!==o&&(N=a[$],Vt=!1,on=!R&&r.invertSwap||D),V=Lr(e,o,a,f,R?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,on,Ct===o);var X;if(V!==0){var z=Le(M);do z-=V,X=ge.children[z];while(X&&(Y(X,"display")==="none"||X===Q))}if(V===0||X===o)return b(!1);Ct=o,Wt=V;var U=o.nextElementSibling,W=!1;W=V===1;var me=an(he,n,M,s,o,a,e,W);if(me!==!1)return(me===1||me===-1)&&(W=me===1),so=!0,setTimeout(Mr,30),C(),W&&!U?n.appendChild(M):o.parentNode.insertBefore(M,W?U:o),j&&Ns(j,0,T-j.scrollTop),ge=M.parentNode,N!==void 0&&!on&&(vn=Math.abs(N-xe(o)[$])),I(),b(!0)}if(n.contains(M))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){re(document,"mousemove",this._onTouchMove),re(document,"touchmove",this._onTouchMove),re(document,"pointermove",this._onTouchMove),re(document,"dragover",ht),re(document,"mousemove",ht),re(document,"touchmove",ht)},_offUpEvents:function(){var e=this.el.ownerDocument;re(e,"mouseup",this._onDrop),re(e,"touchend",this._onDrop),re(e,"pointerup",this._onDrop),re(e,"touchcancel",this._onDrop),re(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(Oe=Le(M),at=Le(M,o.draggable),$e("drop",this,{evt:e}),ge=M&&M.parentNode,Oe=Le(M),at=Le(M,o.draggable),G.eventCanceled){this._nulling();return}kt=!1,on=!1,Vt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ao(this.cloneId),ao(this._dragStartId),this.nativeDraggable&&(re(document,"drop",this),re(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),zt&&Y(document.body,"user-select",""),Y(M,"transform",""),e&&(Pt&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Q&&Q.parentNode&&Q.parentNode.removeChild(Q),(he===ge||Ee&&Ee.lastPutMode!=="clone")&&fe&&fe.parentNode&&fe.parentNode.removeChild(fe),M&&(this.nativeDraggable&&re(M,"dragend",this),Vn(M),M.style["will-change"]="",Pt&&!kt&&Te(M,Ee?Ee.options.ghostClass:this.options.ghostClass,!1),Te(M,this.options.chosenClass,!1),Se({sortable:this,name:"unchoose",toEl:ge,newIndex:null,newDraggableIndex:null,originalEvent:e}),he!==ge?(Oe>=0&&(Se({rootEl:ge,name:"add",toEl:ge,fromEl:he,originalEvent:e}),Se({sortable:this,name:"remove",toEl:ge,originalEvent:e}),Se({rootEl:ge,name:"sort",toEl:ge,fromEl:he,originalEvent:e}),Se({sortable:this,name:"sort",toEl:ge,originalEvent:e})),Ee&&Ee.save()):Oe!==It&&Oe>=0&&(Se({sortable:this,name:"update",toEl:ge,originalEvent:e}),Se({sortable:this,name:"sort",toEl:ge,originalEvent:e})),G.active&&((Oe==null||Oe===-1)&&(Oe=It,at=Ht),Se({sortable:this,name:"end",toEl:ge,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){$e("nulling",this),he=M=ge=Q=pt=fe=mn=it=dt=Pe=Pt=Oe=at=It=Ht=Ct=Wt=Ee=nn=G.dragged=G.ghost=G.clone=G.active=null,$n.forEach(function(e){e.checked=!0}),$n.length=Bn=Hn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":M&&(this._onDragOver(e),Or(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,s=0,a=o.length,i=this.options;s<a;s++)n=o[s],Be(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||Nr(n));return e},sort:function(e,n){var o={},s=this.el;this.toArray().forEach(function(a,i){var r=s.children[i];Be(r,this.options.draggable,s,!1)&&(o[a]=r)},this),n&&this.captureAnimationState(),e.forEach(function(a){o[a]&&(s.removeChild(o[a]),s.appendChild(o[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Be(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var s=Qt.modifyOption(this,e,n);typeof s<"u"?o[e]=s:o[e]=n,e==="group"&&zs(o)},destroy:function(){$e("destroy",this);var e=this.el;e[Ae]=null,re(e,"mousedown",this._onTapStart),re(e,"touchstart",this._onTapStart),re(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(re(e,"dragover",this),re(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Sn.splice(Sn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!it){if($e("hideClone",this),G.eventCanceled)return;Y(fe,"display","none"),this.options.removeCloneOnHide&&fe.parentNode&&fe.parentNode.removeChild(fe),it=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(it){if($e("showClone",this),G.eventCanceled)return;M.parentNode==he&&!this.options.group.revertClone?he.insertBefore(fe,M):pt?he.insertBefore(fe,pt):he.appendChild(fe),this.options.group.revertClone&&this.animate(M,fe),Y(fe,"display",""),it=!1}}};function Or(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function an(t,e,n,o,s,a,i,r){var l,c=t[Ae],u=c.options.onMove,d;return window.CustomEvent&&!ot&&!Jt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=s||e,l.relatedRect=a||xe(e),l.willInsertAfter=r,l.originalEvent=i,t.dispatchEvent(l),u&&(d=u.call(c,l,i)),d}function Vn(t){t.draggable=!1}function Mr(){so=!1}function Ar(t,e,n){var o=xe(Mt(n.el,0,n.options,!0)),s=10;return e?t.clientX<o.left-s||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-s||t.clientY<o.bottom&&t.clientX<o.left}function Dr(t,e,n){var o=xe(xo(n.el,n.options.draggable)),s=10;return e?t.clientX>o.right+s||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+s}function Lr(t,e,n,o,s,a,i,r){var l=o?t.clientY:t.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!i){if(r&&vn<c*s){if(!Vt&&(Wt===1?l>u+c*a/2:l<d-c*a/2)&&(Vt=!0),Vt)h=!0;else if(Wt===1?l<u+vn:l>d-vn)return-Wt}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return Rr(e)}return h=h||i,h&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}function Rr(t){return Le(M)<Le(t)?1:-1}function Nr(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Pr(t){$n.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&$n.push(o)}}function _n(t){return setTimeout(t,0)}function ao(t){return clearTimeout(t)}Dn&&le(document,"touchmove",function(t){(G.active||kt)&&t.cancelable&&t.preventDefault()});G.utils={on:le,off:re,css:Y,find:Ls,is:function(e,n){return!!Be(e,n,e,!1)},extend:yr,throttle:Rs,closest:Be,toggleClass:Te,clone:Ps,index:Le,nextTick:_n,cancelNextTick:ao,detectDirection:Us,getChild:Mt};G.get=function(t){return t[Ae]};G.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(G.utils=Ye(Ye({},G.utils),o.utils)),Qt.mount(o)})};G.create=function(t,e){return new G(t,e)};G.version=mr;var _e=[],Ft,io,ro=!1,jn,Kn,In,Ut;function Fr(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?le(document,"dragover",this._handleAutoScroll):this.options.supportPointer?le(document,"pointermove",this._handleFallbackAutoScroll):o.touches?le(document,"touchmove",this._handleFallbackAutoScroll):le(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?re(document,"dragover",this._handleAutoScroll):(re(document,"pointermove",this._handleFallbackAutoScroll),re(document,"touchmove",this._handleFallbackAutoScroll),re(document,"mousemove",this._handleFallbackAutoScroll)),Wo(),yn(),br()},nulling:function(){In=io=Ft=ro=Ut=jn=Kn=null,_e.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var s=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(a,i);if(In=n,o||this.options.forceAutoScrollFallback||Jt||ot||zt){Gn(n,this.options,r,o);var l=lt(r,!0);ro&&(!Ut||a!==jn||i!==Kn)&&(Ut&&Wo(),Ut=setInterval(function(){var c=lt(document.elementFromPoint(a,i),!0);c!==l&&(l=c,yn()),Gn(n,s.options,c,o)},10),jn=a,Kn=i)}else{if(!this.options.bubbleScroll||lt(r,!0)===Ge()){yn();return}Gn(n,this.options,lt(r,!1),!1)}}},Qe(t,{pluginName:"scroll",initializeByDefault:!0})}function yn(){_e.forEach(function(t){clearInterval(t.pid)}),_e=[]}function Wo(){clearInterval(Ut)}var Gn=Rs(function(t,e,n,o){if(!!e.scroll){var s=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,r=e.scrollSpeed,l=Ge(),c=!1,u;io!==n&&(io=n,yn(),Ft=e.scroll,u=e.scrollFn,Ft===!0&&(Ft=lt(n,!0)));var d=0,h=Ft;do{var f=h,v=xe(f),y=v.top,w=v.bottom,C=v.left,b=v.right,I=v.width,F=v.height,H=void 0,V=void 0,N=f.scrollWidth,D=f.scrollHeight,R=Y(f),$=f.scrollLeft,j=f.scrollTop;f===l?(H=I<N&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),V=F<D&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(H=I<N&&(R.overflowX==="auto"||R.overflowX==="scroll"),V=F<D&&(R.overflowY==="auto"||R.overflowY==="scroll"));var T=H&&(Math.abs(b-s)<=i&&$+I<N)-(Math.abs(C-s)<=i&&!!$),X=V&&(Math.abs(w-a)<=i&&j+F<D)-(Math.abs(y-a)<=i&&!!j);if(!_e[d])for(var z=0;z<=d;z++)_e[z]||(_e[z]={});(_e[d].vx!=T||_e[d].vy!=X||_e[d].el!==f)&&(_e[d].el=f,_e[d].vx=T,_e[d].vy=X,clearInterval(_e[d].pid),(T!=0||X!=0)&&(c=!0,_e[d].pid=setInterval(function(){o&&this.layer===0&&G.active._onTouchMove(In);var U=_e[this.layer].vy?_e[this.layer].vy*r:0,W=_e[this.layer].vx?_e[this.layer].vx*r:0;typeof u=="function"&&u.call(G.dragged.parentNode[Ae],W,U,t,In,_e[this.layer].el)!=="continue"||Ns(_e[this.layer].el,W,U)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&h!==l&&(h=lt(h,!1)));ro=c}},30),Ws=function(e){var n=e.originalEvent,o=e.putSortable,s=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(!!n){var c=o||a;r();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(i("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function wo(){}wo.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=Mt(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:Ws};Qe(wo,{pluginName:"revertOnSpill"});function Eo(){}Eo.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,s=o||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:Ws};Qe(Eo,{pluginName:"removeOnSpill"});G.mount(new Fr);G.mount(Eo,wo);const Ur=["id","value","onClick"],zr={class:"icon"},Br={class:"info"},Hr={class:"name"},Wr={class:"operation"},Vr=ee({__name:"index",props:{originExtIds:null,hasOpeningExtension:{type:Boolean},currentCategory:null},emits:["openExtension","starExtension"],setup(t,{expose:e,emit:n}){const o=t,s=E(null);async function a(b,I){n("openExtension",b),s.value=b,!(I!=null&&I.silentReport)&&(r(b),Re.capture("OpenExtension",{extensionId:b,from:"curatedCards"}))}const i=xt();ce(()=>i.path,async b=>{b.includes("extension")||(s.value=null)});const r=async b=>{const I=await gt(b);!I||(K.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:I.id,eventValue:1}),K.sendGAPageView(I.id))},l=E([]),c=E(null);ce(()=>o.originExtIds,async b=>{if(!b||b.length<=0){c.value=[];return}const I=await ds(b);if(c.value=await Os(I),o.currentCategory){const F=await Z.getExtIdsOfCategoryLeaf(o.currentCategory);if(F.length<=0)return;const H=[];for(let N=0;N<F.length;N++){const D=c.value.find(R=>R.id===F[N]);D&&H.push(D)}const V=c.value.filter(N=>!F.includes(N.id));c.value=[...H,...V]}},{immediate:!0}),ce(s,async(b,I)=>{if(b!==null&&I==null){await u();const F=l.value.find(H=>H.getAttribute("value")===b);F==null||F.scrollIntoView({block:"center"})}});const u=()=>new Promise(b=>{const I=setInterval(()=>{c.value&&c.value.length>0&&l.value&&l.value.length>0&&l.value.length===c.value.length&&(clearInterval(I),b(!0))},100)}),d=async b=>{if(!c.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");const I=c.value.findIndex(F=>F.id===b);if(I>=0){const F=!c.value[I].isStarred;F?(await Z.favoriteExtension(b),o.currentCategory&&f(b,!0),K.sendGAEvent({category:"Extension",action:"Star Extension",eventLabel:b,eventValue:1}),Re.capture("StarExtension",{extensionsId:b})):(Z.unFavoriteExtension(b),K.sendGAEvent({category:"Extension",action:"Cancel Star Extension",eventLabel:b,eventValue:1}),Re.capture("CancelStarExtension",{extensionsId:b})),c.value[I].isStarred=F,mt(),n("starExtension",b,F)}},h=E(!1);async function f(b,I){if(!c.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");h.value=!0,await Fe();const F=c.value.findIndex(H=>H.id===b);if(F>0){const[H]=c.value.splice(F,1);await Fe(),c.value.splice(0,0,H);const V=c.value.map(D=>D.id);Z.setExtIdsOfCategoryLeaf({key:o.currentCategory,nextExtIds:V}),await Fe(),h.value=!1;const N=l.value.find(D=>D.getAttribute("value")===b);N==null||N.scrollIntoView({block:"center"}),I||mt()}}const v=E(null);function y(b){v.value=b}function w(){v.value=null}pe(()=>{if(!o.currentCategory)return;const b=document.getElementById("extension-curated-cards-wrapper");b!=null&&new G(b,{animation:150,dragClass:"sortable-drag",handle:".card-wrapper",sort:!0,onEnd:I=>{const{newIndex:F,oldIndex:H}=I;if(F===void 0||H===void 0||F===H||c.value===null)return;const[V]=c.value.splice(H,1);c.value.splice(F,0,V);const N=c.value.map(D=>D.id);Z.setExtIdsOfCategoryLeaf({key:o.currentCategory,nextExtIds:N}),mt()}})});const C=E(null);return Z.getCategoryTree().then(b=>{C.value=b}),e({openExtension:a}),Ca(()=>{}),(b,I)=>{const F=k("a-button"),H=k("a-menu-item"),V=k("a-menu"),N=k("a-dropdown");return _(),L("div",{id:"extension-curated-cards-wrapper",class:ae({"extension-curated-cards-wrapper":!0,active:s.value!==null})},[p(us,{name:"list",css:h.value},{default:g(()=>[(_(!0),L(be,null,Ke(c.value,(D,R)=>(_(),L("div",{key:D.id},[x("div",{id:D.id,ref_for:!0,ref_key:"cardEleRefs",ref:l,value:D.id,class:ae({"card-wrapper":!0,active:s.value!==null&&D.id===s.value}),onClick:$=>a(D.id)},[x("div",zr,[C.value?(_(),A(m(Zt),{key:0,icon:m(An)(D.category[0],C.value)},null,8,["icon"])):B("",!0)]),x("div",Br,[x("div",Hr,S(b.$t(`extension.${D.id}.name`)),1)]),x("div",Wr,[p(F,{type:"text",class:"star",shape:"circle",onClick:Ie($=>d(D.id),["stop"])},{icon:g(()=>[D.isStarred?(_(),A(m(ka),{key:0})):(_(),A(m(Sa),{key:1}))]),_:2},1032,["onClick"]),o.hasOpeningExtension?B("",!0):(_(),A(N,{key:0},{overlay:g(()=>[p(V,null,{default:g(()=>[o.currentCategory&&R!==0?(_(),A(H,{key:0,onClick:$=>f(D.id)},{default:g(()=>[p(m($a)),P(" "+S(b.$t("curatedCards.settings.upToTop")),1)]),_:2},1032,["onClick"])):B("",!0),p(H,{onClick:$=>y(D.id)},{default:g(()=>[p(m(Ia)),P(" "+S(b.$t("curatedCards.settings.editCategory")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:g(()=>[p(F,{size:"small",type:"text",shape:"circle"},{default:g(()=>[p(m(Ta),{class:"handle"})]),_:1})]),_:2},1024))])],10,Ur)]))),128))]),_:1},8,["css"]),p(hr,{"ext-id":v.value,onAfterClose:w},null,8,["ext-id"])],2)}}});const Tt=oe(Vr,[["__scopeId","data-v-feb49d8a"]]),jr={class:"categorized-extensions-wrapper"},Kr=ee({__name:"index",props:{currentCategory:{default:"all"},specificActiveExtensionId:null},setup(t){const e=t;On();const n=xt(),o=E([]),s=E(!1),a=l=>{s.value!==l&&(s.value=l)};ce(()=>n.path,i,{immediate:!0});function i(){n.path.includes("extension")?a(!0):a(!1)}ce(()=>e.currentCategory,async l=>{o.value=await Is(l),de.exports.isEmpty(o.value)&&e.specificActiveExtensionId&&(o.value=[e.specificActiveExtensionId]),i()},{immediate:!0});const r=E();return ce(()=>e.specificActiveExtensionId,async l=>{var c;l&&(await Fe(),(c=r.value)==null||c.openExtension(l,{silentReport:!0}))},{immediate:!0}),(l,c)=>(_(),L("div",jr,[p(Tt,{ref_key:"curatedCardsRef",ref:r,"origin-ext-ids":o.value,class:ae(["extensions-card"]),"has-opening-extension":s.value,"current-category":t.currentCategory,onOpenExtension:c[0]||(c[0]=u=>l.$emit("openExtension",u))},null,8,["origin-ext-ids","has-opening-extension","current-category"])]))}});const Gr=oe(Kr,[["__scopeId","data-v-e0ff8079"]]),Yr=ee({__name:"TabLikeHeader",props:{titleColor:null,bottomLineColor:null},setup(t){const e=t;return(n,o)=>{var s;return _(),L("div",{class:"tab-like-header-wrapper",style:hs({color:`${(s=e.titleColor)!=null?s:"var(--opposite-color)"}`})},[x("div",null,[Kt(n.$slots,"icon",{},void 0,!0),Kt(n.$slots,"default",{},void 0,!0)])],4)}}});const rn=oe(Yr,[["__scopeId","data-v-8ee3859d"]]);function et(t){return Array.isArray?Array.isArray(t):Ks(t)==="[object Array]"}const Xr=1/0;function qr(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Xr?"-0":e}function Zr(t){return t==null?"":qr(t)}function je(t){return typeof t=="string"}function Vs(t){return typeof t=="number"}function Jr(t){return t===!0||t===!1||Qr(t)&&Ks(t)=="[object Boolean]"}function js(t){return typeof t=="object"}function Qr(t){return js(t)&&t!==null}function Me(t){return t!=null}function Yn(t){return!t.trim().length}function Ks(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const el="Incorrect 'index' type",tl=t=>`Invalid value for key ${t}`,nl=t=>`Pattern length exceeds max of ${t}.`,ol=t=>`Missing ${t} property in key`,sl=t=>`Property 'weight' in key '${t}' must be a positive integer`,Vo=Object.prototype.hasOwnProperty;class al{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(o=>{let s=Gs(o);n+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(o=>{o.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Gs(t){let e=null,n=null,o=null,s=1,a=null;if(je(t)||et(t))o=t,e=jo(t),n=lo(t);else{if(!Vo.call(t,"name"))throw new Error(ol("name"));const i=t.name;if(o=i,Vo.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(sl(i));e=jo(i),n=lo(i),a=t.getFn}return{path:e,id:n,weight:s,src:o,getFn:a}}function jo(t){return et(t)?t:t.split(".")}function lo(t){return et(t)?t.join("."):t}function il(t,e){let n=[],o=!1;const s=(a,i,r)=>{if(!!Me(a))if(!i[r])n.push(a);else{let l=i[r];const c=a[l];if(!Me(c))return;if(r===i.length-1&&(je(c)||Vs(c)||Jr(c)))n.push(Zr(c));else if(et(c)){o=!0;for(let u=0,d=c.length;u<d;u+=1)s(c[u],i,r+1)}else i.length&&s(c,i,r+1)}};return s(t,je(e)?e.split("."):e,0),o?n:n[0]}const rl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ll={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},cl={location:0,threshold:.6,distance:100},ul={useExtendedSearch:!1,getFn:il,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var J={...ll,...rl,...cl,...ul};const dl=/[^ ]+/g;function hl(t=1,e=3){const n=new Map,o=Math.pow(10,e);return{get(s){const a=s.match(dl).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*t),r=parseFloat(Math.round(i*o)/o);return n.set(a,r),r},clear(){n.clear()}}}class Co{constructor({getFn:e=J.getFn,fieldNormWeight:n=J.fieldNormWeight}={}){this.norm=hl(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,o)=>{this._keysMap[n.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,je(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();je(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,o=this.size();n<o;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Me(e)||Yn(e))return;let o={v:e,i:n,n:this.norm.get(e)};this.records.push(o)}_addObject(e,n){let o={i:n,$:{}};this.keys.forEach((s,a)=>{let i=s.getFn?s.getFn(e):this.getFn(e,s.path);if(!!Me(i)){if(et(i)){let r=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:c,value:u}=l.pop();if(!!Me(u))if(je(u)&&!Yn(u)){let d={v:u,i:c,n:this.norm.get(u)};r.push(d)}else et(u)&&u.forEach((d,h)=>{l.push({nestedArrIndex:h,value:d})})}o.$[a]=r}else if(je(i)&&!Yn(i)){let r={v:i,n:this.norm.get(i)};o.$[a]=r}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function Ys(t,e,{getFn:n=J.getFn,fieldNormWeight:o=J.fieldNormWeight}={}){const s=new Co({getFn:n,fieldNormWeight:o});return s.setKeys(t.map(Gs)),s.setSources(e),s.create(),s}function pl(t,{getFn:e=J.getFn,fieldNormWeight:n=J.fieldNormWeight}={}){const{keys:o,records:s}=t,a=new Co({getFn:e,fieldNormWeight:n});return a.setKeys(o),a.setIndexRecords(s),a}function ln(t,{errors:e=0,currentLocation:n=0,expectedLocation:o=0,distance:s=J.distance,ignoreLocation:a=J.ignoreLocation}={}){const i=e/t.length;if(a)return i;const r=Math.abs(o-n);return s?i+r/s:r?1:i}function fl(t=[],e=J.minMatchCharLength){let n=[],o=-1,s=-1,a=0;for(let i=t.length;a<i;a+=1){let r=t[a];r&&o===-1?o=a:!r&&o!==-1&&(s=a-1,s-o+1>=e&&n.push([o,s]),o=-1)}return t[a-1]&&a-o>=e&&n.push([o,a-1]),n}const ft=32;function gl(t,e,n,{location:o=J.location,distance:s=J.distance,threshold:a=J.threshold,findAllMatches:i=J.findAllMatches,minMatchCharLength:r=J.minMatchCharLength,includeMatches:l=J.includeMatches,ignoreLocation:c=J.ignoreLocation}={}){if(e.length>ft)throw new Error(nl(ft));const u=e.length,d=t.length,h=Math.max(0,Math.min(o,d));let f=a,v=h;const y=r>1||l,w=y?Array(d):[];let C;for(;(C=t.indexOf(e,v))>-1;){let N=ln(e,{currentLocation:C,expectedLocation:h,distance:s,ignoreLocation:c});if(f=Math.min(N,f),v=C+u,y){let D=0;for(;D<u;)w[C+D]=1,D+=1}}v=-1;let b=[],I=1,F=u+d;const H=1<<u-1;for(let N=0;N<u;N+=1){let D=0,R=F;for(;D<R;)ln(e,{errors:N,currentLocation:h+R,expectedLocation:h,distance:s,ignoreLocation:c})<=f?D=R:F=R,R=Math.floor((F-D)/2+D);F=R;let $=Math.max(1,h-R+1),j=i?d:Math.min(h+R,d)+u,T=Array(j+2);T[j+1]=(1<<N)-1;for(let z=j;z>=$;z-=1){let U=z-1,W=n[t.charAt(U)];if(y&&(w[U]=+!!W),T[z]=(T[z+1]<<1|1)&W,N&&(T[z]|=(b[z+1]|b[z])<<1|1|b[z+1]),T[z]&H&&(I=ln(e,{errors:N,currentLocation:U,expectedLocation:h,distance:s,ignoreLocation:c}),I<=f)){if(f=I,v=U,v<=h)break;$=Math.max(1,2*h-v)}}if(ln(e,{errors:N+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:c})>f)break;b=T}const V={isMatch:v>=0,score:Math.max(.001,I)};if(y){const N=fl(w,r);N.length?l&&(V.indices=N):V.isMatch=!1}return V}function ml(t){let e={};for(let n=0,o=t.length;n<o;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<o-n-1}return e}class Xs{constructor(e,{location:n=J.location,threshold:o=J.threshold,distance:s=J.distance,includeMatches:a=J.includeMatches,findAllMatches:i=J.findAllMatches,minMatchCharLength:r=J.minMatchCharLength,isCaseSensitive:l=J.isCaseSensitive,ignoreLocation:c=J.ignoreLocation}={}){if(this.options={location:n,threshold:o,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(h,f)=>{this.chunks.push({pattern:h,alphabet:ml(h),startIndex:f})},d=this.pattern.length;if(d>ft){let h=0;const f=d%ft,v=d-f;for(;h<v;)u(this.pattern.substr(h,ft),h),h+=ft;if(f){const y=d-ft;u(this.pattern.substr(y),y)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:o}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let v={isMatch:!0,score:0};return o&&(v.indices=[[0,e.length-1]]),v}const{location:s,distance:a,threshold:i,findAllMatches:r,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:y,startIndex:w})=>{const{isMatch:C,score:b,indices:I}=gl(e,v,y,{location:s+w,distance:a,threshold:i,findAllMatches:r,minMatchCharLength:l,includeMatches:o,ignoreLocation:c});C&&(h=!0),d+=b,C&&I&&(u=[...u,...I])});let f={isMatch:h,score:h?d/this.chunks.length:1};return h&&o&&(f.indices=u),f}}class ut{constructor(e){this.pattern=e}static isMultiMatch(e){return Ko(e,this.multiRegex)}static isSingleMatch(e){return Ko(e,this.singleRegex)}search(){}}function Ko(t,e){const n=t.match(e);return n?n[1]:null}class vl extends ut{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class _l extends ut{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const o=e.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}}class yl extends ut{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class bl extends ut{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class xl extends ut{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class wl extends ut{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class qs extends ut{constructor(e,{location:n=J.location,threshold:o=J.threshold,distance:s=J.distance,includeMatches:a=J.includeMatches,findAllMatches:i=J.findAllMatches,minMatchCharLength:r=J.minMatchCharLength,isCaseSensitive:l=J.isCaseSensitive,ignoreLocation:c=J.ignoreLocation}={}){super(e),this._bitapSearch=new Xs(e,{location:n,threshold:o,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Zs extends ut{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,o;const s=[],a=this.pattern.length;for(;(o=e.indexOf(this.pattern,n))>-1;)n=o+a,s.push([o,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const co=[vl,Zs,yl,bl,wl,xl,_l,qs],Go=co.length,El=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Cl="|";function kl(t,e={}){return t.split(Cl).map(n=>{let o=n.trim().split(El).filter(a=>a&&!!a.trim()),s=[];for(let a=0,i=o.length;a<i;a+=1){const r=o[a];let l=!1,c=-1;for(;!l&&++c<Go;){const u=co[c];let d=u.isMultiMatch(r);d&&(s.push(new u(d,e)),l=!0)}if(!l)for(c=-1;++c<Go;){const u=co[c];let d=u.isSingleMatch(r);if(d){s.push(new u(d,e));break}}}return s})}const Sl=new Set([qs.type,Zs.type]);class $l{constructor(e,{isCaseSensitive:n=J.isCaseSensitive,includeMatches:o=J.includeMatches,minMatchCharLength:s=J.minMatchCharLength,ignoreLocation:a=J.ignoreLocation,findAllMatches:i=J.findAllMatches,location:r=J.location,threshold:l=J.threshold,distance:c=J.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:o,minMatchCharLength:s,findAllMatches:i,ignoreLocation:a,location:r,threshold:l,distance:c},this.pattern=n?e:e.toLowerCase(),this.query=kl(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let a=0,i=[],r=0;for(let l=0,c=n.length;l<c;l+=1){const u=n[l];i.length=0,a=0;for(let d=0,h=u.length;d<h;d+=1){const f=u[d],{isMatch:v,indices:y,score:w}=f.search(e);if(v){if(a+=1,r+=w,o){const C=f.constructor.type;Sl.has(C)?i=[...i,...y]:i.push(y)}}else{r=0,a=0,i.length=0;break}}if(a){let d={isMatch:!0,score:r/a};return o&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const uo=[];function Il(...t){uo.push(...t)}function ho(t,e){for(let n=0,o=uo.length;n<o;n+=1){let s=uo[n];if(s.condition(t,e))return new s(t,e)}return new Xs(t,e)}const Tn={AND:"$and",OR:"$or"},po={PATH:"$path",PATTERN:"$val"},fo=t=>!!(t[Tn.AND]||t[Tn.OR]),Tl=t=>!!t[po.PATH],Ol=t=>!et(t)&&js(t)&&!fo(t),Yo=t=>({[Tn.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Js(t,e,{auto:n=!0}={}){const o=s=>{let a=Object.keys(s);const i=Tl(s);if(!i&&a.length>1&&!fo(s))return o(Yo(s));if(Ol(s)){const l=i?s[po.PATH]:a[0],c=i?s[po.PATTERN]:s[l];if(!je(c))throw new Error(tl(l));const u={keyId:lo(l),pattern:c};return n&&(u.searcher=ho(c,e)),u}let r={children:[],operator:a[0]};return a.forEach(l=>{const c=s[l];et(c)&&c.forEach(u=>{r.children.push(o(u))})}),r};return fo(t)||(t=Yo(t)),o(t)}function Ml(t,{ignoreFieldNorm:e=J.ignoreFieldNorm}){t.forEach(n=>{let o=1;n.matches.forEach(({key:s,norm:a,score:i})=>{const r=s?s.weight:null;o*=Math.pow(i===0&&r?Number.EPSILON:i,(r||1)*(e?1:a))}),n.score=o})}function Al(t,e){const n=t.matches;e.matches=[],Me(n)&&n.forEach(o=>{if(!Me(o.indices)||!o.indices.length)return;const{indices:s,value:a}=o;let i={indices:s,value:a};o.key&&(i.key=o.key.src),o.idx>-1&&(i.refIndex=o.idx),e.matches.push(i)})}function Dl(t,e){e.score=t.score}function Ll(t,e,{includeMatches:n=J.includeMatches,includeScore:o=J.includeScore}={}){const s=[];return n&&s.push(Al),o&&s.push(Dl),t.map(a=>{const{idx:i}=a,r={item:e[i],refIndex:i};return s.length&&s.forEach(l=>{l(a,r)}),r})}class At{constructor(e,n={},o){this.options={...J,...n},this.options.useExtendedSearch,this._keyStore=new al(this.options.keys),this.setCollection(e,o)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Co))throw new Error(el);this._myIndex=n||Ys(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!Me(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let o=0,s=this._docs.length;o<s;o+=1){const a=this._docs[o];e(a,o)&&(this.removeAt(o),o-=1,s-=1,n.push(a))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:o,includeScore:s,shouldSort:a,sortFn:i,ignoreFieldNorm:r}=this.options;let l=je(e)?je(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ml(l,{ignoreFieldNorm:r}),a&&l.sort(i),Vs(n)&&n>-1&&(l=l.slice(0,n)),Ll(l,this._docs,{includeMatches:o,includeScore:s})}_searchStringList(e){const n=ho(e,this.options),{records:o}=this._myIndex,s=[];return o.forEach(({v:a,i,n:r})=>{if(!Me(a))return;const{isMatch:l,score:c,indices:u}=n.searchIn(a);l&&s.push({item:a,idx:i,matches:[{score:c,value:a,norm:r,indices:u}]})}),s}_searchLogical(e){const n=Js(e,this.options),o=(r,l,c)=>{if(!r.children){const{keyId:d,searcher:h}=r,f=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:h});return f&&f.length?[{idx:c,item:l,matches:f}]:[]}const u=[];for(let d=0,h=r.children.length;d<h;d+=1){const f=r.children[d],v=o(f,l,c);if(v.length)u.push(...v);else if(r.operator===Tn.AND)return[]}return u},s=this._myIndex.records,a={},i=[];return s.forEach(({$:r,i:l})=>{if(Me(r)){let c=o(n,r,l);c.length&&(a[l]||(a[l]={idx:l,item:r,matches:[]},i.push(a[l])),c.forEach(({matches:u})=>{a[l].matches.push(...u)}))}}),i}_searchObjectList(e){const n=ho(e,this.options),{keys:o,records:s}=this._myIndex,a=[];return s.forEach(({$:i,i:r})=>{if(!Me(i))return;let l=[];o.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:i[u],searcher:n}))}),l.length&&a.push({idx:r,item:i,matches:l})}),a}_findMatches({key:e,value:n,searcher:o}){if(!Me(n))return[];let s=[];if(et(n))n.forEach(({v:a,i,n:r})=>{if(!Me(a))return;const{isMatch:l,score:c,indices:u}=o.searchIn(a);l&&s.push({score:c,key:e,value:a,idx:i,norm:r,indices:u})});else{const{v:a,n:i}=n,{isMatch:r,score:l,indices:c}=o.searchIn(a);r&&s.push({score:l,key:e,value:a,norm:i,indices:c})}return s}}At.version="6.6.2";At.createIndex=Ys;At.parseIndex=pl;At.config=J;At.parseQuery=Js;Il($l);class Rl{constructor(){O(this,"lastClipboard","");O(this,"updateTime",0);O(this,"guessLangList",[]);O(this,"init",async()=>{setInterval(async()=>{this.updateClipboard()},500)});O(this,"updateClipboard",async()=>{try{const e=await K.readTextFromClipboard();if(e!==""&&e!==this.lastClipboard){const n=await K.guessLang(e);this.updateTime=Date.now(),this.lastClipboard=e,this.guessLangList=n}}catch{console.error("\u83B7\u53D6\u526A\u5207\u677F\u5F02\u5E38")}});this.init()}async updateLastClipboard(){await this.updateClipboard()}getLastClipboard(){return this.lastClipboard}getLastClipboardLangList(){return this.guessLangList}getUpdateTime(){return this.updateTime}isUpdateTimeLessThanMin(e){return Date.now()-this.getUpdateTime()<e*6e4}isEmpty(){return this.lastClipboard===""}isLengthExceedsMegabyteSize(e){return this.lastClipboard.length>e<<20}}const ct=new Rl,Dt=0,bt=1e3;function Nl(t,e){var n;return Oa(((n=t.match(/^[1-5][0-9]{2}$/))==null?void 0:n[0])||"")&&e.id==="http-code"?bt:Dt}function Pl(t,e){return Ma(t||"")&&e.id==="port-cheat-sheet"?bt:Dt}function Fl(t,e){var n;return Aa(((n=t.match(/^\.[2-8a-z]{0,7}/))==null?void 0:n[0])||"")&&e.id==="mime-type-cheat-sheet"?bt:Dt}function Ul(t,e){const n=Number(t==null?void 0:t.match(/[0-9]{1,6}/))||0,o=(t==null?void 0:t.search(/\d/))||0,s=t==null?void 0:t.slice(o+(n==null?void 0:n.toString().length));return Da(s)&&e.id==="unit-conversion"?bt:Dt}function zl(t,e){return La(t||"")&&e.id==="chmod-calculator"?bt:Dt}function Bl(t,e){switch(t=t.trim().toLowerCase(),t){case"diff":if(e.id==="text-diff")return bt;break;case"yaml":case"yml":if(e.id==="yaml-to-pretty")return bt;break}return Dt}const Hl=[Nl,Fl,Pl,Ul,zl,Bl],Xo=new Map([["aes256",[["aes-encryption",1e3],["aes-decryption",900]]],["aes192",[["aes-encryption",1e3],["aes-decryption",900]]],["aes128",[["aes-encryption",1e3],["aes-decryption",900]]]]),Wl=new Map([["json",[["json-to-pretty",1e3],["json-to-yaml",900],["json-diff",800],["json-to-minify",700],["json-to-merge",600]]],["yaml",[["yaml-to-pretty",1e3],["yaml-to-json",900],["yaml-diff",800],["yaml-viewer",700],["yaml-to-minify",600]]]]);class Vl{constructor(){O(this,"originExtensions",[]);O(this,"originExtensionsMap",new Map);O(this,"extensions",[])}async create(){this.originExtensions=await _o();const e=wn();return this.originExtensions.forEach(n=>{this.originExtensionsMap.set(n.id,n);const o=de.exports.get(wt,[e,"extension",n.id,"name"]),s=de.exports.get(wt,["en","extension",n.id,"name"]),a=de.exports.get(wt,[e,"extension",n.id,"keywords"]),i=de.exports.get(wt,["en","extension",n.id,"keywords"]),r=de.exports.get(wt,[e,n.id,"description"]),l=de.exports.get(wt,["en",n.id,"description"]),c={id:n.id,name:{current:o||"",en:s||""},description:{current:r||"",en:l||""},keywords:{current:Array.isArray(a)?a:[],en:Array.isArray(i)?i:[]},grade:0};this.extensions.push(c)}),this}}class Qs extends Vl{constructor(){super(...arguments);O(this,"searchValue","");O(this,"rawValue","");O(this,"searchMap",new Map)}setSearchValue(n){return this.rawValue=n,this.searchValue=n.toLocaleLowerCase(),n.split(" ").forEach(o=>this.searchMap.set(o,"")),this}isSkipSearch(){return this.searchValue===""&&this.searchMap.size===0}hookFn(){return this.extensions.forEach(n=>{Hl.forEach(o=>{const s=o(this.rawValue,de.exports.cloneDeep(n));s>0&&ze(n,s)})}),this}matchWeightsMap(){if(!Xo.has(this.searchValue))return this;const n=Xo.get(this.searchValue);if(Array.isArray(n)){const o=new Map;n.forEach(s=>{o.set(s[0],s[1])}),this.extensions.forEach(s=>{const a=o.get(s.id);a&&ze(s,a)})}return this}matchName(){if(this.isSkipSearch())return this;const n=this.searchValue.split(" ")[0];return this.extensions.forEach(o=>{const s=o.name[St.EN].toLocaleLowerCase(),a=o.name.current.toLocaleLowerCase();this.searchValue===s||this.searchValue===a?ze(o,100):s.startsWith(this.searchValue)||a.startsWith(this.searchValue)?ze(o,this.searchValue.length*2):(s.startsWith(n)||a.startsWith(n))&&ze(o,n.length*2)}),this}matchKeyword(){return this.isSkipSearch()?this:(this.extensions.forEach(n=>{const o=new Map;n.keywords[St.EN].forEach((a,i)=>o.set(a.toLocaleLowerCase(),i));const s=n.keywords.current;Array.isArray(s)&&n.keywords.current.forEach((a,i)=>{o.has(a)||o.set(a.toLocaleLowerCase(),i)}),this.searchMap.forEach((a,i)=>{const r=o.get(i);if(r!==void 0&&r<100)ze(n,500-r*5);else{let l=0;o.forEach((c,u)=>{u.startsWith(i)?l<i.length&&c<100&&(l=i.length*5+(400-c*4)):u.includes(i)&&l<i.length&&c<100&&(l=i.length*2+(300-c*3))}),l>0&&ze(n,l)}})}),this)}fuzzMatchExtensions(){if(this.isSkipSearch())return this;const n=this.extensions,o={includeScore:!0,threshold:.4,keys:[{name:"name",weight:10,getFn:r=>[r.name[St.EN],r.name.current]},{name:"keywords",weight:6,getFn:r=>[r.keywords[St.EN],r.keywords.current]},{name:"id",weight:3}]},a=new At(n,o).search(this.searchValue),i=a.length;return a.forEach((r,l)=>{const c=r.item;ze(c,i-l)}),this}done(){const n=this.extensions.filter(s=>s.grade>0).sort((s,a)=>a.grade-s.grade),o=new Array(n.length);for(let s=0;s<o.length;s++)o[s]=this.originExtensionsMap.get(n[s].id);return o}}async function jl(t){return typeof t!="string"||t===""?[]:(t=t.trim(),t.length===0?[]:(await new Qs().create()).setSearchValue(t).hookFn().matchWeightsMap().matchName().matchKeyword().fuzzMatchExtensions().done())}function ze(t,e){t.grade===void 0?t.grade=e:t.grade+=e}class Kl extends Qs{constructor(){super(...arguments);O(this,"idMap",new Map)}setMap(n,o){return this.searchMap=n,this.idMap=o,this}doneAll(){let n=this.extensions.filter(s=>s.grade>0).sort((s,a)=>a.grade-s.grade);n.forEach(s=>{s.matchBy!=="id"&&(s.matchBy="key")}),n=n.splice(0,4);const o=[];return n.forEach(s=>{const a=this.originExtensionsMap.get(s.id);a&&s.matchBy&&o.push({extension:a,matchBy:s.matchBy})}),o}matchWeightsMap(){return this.searchMap.forEach((n,o)=>{const s=Wl.get(o);if(Array.isArray(s)){const a=new Map;s.forEach(i=>{a.set(i[0],i[1])}),this.extensions.forEach(i=>{const r=a.get(i.id);r&&ze(i,r)})}}),this}matchID(){return this.extensions.forEach(n=>{this.idMap.has(n.id)&&(n.matchBy="id",ze(n,1<<20))}),this}preFilter(){return this.searchMap.has("json")&&(this.extensions=this.extensions.filter(n=>this.searchMap.has("json")&&!this.searchMap.has("yaml")&&n.name[St.EN].toLocaleLowerCase().startsWith("yaml")?!1:!(!this.searchMap.has("json")&&this.searchMap.has("yaml")&&n.name[St.EN].toLocaleLowerCase().startsWith("json")))),this}}let Xn={dateCategorizer:new ps(""),extensions:[]};async function ko(){const t=new ps(""),e={dateCategorizer:t,extensions:[]};if(ct.isEmpty()||!ct.isUpdateTimeLessThanMin(1)||ct.isLengthExceedsMegabyteSize(1))return e;const n=ct.getLastClipboard();if(Xn.dateCategorizer.getRaw()===n)return Xn;await t.setRaw(n).analyzeCategory();const o=await new Kl().create();return o.setMap(t.getSearchKeyMap(),t.getSearchIDMap()),e.extensions=o.preFilter().matchWeightsMap().matchID().matchKeyword().doneAll(),Xn=e,e}var q=(t=>(t.RECENTLY_USED="Recently Used",t.MOST_USED="Most Used",t.RECOMMENDED="Recommended",t.STARRED="Starred",t))(q||{});async function se(t,e){const n=[];let o=null;switch(e){case"Recently Used":o=await Z.getRecentlyUsedExtensionStateList(12);break;case"Most Used":o=await Z.getMostUsedExtensionStateList(12);break;case"Recommended":return(await ko()).extensions.map(i=>i.extension);case"Starred":return(await Z.getExtIdsOfCategoryLeaf(yt.STAR)).map(i=>{const r=t.find(l=>l.id===i);r!==void 0&&n.push(de.exports.cloneDeep(r))}),n}return o==null||o.map(s=>{const a=t.find(i=>i.id===s.id);a!==void 0&&n.push(de.exports.cloneDeep(a))}),n}const Gl={class:ae(["home-extensions-wrapper"])},Yl={key:0,class:ae({"personal-extensions-wrap":!0})},Xl={key:0,id:"recommendedExtensions",class:"home-section"},ql={key:1,class:"home-section"},Zl={key:2,class:"home-section"},Jl={key:1,class:"starred-extensions-wrap home-section"},Ql=ee({__name:"index",setup(t){const{t:e}=Ue(),n=On(),o=xt(),s=E(null),a=E(null);se(te,q.RECENTLY_USED).then(y=>{a.value=y.map(w=>w.id)});const i=E(null);se(te,q.MOST_USED).then(y=>{i.value=y.map(w=>w.id)});const r=E(null);se(te,q.RECOMMENDED).then(y=>{r.value=y.map(w=>w.id)});const l=E(null);se(te,q.STARRED).then(y=>{l.value=y.map(w=>w.id)}),ce(()=>o.path,()=>{o.path.includes("extension")?s.value=o.path.split("/")[2]:s.value=null},{immediate:!0});const c=(y,w)=>{if(u.value!==null)switch(u.value){case q.RECENTLY_USED:se(te,q.RECENTLY_USED).then(C=>{a.value=C.map(b=>b.id)});break;case q.MOST_USED:se(te,q.MOST_USED).then(C=>{i.value=C.map(b=>b.id)});break;case q.STARRED:s.value!==null&&s.value===y&&f(),se(te,q.STARRED).then(C=>{l.value=C.map(b=>b.id)});break}else se(te,q.STARRED).then(C=>{l.value=C.map(b=>b.id)}),se(te,q.RECENTLY_USED).then(C=>{a.value=C.map(b=>b.id)}),se(te,q.MOST_USED).then(C=>{i.value=C.map(b=>b.id)}),se(te,q.RECOMMENDED).then(C=>{r.value=C.map(b=>b.id)})},u=E(null),d=E(!1),h=y=>{d.value!==y&&(d.value=y)},f=()=>{s.value=null,u.value=null,h(!1),se(te,q.STARRED).then(y=>{l.value=y.map(w=>w.id)}),se(te,q.RECENTLY_USED).then(y=>{a.value=y.map(w=>w.id)}),se(te,q.MOST_USED).then(y=>{i.value=y.map(w=>w.id)}),se(te,q.RECOMMENDED).then(y=>{r.value=y.map(w=>w.id)}),n.push("/")};let v=null;return ce(s,y=>{y!==null?v&&(clearInterval(v),v=null):v=setInterval(()=>{se(te,q.RECOMMENDED).then(w=>{w.length>0&&(r.value=w.map(C=>C.id))})},1e3)},{immediate:!0}),Xt(()=>{v&&clearTimeout(v)}),(y,w)=>{const C=k("a-empty");return _(),L("div",Gl,[a.value!==null||i.value!==null||r.value!==null?(_(),L("div",Yl,[r.value!==null&&r.value.length>0?(_(),L("div",Xl,[p(rn,null,{default:g(()=>[P(S(m(e)("homeExtensions.recommended")),1)]),_:1}),p(Tt,{"origin-ext-ids":r.value,class:ae(["recommended-used-wrap","curated-cards"]),"has-opening-extension":!1,onOpenExtension:w[0]||(w[0]=b=>y.$emit("openExtension",b,{home:m(q).RECOMMENDED})),onStarExtension:c},null,8,["origin-ext-ids"])])):B("",!0),a.value!==null?(_(),L("div",ql,[p(rn,null,{default:g(()=>[P(S(m(e)("homeExtensions.recently-used")),1)]),_:1}),a.value.length>0?(_(),A(Tt,{key:0,"origin-ext-ids":a.value,class:ae(["recently-used-wrap","curated-cards"]),"active-id":s.value==null?void 0:s.value,"has-opening-extension":!1,onOpenExtension:w[1]||(w[1]=b=>y.$emit("openExtension",b,{home:m(q).RECENTLY_USED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),A(C,{key:1,image:m(pn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:g(()=>[x("div",null,S(y.$t("homeExtensions.recentlyUsedEmpty")),1)]),_:1},8,["image"]))])):B("",!0),i.value!==null?(_(),L("div",Zl,[p(rn,{class:"header"},{default:g(()=>[P(S(m(e)("homeExtensions.most-used")),1)]),_:1}),i.value.length!==null&&i.value.length>0?(_(),A(Tt,{key:0,"origin-ext-ids":i.value,class:ae(["most-used-wrap","curated-cards"]),"active-id":s.value==null?void 0:s.value,"has-opening-extension":!1,onOpenExtension:w[2]||(w[2]=b=>y.$emit("openExtension",b,{home:m(q).MOST_USED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),A(C,{key:1,image:m(pn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:g(()=>[x("div",null,S(y.$t("homeExtensions.mostUsedEmpty")),1)]),_:1},8,["image"]))])):B("",!0)])):B("",!0),l.value!==null?(_(),L("div",Jl,[p(rn,null,{default:g(()=>[P(S(m(e)("homeExtensions.star")),1)]),_:1}),l.value.length>0?(_(),A(Tt,{key:0,"origin-ext-ids":l.value,class:ae(["starred-used-wrap","curated-cards"]),"active-id":s.value==null?void 0:s.value,"has-opening-extension":!1,onOpenExtension:w[3]||(w[3]=b=>y.$emit("openExtension",b,{home:m(q).STARRED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),A(C,{key:1,image:m(pn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:g(()=>[x("div",null,S(y.$t("homeExtensions.starEmpty")),1)]),_:1},8,["image"]))])):B("",!0)])}}});const ec=oe(Ql,[["__scopeId","data-v-058ef2bd"]]),So="current_active_extension";function tc(t){localStorage.setItem(So,t)}function nc(){return localStorage.getItem(So)}function oc(){localStorage.removeItem(So)}const sc={set:tc,get:nc,remove:oc},ac=t=>(tt("data-v-2e5a1b52"),t=t(),nt(),t),ic={class:"active-extension-wrapper"},rc={class:"operation"},lc={class:"title"},cc={class:"name"},uc=ac(()=>x("span",{class:"desc"},null,-1)),dc={class:"alert"},hc={id:"extensionError"},pc={class:"extension-region"},fc=ee({__name:"index",emits:["closeExtension"],setup(t){const{t:e}=qt(),n=xt(),o=Ra(),s=E(),a=E(""),i=E(new $t(""));ce(()=>n.path,async()=>{var l;if(a.value="",n.path.includes("extension")){i.value=new $t((l=ct.getLastClipboard())!=null?l:"",ct.getLastClipboardLangList());const c=de.exports.last(n.path.split("/")),u=await gt(c);u&&(s.value=u,Z.refreshExtensionUseState(u==null?void 0:u.id),sc.set(u==null?void 0:u.id))}else s.value=null},{immediate:!0});function r(l){setTimeout(()=>{a.value=l||e("home.clipboardAutoFill"),setTimeout(()=>{a.value=""},4e3)},100)}return Na(l=>{if(!Fa()){const c=document.getElementById("extensionError");c.style.display="block",yo()||setTimeout(()=>{location.href=location.href.split("#")[0]},3e3)}}),(l,c)=>{var v,y;const u=k("a-skeleton-input"),d=k("a-button"),h=k("a-spin"),f=k("router-view");return _(),L("div",ic,[x("div",rc,[x("div",lc,[x("div",cc,[m(o).$state.loading||!((v=s.value)!=null&&v.id)?(_(),A(u,{key:0,style:{width:"200px"},size:"small",active:""})):(_(),L(be,{key:1},[P(S(l.$t(`extension.${(y=s.value)==null?void 0:y.id}.name`)),1)],64))]),uc]),p(En,{name:"alert"},{default:g(()=>[x("div",dc,[a.value?(_(),A(d,{key:0,class:"aha",size:"small"},{default:g(()=>[p(m(Pa),{circled:""}),P(" "+S(a.value),1)]),_:1})):B("",!0)])]),_:1}),Kt(l.$slots,"option",{},void 0,!0),Kt(l.$slots,"collapse",{},void 0,!0)]),x("div",hc,S(l.$t("home.extensionError")),1),x("div",pc,[m(o).$state.loading?(_(),A(h,{key:0,delay:100,spinning:"",class:"spinning",size:"large"})):B("",!0),s.value?(_(),A(f,{key:1},{default:g(({Component:w,route:C})=>[p(En,{name:"route"},{default:g(()=>[(_(),A(_t(w),{key:C.path,"clipboard-value":i.value,class:"extension-wrapper",onAcceptClipboardCb:r},null,40,["clipboard-value"]))]),_:2},1024)]),_:1})):B("",!0)])])}}});const gc=oe(fc,[["__scopeId","data-v-2e5a1b52"]]),mc=["id"],vc={class:"name"},_c={key:1,style:{display:"inline","padding-left":"15px"}},yc=ee({__name:"CuratedItem",props:{hydratedExtConfig:null,isActive:{type:Boolean},collectOption:null},emits:["openExtension"],setup(t,{expose:e,emit:n}){async function o(i,r){n("openExtension",i),!(r!=null&&r.silentReport)&&(s(i),Re.capture("OpenExtension",{extensionId:i,from:"curatedCards"}))}const s=async i=>{const r=await gt(i);!r||(K.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:r.id,eventValue:1}),K.sendGAPageView(r.id))},a=E(null);return Z.getCategoryTree().then(i=>{a.value=i}),e({openExtension:o}),(i,r)=>(_(),L("div",{id:t.hydratedExtConfig.id,class:ae({"card-wrapper":!0,active:t.isActive}),onClick:r[0]||(r[0]=()=>o(t.hydratedExtConfig.id))},[x("div",vc,[a.value?(_(),A(m(Zt),{key:0,icon:m(An)(t.hydratedExtConfig.category[0],a.value)},null,8,["icon"])):(_(),L("div",_c)),P(" "+S(i.$t(`extension.${t.hydratedExtConfig.id}.name`)),1)])],10,mc))}});const qo=oe(yc,[["__scopeId","data-v-4eaa53a9"]]),bc=["value"],xc=ee({__name:"CuratedList",props:{originExtIds:null,currentExtId:null,currentCategory:null,collectible:{type:Boolean}},emits:["openExtension","starExtension"],setup(t,{emit:e}){const n=t,o=E([]),s=E(),a=E(null);ce(()=>n.originExtIds,async d=>{if(!d||d.length<=0){a.value=[];return}const h=await ds(d);if(a.value=await Os(h),n.currentCategory){const f=await Z.getExtIdsOfCategoryLeaf(n.currentCategory);if(f.length<=0)return;const v=[];for(let w=0;w<f.length;w++){const C=a.value.find(b=>b.id===f[w]);C&&v.push(C)}const y=a.value.filter(w=>!f.includes(w.id));a.value=[...v,...y]}r(n.currentExtId)},{immediate:!0});const i=()=>new Promise(d=>{const h=setInterval(()=>{a.value&&a.value.length>0&&o.value&&o.value.length>0&&o.value.length===a.value.length&&a.value.find(f=>f.id===o.value[0].getAttribute("value"))&&(clearInterval(h),d(!0))},100)}),r=d=>{const h=o.value.find(f=>f.getAttribute("value")===d);h==null||h.scrollIntoView({block:"center"})};ce(()=>n.currentExtId,async(d,h)=>{d!==h&&(await i(),r(d))},{immediate:!0});const l=async d=>{if(!a.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");const h=a.value.findIndex(f=>f.id===d);if(h>=0){const f=!a.value[h].isStarred;f?(await Z.favoriteExtension(d),n.currentCategory&&u(d),K.sendGAEvent({category:"Extension",action:"Star Extension",eventLabel:d,eventValue:1}),Re.capture("StarExtension",{extensionsId:d})):(Z.unFavoriteExtension(d),K.sendGAEvent({category:"Extension",action:"Cancel Star Extension",eventLabel:d,eventValue:1}),Re.capture("CancelStarExtension",{extensionsId:d})),a.value[h].isStarred=f,e("starExtension",d,f)}},c=E(!1);async function u(d){if(!a.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");c.value=!0,await Fe();const h=a.value.findIndex(f=>f.id===d);if(h>0){const[f]=a.value.splice(h,1);await Fe(),a.value.splice(0,0,f);const v=a.value.map(w=>w.id);Z.setExtIdsOfCategoryLeaf({key:n.currentCategory,nextExtIds:v}),await Fe(),c.value=!1;const y=o.value.find(w=>w.getAttribute("value")===d);y==null||y.scrollIntoView({block:"center"})}}return pe(()=>{if(!n.currentCategory)return;const d=s.value;d!=null&&new G(d,{animation:150,dragClass:"sortable-drag",handle:".card-wrapper",sort:!0,onEnd:h=>{const{newIndex:f,oldIndex:v}=h;if(f===void 0||v===void 0||f===v||a.value===null)return;const[y]=a.value.splice(v,1);a.value.splice(f,0,y);const w=a.value.map(C=>C.id);Z.setExtIdsOfCategoryLeaf({key:n.currentCategory,nextExtIds:w})}})}),(d,h)=>(_(),L("div",{id:"extension-curated-cards-wrapper",ref_key:"cardListRef",ref:s,class:"extension-curated-cards-wrapper"},[p(us,{name:"list",css:c.value},{default:g(()=>[(_(!0),L(be,null,Ke(a.value,f=>(_(),L("div",{key:f.id},[t.collectible?(_(),L("div",{key:0,ref_for:!0,ref_key:"cardEleRefs",ref:o,"class-name":"card-wrapper",value:f.id},[p(qo,{"hydrated-ext-config":f,"is-active":f.id===t.currentExtId,"collect-option":{starExtension:l,isStarred:f.isStarred||!1},onOpenExtension:h[0]||(h[0]=v=>d.$emit("openExtension",v))},null,8,["hydrated-ext-config","is-active","collect-option"])],8,bc)):(_(),A(qo,{key:1,"hydrated-ext-config":f,"is-active":f.id===t.currentExtId,onOpenExtension:h[1]||(h[1]=v=>d.$emit("openExtension",v))},null,8,["hydrated-ext-config","is-active"]))]))),128))]),_:1},8,["css"])],512))}});const Zo=oe(xc,[["__scopeId","data-v-c24eb81b"]]),wc={class:"title"},Ec={class:"content"},Cc={class:"title"},kc={class:"content"},Sc={class:"title"},$c={style:{"margin-left":"4px"}},Ic={class:"content"},Tc=ee({__name:"RightBarView",props:{currentExtConfig:null,categoryData:null},emits:["openExtension"],setup(t,{emit:e}){const n=E(["context","info","related"]),o=E(Boolean(window.innerWidth>900)),{t:s}=Ue(),a=De();ce(o,()=>{a.$patch({userSetInfoFlag:!1})}),Mn(()=>{i()}),pe(()=>{fs(window,"resize",i)});function i(){window.innerWidth>900?o.value=!0:o.value=!1,a.userSetInfoFlag||(window.innerWidth>900?a.isInfoCollapsed&&a.$patch({isInfoCollapsed:!1}):a.isInfoCollapsed||a.$patch({isInfoCollapsed:!0}))}const r=l=>{e("openExtension",l,{related:!0})};return(l,c)=>{const u=k("a-collapse-panel"),d=k("a-typography-text"),h=k("a-space"),f=k("a-collapse");return _(),L("div",{class:ae({"right-bar":!0,collapsed:m(a).isInfoCollapsed})},[t.currentExtConfig?(_(),A(f,{key:0,activeKey:n.value,"onUpdate:activeKey":c[1]||(c[1]=v=>n.value=v),ghost:"","open-animation":{},"expand-icon-position":"right"},{expandIcon:g(({isActive:v})=>[p(m(sr),{type:v?"bottom":"right"},null,8,["type"])]),default:g(()=>{var v,y,w;return[((v=t.categoryData)==null?void 0:v.showCategorizedExtIds.length)&&!t.categoryData.isNoCategory?(_(),A(u,{id:"context-extensions",key:"context",class:"info-card"},{header:g(()=>[x("div",wc,[t.categoryData.categoryIcon?(_(),A(m(Zt),{key:0,icon:t.categoryData.categoryIcon},null,8,["icon"])):(_(),A(m(To),{key:1,style:{opacity:0}})),P(" "+S(t.categoryData.categoryName),1)])]),default:g(()=>{var C;return[x("div",Ec,[p(Zo,{"current-ext-id":(C=t.currentExtConfig)==null?void 0:C.id,"origin-ext-ids":t.categoryData.showCategorizedExtIds||[],class:ae(["extensions-card","active-extension"]),collectible:!0,"current-category":t.categoryData.currentCategory,onOpenExtension:c[0]||(c[0]=b=>l.$emit("openExtension",b))},null,8,["current-ext-id","origin-ext-ids","current-category"])])]}),_:1})):B("",!0),((y=t.currentExtConfig)==null?void 0:y.related_extensions)&&((w=t.currentExtConfig)==null?void 0:w.related_extensions.length)>0?(_(),A(u,{id:"related-extensions",key:"related",class:"info-card"},{header:g(()=>[x("div",Cc,[p(m(Ua)),P(" "+S(m(s)("extensionsView.related")),1)])]),default:g(()=>{var C;return[x("div",kc,[p(Zo,{"origin-ext-ids":(C=t.currentExtConfig)==null?void 0:C.related_extensions,class:ae(["extensions-card","active-extension"]),onOpenExtension:r},null,8,["origin-ext-ids"])])]}),_:1})):B("",!0),(_(),A(u,{id:"extension-info",key:"info",class:"info-card"},{header:g(()=>[x("div",Sc,[p(m(To)),x("span",$c,S(m(s)("extensionsView.details")),1)])]),default:g(()=>[x("div",Ic,[p(h,{direction:"vertical"},{default:g(()=>{var C,b;return[p(d,{type:"secondary"},{default:g(()=>{var I;return[P(S(l.$t(`extension.${(I=t.currentExtConfig)==null?void 0:I.id}.description`)),1)]}),_:1}),p(d,{type:"secondary"},{default:g(()=>{var I,F;return[P(S(m(s)("extensionsView.label.category"))+" "+S((I=t.categoryData)!=null&&I.isNoCategory?"\u65E0":(F=t.currentExtConfig)==null?void 0:F.category.map(H=>l.$t(`category.${H}.label`)).join(",")),1)]}),_:1}),(C=t.currentExtConfig)!=null&&C.stage?(_(),A(d,{key:0,type:"secondary"},{default:g(()=>{var I;return[P(S(m(s)("extensionsView.label.stage"))+" "+S((I=t.currentExtConfig)==null?void 0:I.stage),1)]}),_:1})):B("",!0),p(d,{type:"secondary"},{default:g(()=>{var I;return[P(S(m(s)("extensionsView.label.author"))+" "+S(((I=t.currentExtConfig)==null?void 0:I.author)||"He3"),1)]}),_:1}),(b=t.currentExtConfig)!=null&&b.released?(_(),A(d,{key:1,type:"secondary"},{default:g(()=>{var I;return[P(S(m(s)("extensionsView.label.releaseTime"))+" "+S((I=t.currentExtConfig)==null?void 0:I.released),1)]}),_:1})):B("",!0)]}),_:1})])]),_:1}))]}),_:1},8,["activeKey"])):B("",!0)],2)}}});const Oc=oe(Tc,[["__scopeId","data-v-912d36a4"]]),Mc=ee({__name:"index",props:{currentCategory:{default:"all"},homeExtType:null},emits:["openExtension"],setup(t,{emit:e}){const n=t,{t:o}=Ue(),s=xt(),a=E({currentCategory:n.currentCategory,showCategorizedExtIds:[],categoryIcon:"",categoryName:"",isNoCategory:!1}),i=E(),r=E(),l=(u,d)=>{e("openExtension",u,d?{related:d.related}:null)},c=()=>{var h;const{currentCategory:u,homeExtType:d}=n;if(i.value){const f=i.value.filter(v=>v.key===n.currentCategory)[0];if(f!=null&&f.icon)a.value.categoryIcon=f.icon;else{a.value.isNoCategory=!0;return}}u==="home"&&d?a.value.categoryName=o(`homeExtensions.${d.toLowerCase().replace(" ","-").replace("starred","star")}`):u.split("_")[0]==="custom"?a.value.categoryName=(h=i.value)==null?void 0:h.filter(f=>f.key===n.currentCategory)[0].name:a.value.categoryName=o(`category.${u}.label`),a.value.isNoCategory&&(a.value.isNoCategory=!1)};return ce(()=>s.path,async(u,d)=>{if(u===d)return;const h=s.path.split("/");h[1]==="extension"&&(r.value=te.find(f=>f.id===h[2]))},{immediate:!0}),ce(()=>n.currentCategory,async(u,d)=>{var h;if(u!==d){switch(a.value.categoryIcon="",n.currentCategory){case"home":if(n.homeExtType){se(te,n.homeExtType||q.MOST_USED).then(f=>{a.value.showCategorizedExtIds=f.map(v=>v.id)});break}case"star":{se(te,q.STARRED).then(f=>{a.value.showCategorizedExtIds=f.map(v=>v.id)});break}default:a.value.showCategorizedExtIds=await Is(n.currentCategory||((h=r.value)==null?void 0:h.category[0])||"");break}i.value&&c()}},{immediate:!0}),ce(()=>n.homeExtType,(u,d)=>{u!==d&&n.currentCategory==="home"&&(se(te,n.homeExtType||q.MOST_USED).then(h=>{a.value.showCategorizedExtIds=h.map(f=>f.id)}),c())}),pe(()=>{$s().then(u=>{i.value=u,c()})}),(u,d)=>(_(),A(Oc,{"current-ext-config":r.value,"category-data":a.value,onOpenExtension:l},null,8,["current-ext-config","category-data"]))}}),Ac={class:"extension-view"},Dc=ee({__name:"index",props:{currentCategory:null,homeExtType:null},emits:["openExtension"],setup(t,{emit:e}){const n=De(),o=(a,i)=>{e("openExtension",a,i?{related:i.related}:null)},s=()=>{n.$patch({isInfoCollapsed:!n.isInfoCollapsed,userSetInfoFlag:!0})};return(a,i)=>{const r=k("a-button");return _(),L("div",Ac,[x("div",{class:ae({"extension-section":!0,collapsed:m(n).isInfoCollapsed})},[p(gc,{class:"active-extension-wrap"},{collapse:g(()=>[p(r,{style:{width:"18px",height:"18px"},type:"text",size:"small",onClick:s},{icon:g(()=>[p(m(Zi),{width:"18px","is-fill":!m(n).isInfoCollapsed},null,8,["is-fill"])]),_:1})]),_:1})],2),p(Mc,{"current-category":t.currentCategory,"home-ext-type":t.homeExtType,onOpenExtension:o},null,8,["current-category","home-ext-type"])])}}});const Lc=oe(Dc,[["__scopeId","data-v-8e0a7433"]]),go={16:"Shift",18:"Option",17:"Ctrl",91:"Command"};za()||(go[18]="Alt",go[91]="Win");const qe=go,ea={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"},Rc=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ta={};let Jo=65;Rc.forEach(t=>{ta[Jo]=t,Jo++});const na=ta,oa={};let Qo=112;for(let t=1;t<=12;t++)oa[Qo]="F"+t,Qo++;const $o=oa,sa={189:"-",187:"=",219:"[",220:"\\",221:"]",186:";",222:"'",188:",",190:".",191:"/",192:"`",32:"Space"},Rt={...sa,...na,...$o,...ea,...qe};function es(t){const e={...sa,...na,...ea};return Boolean(e[t])}function Nc(t,e){if(t.length===0){ne.error(He.global.t("preferences.err1"));return}if(t.length===1&&!$o[t[0]]){ne.error(He.global.t("preferences.err2"));return}if(t.length===2){if(es([t[0]])&&es([t[1]])){ne.error(He.global.t("preferences.err3")+"Command\u3001Ctrl\u3001Shift\u3001Option");return}if(qe[t[0]]&&qe[t[1]]){ne.error(He.global.t("preferences.err4"));return}}if(t.length===3){if(de.exports.compact([qe[t[0]],qe[t[1]],qe[t[2]]]).length<2){ne.error(He.global.t("preferences.err6")+"Command\u3001Ctrl\u3001Shift\u3001Option");return}if(qe[t[0]]&&qe[t[1]]&&qe[t[2]]){ne.error(He.global.t("preferences.err4"));return}}e()}function jt(t){try{Ba.confirm({title:He.global.t("preferences.confirmTitle"),content:He.global.t("preferences.confirmContent"),okText:He.global.t("preferences.reloadNow"),cancelText:He.global.t("preferences.reloadLater"),class:"preferences-reload-modal",onOk(){return new Promise(()=>{location.reload()})},okButtonProps:{id:"preferences-reload-modal-ok-btn"},onCancel(){t&&t()}})}catch(e){console.error(e),t&&t()}}const Pc={class:"preferences-general-wrapper"},Fc={class:"changeShortCut"},Uc={key:1},zc={key:2},Bc={key:3},Hc={class:"autoFocus"},Wc=ee({__name:"index",setup(t){const{t:e}=qt(),n=E([{value:"light",label:e("preferences.light")},{value:"dark",label:e("preferences.dark")},{value:"system",label:e("preferences.system")}]),o=E(wn()),s=E(!1),a=E([18,32]),i=E([]),r=E(),l=E(!1),c=E(Ha()),u=E(null),d=E(gs());De();function h(R){u.value=R,K.changeShortcut(R?hn(a.value):[])}function f(R){K.setAutoStart(R)}function v(){Ya(c.value)}function y(R){Xa(R),jt()}pe(()=>{K.getShortCut().then(R=>{de.exports.isEmpty(R)?u.value=!1:(u.value=!0,a.value=[...R])}),K.isAutoStart().then(R=>{l.value=R})});const w=Oo(()=>{let R="";return a.value.map(($,j)=>{Rt[$]&&(R+=Rt[$]+" + ")}),R.slice(0,R.length-2)}),C=Oo(()=>{let R="";return i.value.map(($,j)=>{Rt[$]&&(R+=Rt[$]+" + ")}),R.slice(0,R.length-2)}),b=E(!1),I=()=>{b.value=!0},F=()=>{b.value=!1};function H(R){let $=R.keyCode;if($===13){b.value||D();return}if($===8){i.value.pop();return}if(!i.value.includes($)&&!!Rt[$]){if($o[$]){i.value=[$];return}i.value.length===3&&i.value.shift(),i.value.push($)}}function V(){s.value=!0,Fe(()=>{var R;(R=r==null?void 0:r.value)==null||R.focus()})}function N(){s.value=!1}function D(){Nc(hn(i.value),async()=>{s.value=!1,await K.changeShortcut(u.value?hn(i.value):[])?ne.success(e("preferences.err")):(a.value=i.value,s.value=!1)})}return(R,$)=>{const j=k("a-select"),T=k("a-form-item"),X=k("a-switch"),z=k("a-col"),U=k("a-input"),W=k("a-button"),me=k("a-row"),ve=k("a-radio-group"),we=k("a-form");return _(),L("div",Pc,[p(we,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:g(()=>[p(T,{label:m(e)("preferences.language")},{default:g(()=>[p(j,{value:o.value,"onUpdate:value":$[0]||($[0]=ie=>o.value=ie),options:m(Wa),onChange:y},null,8,["value","options"])]),_:1},8,["label"]),p(T,{label:m(e)("preferences.shortcut")},{default:g(()=>[p(X,{id:"setShortCut",checked:u.value,"onUpdate:checked":$[1]||($[1]=ie=>u.value=ie),disabled:s.value,onChange:h,size:"small"},null,8,["checked","disabled"])]),_:1},8,["label"]),u.value?(_(),A(me,{key:0,class:"changeShortCutWrapper"},{default:g(()=>[p(z,{span:"8"}),p(z,{span:"14",class:"col"},{default:g(()=>[x("div",Fc,[s.value?(_(),A(U,{key:0,ref_key:"inputRef",ref:r,class:"shortCut",value:m(C),onKeydown:[H,Ve(Ie(m(de.exports.noop),["prevent"]),["left"]),Ve(Ie(m(de.exports.noop),["prevent"]),["right"]),Ve(Ie(m(de.exports.noop),["prevent"]),["up"]),Ve(Ie(m(de.exports.noop),["prevent"]),["down"])],onCompositionstart:I,onCompositionend:F},null,8,["value","onKeydown"])):(_(),L("span",Uc,S(m(w)),1)),s.value?(_(),L("div",Bc,[p(W,{shape:"circle",class:"rightBtn",onClick:N},{icon:g(()=>[p(m(ja))]),_:1}),p(W,{id:"confirm-change-hotkey-button",shape:"circle",class:"rightBtn",type:"primary",onClick:D},{icon:g(()=>[p(m(Ka))]),_:1})])):(_(),L("div",zc,[p(W,{id:"change-hotkey-button",shape:"circle",class:"rightBtn",onClick:V},{icon:g(()=>[p(m(Va))]),_:1})]))])]),_:1}),p(z,{span:"8"}),p(z,{span:"14",class:"col",style:{"margin-top":"10px"}},{default:g(()=>[x("div",Hc,[x("span",null,S(m(e)("preferences.shortcutAutoFocus")),1),p(X,{checked:d.value,"onUpdate:checked":$[2]||($[2]=ie=>d.value=ie),onChange:$[3]||($[3]=ie=>m(Ga)(ie)),size:"small"},null,8,["checked"])])]),_:1})]),_:1})):B("",!0),p(T,{label:m(e)("preferences.autostart")},{default:g(()=>[p(X,{checked:l.value,"onUpdate:checked":$[4]||($[4]=ie=>l.value=ie),onChange:f,size:"small"},null,8,["checked"])]),_:1},8,["label"]),p(T,{label:m(e)("preferences.theme")},{default:g(()=>[p(ve,{value:c.value,"onUpdate:value":$[5]||($[5]=ie=>c.value=ie),options:n.value,onChange:v},null,8,["value","options"])]),_:1},8,["label"])]),_:1})])}}});const Vc=oe(Wc,[["__scopeId","data-v-5c14ba6f"]]),jc={class:"preferences-categories-wrapper"},Kc={key:0,class:"modification-hint"},Gc=ee({__name:"index",setup(t){De();const{t:e}=Ue(),n=E(null),o=E(!1);E(!0);const s=E(!1);let a;const i=()=>{location.reload()};Mn(()=>{Z.getCategoryTree().then(T=>{a=JSON.parse(JSON.stringify(T)),n.value=T}).catch(T=>{console.error(T),n.value=[]})});const r=E(!1);ce(()=>n,(T,X)=>{r.value=!c(T.value,a)},{deep:!0});const l=T=>T.map(X=>(Object.keys(X).forEach(z=>{X[z]===!1&&z==="disabled"&&delete X[z]}),X)),c=(T,X)=>JSON.stringify(l(T))===JSON.stringify(l(X)),u=E(!1);async function d(){u.value=!0,n.value=await Z.getPresetCategoryTree(),u.value=!1}const h=[{title:"",key:"drag",width:50},{title:e("preferencesCategories.name"),dataIndex:"key",key:"key",align:"center"},{title:e("preferencesCategories.icon"),dataIndex:"icon",key:"icon",align:"center"},{title:e("preferencesCategories.enabled"),key:"enabled",align:"center"},{title:e("preferencesCategories.action"),key:"action",align:"center"}],f=E(!1),v=T=>{T!==f.value&&(f.value=T)},y=E("add"),w=xn({key:"",name:"",icon:""}),C=xn({name:[{required:!0,message:e("preferencesCategories.form.name")}],icon:[{required:!0,message:e("preferencesCategories.form.icon")}]}),{resetFields:b,validate:I,validateInfos:F}=cs(w,C);function H(){I().then(T=>{switch(y.value){case"add":n.value.push({key:"custom_"+Date.now(),icon:T.icon,name:T.name,type:"custom"});break;case"edit":const X=n.value.findIndex(z=>z.key===w.key);if(X===-1){ne.error(e("preferencesCategories.noExist"));return}n.value[X]={...n.value[X],icon:T.icon,name:T.name,type:"custom"};break}v(!1),b()}).catch(T=>{})}function V(T){if(!n.value.find(z=>z.key===T)){ne.error(e("preferencesCategories.noExist"));return}n.value=n.value.filter(z=>z.key!==T)}function N(){v(!1),b()}function D(T,X){const z=n.value.findIndex(U=>U.key===X);if(z<0){ne.error(e("preferencesCategories.noExist"));return}n.value[z].disabled=!T}function R(T,X){if(y.value=T,v(!0),T==="edit"&&X){const z=n.value.find(U=>U.key===X);if(!z){ne.error(e("preferencesCategories.noExist"));return}w.icon=z.icon,w.key=z.key,z.type&&z.type==="custom"?w.name=z.name:w.name=e(`category.${z.key}.label`)}}function $(T){w.icon=T}pe(()=>{const T=document.querySelector("#category-table tbody");T!==null&&new G(T,{animation:150,handle:".handle",ghostClass:"blue-background-class",sort:!0,onEnd:X=>{const{newIndex:z,oldIndex:U}=X;if(z===void 0||U===void 0||z===U)return;const W=z-1,me=U-1,[ve]=n.value.splice(me,1);n.value.splice(W,0,ve)}})});async function j(){try{await Z.updateCategoryTree(de.exports.cloneDeep(n.value)),mt(),jt(()=>{o.value=!0,r.value=!1,s.value=!0,a=de.exports.cloneDeep(n.value)})}catch(T){console.error(T),ne.error(e("preferencesCategories.form.error.update"))}}return(T,X)=>{const z=k("a-button"),U=k("a-popconfirm"),W=k("a-space"),me=k("a-typography-text"),ve=k("a-row"),we=k("a-switch"),ie=k("a-divider"),en=k("a-table"),Rn=k("a-input"),Io=k("a-form-item"),ma=k("a-card"),va=k("a-form"),_a=k("a-modal"),ya=k("a-spin");return _(),A(ya,{spinning:u.value,delay:100},{default:g(()=>[x("div",jc,[p(ve,null,{default:g(()=>[p(W,{style:{"margin-bottom":"10px"}},{default:g(()=>[p(z,{id:"add-categories",type:"primary",size:"small",onClick:X[0]||(X[0]=st=>R("add"))},{icon:g(()=>[p(m(qa))]),default:g(()=>[P(" "+S(T.$t("common.add")),1)]),_:1}),p(U,{title:T.$t("preferencesCategories.reset.title"),"ok-text":T.$t("common.confirm"),"ok-button-props":{id:"preferences-categories-reset-ok-btn"},"cancel-text":T.$t("common.cancel"),onConfirm:d},{default:g(()=>[p(z,{id:"reset-catagories-button",size:"small",danger:""},{icon:g(()=>[p(m(Za))]),default:g(()=>[P(" "+S(T.$t("common.reset")),1)]),_:1})]),_:1},8,["title","ok-text","cancel-text"])]),_:1}),p(W,{class:"apply-space"},{default:g(()=>[r.value?(_(),L("div",Kc,[p(me,{type:"warning"},{default:g(()=>[P(S(T.$t("common.modified")),1)]),_:1})])):B("",!0),r.value?(_(),A(z,{key:1,id:"apply-categories-button",size:"small",type:"primary",onClick:j},{icon:g(()=>[p(m(Ja))]),default:g(()=>[P(" "+S(T.$t("common.apply")),1)]),_:1})):B("",!0),s.value?(_(),A(z,{key:2,size:"small",type:"primary",onClick:i},{icon:g(()=>[p(m(Qa))]),default:g(()=>[P(" "+S(m(e)("preferencesCategories.config.reload")),1)]),_:1})):B("",!0)]),_:1})]),_:1}),p(en,{id:"category-table",columns:h,size:"small","data-source":n.value,pagination:{pageSize:999,hideOnSinglePage:!0},scroll:{y:"calc(100vh - 280px)"}},{bodyCell:g(({column:st,record:Ne})=>[st.key==="drag"?(_(),A(m(ei),{key:0,style:{cursor:"grab"},class:"handle"})):B("",!0),st.key==="key"?(_(),L(be,{key:1},[P(S(!Ne.type||Ne.type==="preset"?T.$t(`category.${Ne.key}.label`):Ne.name),1)],64)):st.key==="icon"?(_(),A(_t(m(bn)(Ne.icon)),{key:2})):st.key==="enabled"?(_(),A(we,{key:3,checked:!Ne.disabled,size:"small",onClick:Nn=>D(Nn,Ne.key)},null,8,["checked","onClick"])):st.key==="action"?(_(),L(be,{key:4},[p(z,{type:"link",size:"small",onClick:Nn=>R("edit",Ne.key)},{default:g(()=>[P(S(T.$t("common.edit")),1)]),_:2},1032,["onClick"]),Ne.key!==m(yt).STAR&&Ne.key!==m(yt).ALL?(_(),L(be,{key:0},[p(ie,{type:"vertical"}),p(U,{title:T.$t("preferencesCategories.del.title"),"ok-text":T.$t("common.confirm"),"cancel-text":T.$t("common.cancel"),"ok-button-props":{id:"preferences-categories-ok-btn"},onConfirm:Nn=>V(Ne.key)},{default:g(()=>[p(z,{type:"link",size:"small",danger:""},{default:g(()=>[P(S(T.$t("common.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):B("",!0)],64)):B("",!0)]),_:1},8,["data-source","scroll"]),p(_a,{title:T.$t(`common.${y.value}`)+T.$t("preferences.category"),visible:f.value,"destroy-on-close":"","ok-button-props":{id:"preferences-categories-modal-ok-btn"},onOk:H,onCancel:N},{default:g(()=>[p(va,null,{default:g(()=>[p(Io,no({label:T.$t("preferencesCategories.name"),"has-feedback":"",name:"name",required:""},m(F).name),{default:g(()=>[p(Rn,{value:w.name,"onUpdate:value":X[1]||(X[1]=st=>w.name=st)},null,8,["value"])]),_:1},16,["label"]),p(Io,no({label:T.$t("preferencesCategories.icon"),required:"","has-feedback":"",name:"icon"},m(F).icon),{default:g(()=>[p(W,null,{default:g(()=>[p(ma,{class:"preview-icon"},{default:g(()=>[(_(),A(_t(m(bn)(w.icon))))]),_:1}),p(m(Bi),{onChosenIcon:$},{default:g(()=>[p(z,{id:"chosen-icon-button"},{default:g(()=>[P(S(T.$t("common.select")),1)]),_:1})]),_:1})]),_:1})]),_:1},16,["label"])]),_:1})]),_:1},8,["title","visible"])])]),_:1},8,["spinning"])}}});const Yc=oe(Gc,[["__scopeId","data-v-db44f5ae"]]),aa=t=>(tt("data-v-5f56b9e3"),t=t(),nt(),t),Xc={class:"login-wrapper"},qc=aa(()=>x("div",{class:"desc"},"Login By Github",-1)),Zc=aa(()=>x("div",{class:"desc"},"Login By Google",-1)),Jc={class:"login-by-email"},Qc=ee({__name:"index",props:{visible:{type:Boolean}},emits:["modalShow"],setup(t,{emit:e}){const{t:n}=Ue(),o=E({email:""});function s(){K.openBrowser(`${Mo}${oi}`)}function a(){K.openBrowser(`${Mo}${si}`)}const i=l=>{let{email:c}=l;bo.post(ai,{email:c}).then(u=>{ne.success(n("home.login.sendEmailSuccess"))})};function r(l){}return(l,c)=>{const u=k("a-divider"),d=k("a-input"),h=k("a-form-item"),f=k("a-button"),v=k("a-form"),y=k("a-modal");return _(),A(y,{visible:l.$props.visible,"onUpdate:visible":c[1]||(c[1]=w=>l.$props.visible=w),title:l.$t("home.login.loginTitle"),onCancel:c[2]||(c[2]=w=>l.$emit("modalShow"))},{default:g(()=>[x("div",Xc,[x("div",{class:"github-login",onClick:a},[p(m(ti),{style:{"font-size":"30px"},class:"icon"}),qc]),x("div",{class:"google-login",onClick:s},[p(m(ni),{style:{"font-size":"30px"},class:"icon"}),Zc]),p(u,null,{default:g(()=>[P(S(l.$t("home.login.loginByEmail")),1)]),_:1}),x("div",Jc,[p(v,{model:o.value,name:"basic","label-col":{span:6},"wrapper-col":{span:20},autocomplete:"off",onFinish:i,onFinishFailed:r},{default:g(()=>[p(h,{label:"Email",name:"email",rules:[{required:!0,message:l.$t("home.login.inputEmail")},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:l.$t("home.login.inputCurrentEmail")}]},{default:g(()=>[p(d,{value:o.value.email,"onUpdate:value":c[0]||(c[0]=w=>o.value.email=w)},null,8,["value"])]),_:1},8,["rules"]),p(h,{"wrapper-col":{offset:6,span:20}},{default:g(()=>[p(f,{type:"primary","html-type":"submit"},{default:g(()=>[P(S(l.$t("home.login.emailSubmit")),1)]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["visible","title"])}}});const eu=oe(Qc,[["__scopeId","data-v-5f56b9e3"]]),tu={class:"account-wrapper"},nu={key:0},ou={key:1,style:{marginBottom:"0px"}},su={style:{"font-size":"12px"}},au={class:"login-btn"},iu=ee({__name:"index",props:{activeKey:null},setup(t,{expose:e}){const n=t,{t:o}=qt(),s=De(),a=E(""),i=E(""),r=E(!1);function l($){$===!0?(r.value=!1,Z.setAutoSync(!1),ci().then(j=>{switch(w.value="success",j.type){case tn.REMOTE:ne.success(o("preferencesCategories.config.setSuccess"));break;case tn.LOCAL:ne.success(o("account.category.updateSuccess")),j.diff.catDiff.length&&jt();break;case tn.DIFF:y.value=Lt(j.remote.remoteUpdateTime).format("LLL"),h.value=!0,w.value="info";return;case tn.NULL:break}Z.getCategoryTime().then(T=>{T&&(j.local.localUpdateTime!==T&&Z.setCategoryTime(),v.value=Lt(T).format("LLL"))}),r.value=!0,Z.setAutoSync(!0)}).catch(j=>{ne.error(o("account.category.updateError")),r.value=!1,Z.setAutoSync(!1)})):(r.value=$,s.$patch({syncDiff:!1}),Z.setAutoSync($))}const c=E(!1),u=E(!1),d=E(!1),h=E(!1),f=E("local"),v=E(""),y=E(""),w=E(),C=()=>{r.value=!0,Z.setAutoSync(!0),f.value==="local"?mt({handleSuccess:()=>{ne.success(o("preferencesCategories.config.setSuccess")),w.value="success",h.value=!1},handleError:()=>{h.value=!1,r.value=!1,Z.setAutoSync(!1)}}):mt({handleSuccess:()=>{ne.success(o("account.category.updateSuccess")),Z.getCategoryTime().then($=>{$&&(v.value=Lt($).format("LLL"))}),w.value="success",h.value=!1,jt()},handleError:()=>{h.value=!1,r.value=!1,Z.setAutoSync(!1)}})},b=()=>{r.value=!1,s.$patch({syncDiff:!1}),Z.setAutoSync(!1)},I=()=>{ui().then($=>{const{categoryLocal:j,extensionLocal:T}=$;di({categoryTree:j,customExtensionsConfig:T}).then(()=>{w.value="success",ne.success(o("preferencesCategories.config.setSuccess"))}).catch(()=>{ne.error(o("preferencesCategories.config.setError"))})})},F=()=>{hi().then($=>{const{categoryRemote:j,extensionRemote:T}=$;pi({categoryTree:j,customExtensionsConfig:T}).then(()=>{ne.success(o("account.category.updateSuccess")),Z.getCategoryTime().then(X=>{X&&(v.value=Lt(X).format("LLL"))}),w.value="success",jt()}).catch(()=>{ne.error(o("account.category.updateError"))})}).catch($=>{ne.error(o("account.category.updateError"))})};pe(()=>{s.nickname.length>0&&(a.value=s.nickname,i.value=s.nickname),s.$subscribe(($,j)=>{if($.type==="patch object"){const T=j.nickname;T.length>0&&(a.value=T,i.value=T)}},{detached:!1})}),ii(()=>{n.activeKey==="5"&&K.getLoginToken().then($=>{$&&H()})}),Mn(()=>{H()});const H=()=>{s.token&&(Z.getCategoryTime().then($=>{$&&(v.value=Lt($).format("LLL"))}),ms().then($=>{$?w.value="info":w.value="success"}).catch($=>{ne.error($.message),$.code==="ERR_NETWORK"&&(l(!1),w.value="error")}),Z.getAutoSync().then($=>{r.value=$}))};async function V(){if(i.value===a.value||i.value.length===0){c.value=!1,i.value=a.value,ne.warn("\u4FEE\u6539\u5931\u8D25");return}bo.patch(fi,{nickname:i.value}).then($=>{ne.success("\u4FEE\u6539\u6210\u529F"),s.$patch({nickname:i.value}),a.value=i.value}).catch($=>{i.value=a.value,ne.error($)}),c.value=!1}function N(){s.$patch({token:"",nickname:"",email:""}),K.deleteLoginToken(),u.value=!1,i.value="",a.value="",r.value=!1,s.$patch({syncDiff:!1}),Z.setAutoSync(!1),ne.success("\u9000\u51FA\u767B\u5F55\u6210\u529F")}function D(){K.openBrowser(gi)}function R(){i.value=a.value}return e({switchAutoSync:l}),($,j)=>{const T=k("a-form-item"),X=k("a-alert"),z=k("a-button"),U=k("a-space"),W=k("a-switch"),me=k("a-form"),ve=k("a-modal"),we=k("a-checkable-tag");return _(),L("div",tu,[p(me,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:g(()=>[m(s).token?(_(),A(T,{key:0,label:$.$t("account.user")},{default:g(()=>[P(S(i.value),1)]),_:1},8,["label"])):B("",!0),m(s).token?(_(),A(T,{key:1,label:$.$t("account.settingSync")},{default:g(()=>[m(s).token?(_(),L("div",nu,[w.value?(_(),A(X,{key:0,message:$.$t(`account.category.settingAlert.${w.value}`),type:w.value,"show-icon":""},null,8,["message","type"])):B("",!0),v.value?(_(),L("p",ou,[x("span",su,S(`${$.$t("account.category.latestUpdate")} ${v.value}`),1)])):B("",!0)])):B("",!0),vs(p(U,{style:{marginTop:"5px"}},{default:g(()=>[p(z,{size:"small",onClick:F},{icon:g(()=>[p(m(ri))]),default:g(()=>[P(" "+S($.$t("preferencesCategories.config.sync")),1)]),_:1}),p(z,{size:"small",onClick:I},{icon:g(()=>[p(m(li))]),default:g(()=>[P(" "+S($.$t("preferencesCategories.config.upload")),1)]),_:1})]),_:1},512),[[_s,w.value==="info"||w.value==="error"]])]),_:1},8,["label"])):B("",!0),m(s).token?(_(),A(T,{key:2,label:$.$t("account.category.autoSync")},{default:g(()=>[p(W,{checked:r.value,"onUpdate:checked":j[0]||(j[0]=ie=>r.value=ie),"checked-children":$.$t("account.open"),"un-checked-children":$.$t("account.close"),disabled:!m(s).token,style:{margin:"5px 0"},onChange:l},null,8,["checked","checked-children","un-checked-children","disabled"]),r.value?(_(),A(X,{key:0,size:"small",message:$.$t("account.category.autoSyncAlert"),type:"info","show-icon":""},null,8,["message"])):B("",!0)]),_:1},8,["label"])):B("",!0),x("div",au,[m(s).token?(_(),A(z,{key:0,danger:"",size:"large",onClick:j[1]||(j[1]=()=>{u.value=!0})},{default:g(()=>[P(S($.$t("home.login.logout")),1)]),_:1})):B("",!0),m(s).token?B("",!0):(_(),A(z,{key:1,type:"primary",size:"large",onClick:D},{default:g(()=>[P(S($.$t("home.login.loginTitle")),1)]),_:1}))])]),_:1}),p(ve,{visible:c.value,"onUpdate:visible":j[2]||(j[2]=ie=>c.value=ie),title:$.$t("account.changNickname"),onOk:V,onCancel:R},{default:g(()=>[x("p",null,S($.$t("account.changeNicknameConfirm"))+" "+S(i.value),1)]),_:1},8,["visible","title"]),p(ve,{visible:u.value,"onUpdate:visible":j[3]||(j[3]=ie=>u.value=ie),title:$.$t("home.login.logout"),onOk:N},{default:g(()=>[x("p",null,S($.$t("account.logoutConfirm")),1)]),_:1},8,["visible","title"]),m(s).token?B("",!0):(_(),A(eu,{key:0,visible:d.value,onModalShow:j[4]||(j[4]=()=>d.value=!1)},null,8,["visible"])),p(ve,{visible:h.value,"onUpdate:visible":j[7]||(j[7]=ie=>h.value=ie),title:$.$t("account.category.settingAlert.info"),"destroy-on-close":"",onOk:C,onCancel:b},{default:g(()=>[x("p",null,S($.$t("account.category.modelTitle")),1),x("p",null,[P(S($.$t("account.category.updatedTime.local"))+" ",1),p(we,{checked:f.value==="local",onChange:j[5]||(j[5]=()=>{f.value="local"})},{default:g(()=>[P(S(v.value),1)]),_:1},8,["checked"]),f.value==="local"?(_(),A(m(oo),{key:0})):B("",!0)]),x("p",null,[P(S($.$t("account.category.updatedTime.remote"))+" ",1),p(we,{checked:f.value==="remote",onChange:j[6]||(j[6]=()=>{f.value="remote"})},{default:g(()=>[P(S(y.value),1)]),_:1},8,["checked"]),f.value==="remote"?(_(),A(m(oo),{key:0})):B("",!0)])]),_:1},8,["visible","title"])])}}});const ru=oe(iu,[["__scopeId","data-v-b87c8ef6"]]);function lu(){Z.clearCache(),window.localStorage.clear(),window.sessionStorage.clear()}const cu={class:"preferences-advanced-wrapper"},uu={class:"window"},du={style:{width:"200px"}},hu=ee({__name:"index",setup(t){const{t:e}=Ue(),n=E(null);pe(()=>{Z.getWindowsSettings().then(s=>{n.value={rememberPosition:s.position,rememberSize:s.size}}).catch(s=>{console.error(s),ne.error(e("preferencesAdvanced.window.error.failFetch"))})}),ce(n,async(s,a)=>{if(s!==null&&a===null)return;if(n.value===null){ne.error(e("preferencesAdvanced.window.error.failSave")),console.error("window.value is null");return}const i={position:n.value.rememberPosition,size:n.value.rememberSize};Z.setWindowsSettings(i)},{deep:!0});function o(){try{lu(),location.reload(),ne.success(e("preferencesAdvanced.cache.success"))}catch{ne.error(e("preferences.err5"))}}return(s,a)=>{const i=k("a-checkbox"),r=k("a-form-item"),l=k("a-button"),c=k("a-popconfirm"),u=k("a-form");return _(),L("div",cu,[p(u,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:g(()=>[p(r,{label:s.$t("preferencesAdvanced.window.title")},{default:g(()=>[x("div",uu,[n.value===null?(_(),L(be,{key:0},[],64)):(_(),L(be,{key:1},[p(i,{checked:n.value.rememberPosition,"onUpdate:checked":a[0]||(a[0]=d=>n.value.rememberPosition=d)},{default:g(()=>[P(S(s.$t("preferencesAdvanced.window.position.remember")),1)]),_:1},8,["checked"]),p(i,{checked:n.value.rememberSize,"onUpdate:checked":a[1]||(a[1]=d=>n.value.rememberSize=d),style:{"margin-left":"0"}},{default:g(()=>[P(S(s.$t("preferencesAdvanced.window.size.remember")),1)]),_:1},8,["checked"])],64))])]),_:1},8,["label"]),p(r,{label:s.$t("preferencesAdvanced.cache.clear")},{default:g(()=>[p(c,{"ok-text":s.$t("common.confirm"),"cancel-text":s.$t("common.cancel")},{title:g(()=>[x("div",du,S(s.$t("preferencesAdvanced.cache.confirm")),1)]),icon:g(()=>[p(m(mi),{style:{color:"red"}})]),okButton:g(()=>[p(l,{id:"reset-factory-confirm-button",type:"primary",size:"small",danger:"",onClick:o},{default:g(()=>[P(S(s.$t("common.confirm")),1)]),_:1})]),default:g(()=>[p(l,{id:"reset-factory",type:"dashed",danger:""},{default:g(()=>[P(S(s.$t("preferencesAdvanced.cache.desc")),1)]),_:1})]),_:1},8,["ok-text","cancel-text"])]),_:1},8,["label"])]),_:1})])}}});const pu=oe(hu,[["__scopeId","data-v-a67e506d"]]),fu={class:"wrapper"},gu={id:"preferences-tab-general"},mu={id:"preferences-tab-category"},vu={id:"preferences-tab-account"},_u={id:"preferences-tab-advanced"},yu=ee({__name:"index",props:{activeKey:null},setup(t,{expose:e}){const n=t,o=E("1"),s=E();return pe(()=>{n.activeKey&&(o.value=n.activeKey)}),e({switchAutoSync:i=>{var r;(r=s.value)==null||r.switchAutoSync(i)}}),(i,r)=>{const l=k("a-tab-pane"),c=k("a-tabs");return _(),L("div",fu,[p(c,{activeKey:o.value,"onUpdate:activeKey":r[0]||(r[0]=u=>o.value=u),"tab-bar-gutter":"12",class:"tab",type:"card"},{default:g(()=>[p(l,{key:"1"},{tab:g(()=>[x("span",gu,[p(m(vi)),P(" "+S(i.$t("preferences.general")),1)])]),default:g(()=>[p(Vc,{ref:"generalRef"},null,512)]),_:1}),p(l,{key:"2"},{tab:g(()=>[x("span",mu,[p(m(_i)),P(" "+S(i.$t("preferences.category")),1)])]),default:g(()=>[p(Yc,{ref:"categoriesRef"},null,512)]),_:1}),m(yo)()?(_(),A(l,{key:"5"},{tab:g(()=>[x("span",vu,[p(m(yi)),P(" "+S(i.$t("preferences.account")),1)])]),default:g(()=>[p(ru,{ref_key:"accountRef",ref:s,"active-key":o.value},null,8,["active-key"])]),_:1})):B("",!0),p(l,{key:"6"},{tab:g(()=>[x("span",_u,[p(m(bi)),P(" "+S(i.$t("preferences.advanced")),1)])]),default:g(()=>[p(pu,{ref:"advancedRef"},null,512)]),_:1})]),_:1},8,["activeKey"])])}}});const bu=oe(yu,[["__scopeId","data-v-c08cd836"]]),ia=""+new URL("../logo.png",import.meta.url).href,ra=t=>(tt("data-v-4f1616fd"),t=t(),nt(),t),xu={class:"welcomeWrapper"},wu={class:"contentWrap"},Eu={class:"content"},Cu={class:"left"},ku=ra(()=>x("img",{src:ia,alt:""},null,-1)),Su=ra(()=>x("div",{class:"title"},"\u{1F389} Welcome !",-1)),$u={class:"desc"},Iu={class:"right"},Tu={class:"item"},Ou={class:"title"},Mu={class:"hotkey"},Au={class:"desc"},Du={class:"item"},Lu={class:"title"},Ru={class:"hotkey"},Nu={class:"desc"},Pu={class:"item"},Fu={class:"title"},Uu={class:"desc"},zu={class:"bottom"},Bu=ee({__name:"index",props:{close:null},setup(t){const e=t;function n(){e.close(),Fe(()=>{var o;(o=document.querySelector("#home-searchbar-input"))==null||o.focus()})}return(o,s)=>{const a=k("a-button");return _(),L("div",xu,[x("div",wu,[x("div",Eu,[x("div",Cu,[ku,Su,x("div",$u,S(o.$t("home.welcome.welcomeDesc")),1)]),x("div",Iu,[x("div",Tu,[x("div",Ou,[P(S(o.$t("home.welcome.titleOne"))+" ",1),x("span",Mu,S(m(Ao)()),1)]),x("div",Au,S(o.$t("home.welcome.descOne",{v:m(Ao)()})),1)]),x("div",Du,[x("div",Lu,[P(S(o.$t("home.welcome.titleTwo"))+" ",1),x("span",Ru,S(m(Pn)()),1)]),x("div",Nu,S(o.$t("home.welcome.descTwo",{v:m(Pn)()})),1)]),x("div",Pu,[x("div",Fu,S(o.$t("home.welcome.titleThree")),1),x("div",Uu,S(o.$t("home.welcome.descThree")),1)])])]),x("div",zu,[p(a,{size:"large",type:"primary",style:{"margin-right":"60px"},onClick:n},{default:g(()=>[P(S(o.$t("home.welcome.search"))+" ("+S(m(Pn)())+") ",1)]),_:1}),p(a,{id:"welcome-start-button",size:"large",type:"primary",onClick:t.close},{default:g(()=>[P(S(o.$t("home.welcome.start")),1)]),_:1},8,["onClick"])])])])}}});const Hu=oe(Bu,[["__scopeId","data-v-4f1616fd"]]),Wu={class:ae(["home-extensions-wrapper"])},Vu={key:0,class:ae({"starred-extensions-wrap":!0})},ju=ee({__name:"index",setup(t){Ue();const e=On(),n=xt(),o=E(null),s=E(null);se(te,q.RECENTLY_USED).then(d=>{s.value=d.map(h=>h.id)});const a=E(null);se(te,q.MOST_USED).then(d=>{a.value=d.map(h=>h.id)});const i=E(null);se(te,q.RECOMMENDED).then(d=>{i.value=d.map(h=>h.id)});const r=E(null);se(te,q.STARRED).then(d=>{r.value=d.map(h=>h.id)}),ce(()=>n.path,()=>{n.path.includes("extension")?o.value=!0:o.value=null},{immediate:!0});const l=(d,h)=>{if(c.value!==null)switch(c.value){case q.RECENTLY_USED:se(te,q.RECENTLY_USED).then(f=>{s.value=f.map(v=>v.id)});break;case q.MOST_USED:se(te,q.MOST_USED).then(f=>{a.value=f.map(v=>v.id)});break;case q.STARRED:o.value!==null&&o.value.id===d&&u(),se(te,q.STARRED).then(f=>{r.value=f.map(v=>v.id)});break}else se(te,q.STARRED).then(f=>{r.value=f.map(v=>v.id)}),se(te,q.RECENTLY_USED).then(f=>{s.value=f.map(v=>v.id)}),se(te,q.MOST_USED).then(f=>{a.value=f.map(v=>v.id)}),se(te,q.RECOMMENDED).then(f=>{i.value=f.map(v=>v.id)})},c=E(null),u=()=>{o.value=null,c.value=null,se(te,q.STARRED).then(d=>{r.value=d.map(h=>h.id)}),se(te,q.RECENTLY_USED).then(d=>{s.value=d.map(h=>h.id)}),se(te,q.MOST_USED).then(d=>{a.value=d.map(h=>h.id)}),se(te,q.RECOMMENDED).then(d=>{i.value=d.map(h=>h.id)}),e.push("/")};return(d,h)=>{const f=k("a-empty");return _(),L("div",Wu,[r.value!==null?(_(),L("div",Vu,[r.value.length>0?(_(),A(Tt,{key:0,"origin-ext-ids":r.value,class:ae(["starred-used-wrap","curated-cards"]),"active-id":o.value==null?void 0:o.value.id,"has-opening-extension":!1,"current-category":m(yt).STAR,onOpenExtension:h[0]||(h[0]=v=>d.$emit("openExtension",v,m(q).STARRED)),onStarExtension:l},null,8,["origin-ext-ids","active-id","current-category"])):(_(),A(f,{key:1,image:m(pn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:g(()=>[x("div",null,S(d.$t("homeExtensions.starEmpty")),1)]),_:1},8,["image"]))])):B("",!0)])}}});const Ku=oe(ju,[["__scopeId","data-v-e7b408b8"]]),Gu=""+new URL("../pure-color-logo.png",import.meta.url).href,Yu=t=>(tt("data-v-c8e4d73f"),t=t(),nt(),t),Xu={class:ae(["menu-wrapper"])},qu=Yu(()=>x("img",{src:Gu,alt:""},null,-1)),Zu=[qu],Ju=ee({__name:"index",props:{isCollapse:{type:Boolean},selectedMenus:null},emits:["click","openSettings","toggleCollapsed"],setup(t,{emit:e}){const n=De(),o=E(Boolean(window.innerWidth>1e3));ce(o,()=>{n.$patch({userSetSpreadFlag:!1})});function s(){window.innerWidth>1e3?o.value=!0:o.value=!1,n.userSetSpreadFlag||(window.innerWidth>1e3?n.isMenuSpread||n.$patch({isMenuSpread:!0}):n.isMenuSpread&&n.$patch({isMenuSpread:!1}))}pe(()=>{fs(window,"resize",s)}),Mn(()=>{s()});function a(){n.$patch({isMenuSpread:!1,userSetSpreadFlag:!0})}const i=E();$s().then(l=>{i.value=l});const r=l=>{e("click",l)};return(l,c)=>{const u=k("a-menu-item"),d=k("a-menu");return _(),L("div",Xu,[x("div",{class:ae({header:!0,winHeader:m(rt)()}),style:{"-webkit-app-region":"drag"}},[m(rt)()?(_(),L("div",{key:0,class:ae({winLogo:!0,dark:m(n).dark}),style:{"-webkit-app-region":"no-drag"}},Zu,2)):B("",!0),x("span",{class:"closeIcon",style:{"-webkit-app-region":"no-drag"},onClick:c[0]||(c[0]=h=>a())},[p(m(xi),{id:"header-close-menu-icon",class:"icon"})])],2),p(d,{"selected-keys":t.selectedMenus,class:"menu",mode:"inline",theme:m(n).dark?"dark":"light","inline-collapsed":t.isCollapse,onClick:r},{default:g(()=>[(_(!0),L(be,null,Ke(i.value,h=>(_(),A(u,{id:h.key,key:h.key},{icon:g(()=>[(_(),A(_t(m(bn)(h.icon))))]),default:g(()=>[h.key==="home"?(_(),L(be,{key:0},[P(S(l.$t("home.home")),1)],64)):(_(),A(Ts,{key:1,"category-leaf":h},null,8,["category-leaf"]))]),_:2},1032,["id"]))),128))]),_:1},8,["selected-keys","theme","inline-collapsed"])])}}});const Qu=oe(Ju,[["__scopeId","data-v-c8e4d73f"]]);var qn=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Zn(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function la(t,e){for(var n=e.slice(0,e.length-1),o=0;o<n.length;o++)n[o]=t[n[o].toLowerCase()];return n}function ca(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function ed(t,e){for(var n=t.length>=e.length?t:e,o=t.length>=e.length?e:t,s=!0,a=0;a<n.length;a++)o.indexOf(n[a])===-1&&(s=!1);return s}var Gt={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":qn?173:189,"=":qn?61:187,";":qn?59:186,"'":222,"[":219,"]":221,"\\":220},Xe={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},mo={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Ce={16:!1,18:!1,17:!1,91:!1},ye={};for(var cn=1;cn<20;cn++)Gt["f".concat(cn)]=111+cn;var ue=[],ts=!1,ua="all",da=[],Ln=function(e){return Gt[e.toLowerCase()]||Xe[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},td=function(e){return Object.keys(Gt).find(function(n){return Gt[n]===e})},nd=function(e){return Object.keys(Xe).find(function(n){return Xe[n]===e})};function ha(t){ua=t||"all"}function Yt(){return ua||"all"}function od(){return ue.slice(0)}function sd(){return ue.map(function(t){return td(t)||nd(t)||String.fromCharCode(t)})}function ad(t){var e=t.target||t.srcElement,n=e.tagName,o=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(o=!1),o}function id(t){return typeof t=="string"&&(t=Ln(t)),ue.indexOf(t)!==-1}function rd(t,e){var n,o;t||(t=Yt());for(var s in ye)if(Object.prototype.hasOwnProperty.call(ye,s))for(n=ye[s],o=0;o<n.length;)n[o].scope===t?n.splice(o,1):o++;Yt()===t&&ha(e||"all")}function ld(t){var e=t.keyCode||t.which||t.charCode,n=ue.indexOf(e);if(n>=0&&ue.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&ue.splice(0,ue.length),(e===93||e===224)&&(e=91),e in Ce){Ce[e]=!1;for(var o in Xe)Xe[o]===e&&(Ze[o]=!1)}}function cd(t){if(typeof t>"u")Object.keys(ye).forEach(function(i){return delete ye[i]});else if(Array.isArray(t))t.forEach(function(i){i.key&&Jn(i)});else if(typeof t=="object")t.key&&Jn(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var s=n[0],a=n[1];typeof s=="function"&&(a=s,s=""),Jn({key:t,scope:s,method:a,splitKey:"+"})}}var Jn=function(e){var n=e.key,o=e.scope,s=e.method,a=e.splitKey,i=a===void 0?"+":a,r=ca(n);r.forEach(function(l){var c=l.split(i),u=c.length,d=c[u-1],h=d==="*"?"*":Ln(d);if(!!ye[h]){o||(o=Yt());var f=u>1?la(Xe,c):[];ye[h]=ye[h].filter(function(v){var y=s?v.method===s:!0;return!(y&&v.scope===o&&ed(v.mods,f))})}})};function ns(t,e,n,o){if(e.element===o){var s;if(e.scope===n||e.scope==="all"){s=e.mods.length>0;for(var a in Ce)Object.prototype.hasOwnProperty.call(Ce,a)&&(!Ce[a]&&e.mods.indexOf(+a)>-1||Ce[a]&&e.mods.indexOf(+a)===-1)&&(s=!1);(e.mods.length===0&&!Ce[16]&&!Ce[18]&&!Ce[17]&&!Ce[91]||s||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function os(t,e){var n=ye["*"],o=t.keyCode||t.which||t.charCode;if(!!Ze.filter.call(this,t)){if((o===93||o===224)&&(o=91),ue.indexOf(o)===-1&&o!==229&&ue.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(v){var y=mo[v];t[v]&&ue.indexOf(y)===-1?ue.push(y):!t[v]&&ue.indexOf(y)>-1?ue.splice(ue.indexOf(y),1):v==="metaKey"&&t[v]&&ue.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(ue=ue.slice(ue.indexOf(y))))}),o in Ce){Ce[o]=!0;for(var s in Xe)Xe[s]===o&&(Ze[s]=!0);if(!n)return}for(var a in Ce)Object.prototype.hasOwnProperty.call(Ce,a)&&(Ce[a]=t[mo[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(ue.indexOf(17)===-1&&ue.push(17),ue.indexOf(18)===-1&&ue.push(18),Ce[17]=!0,Ce[18]=!0);var i=Yt();if(n)for(var r=0;r<n.length;r++)n[r].scope===i&&(t.type==="keydown"&&n[r].keydown||t.type==="keyup"&&n[r].keyup)&&ns(t,n[r],i,e);if(o in ye){for(var l=0;l<ye[o].length;l++)if((t.type==="keydown"&&ye[o][l].keydown||t.type==="keyup"&&ye[o][l].keyup)&&ye[o][l].key){for(var c=ye[o][l],u=c.splitKey,d=c.key.split(u),h=[],f=0;f<d.length;f++)h.push(Ln(d[f]));h.sort().join("")===ue.sort().join("")&&ns(t,c,i,e)}}}}function ud(t){return da.indexOf(t)>-1}function Ze(t,e,n){ue=[];var o=ca(t),s=[],a="all",i=document,r=0,l=!1,c=!0,u="+",d=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(a=e.scope),e.element&&(i=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(d=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey)),typeof e=="string"&&(a=e);r<o.length;r++)t=o[r].split(u),s=[],t.length>1&&(s=la(Xe,t)),t=t[t.length-1],t=t==="*"?"*":Ln(t),t in ye||(ye[t]=[]),ye[t].push({keyup:l,keydown:c,scope:a,mods:s,shortcut:o[r],method:n,key:o[r],splitKey:u,element:i});typeof i<"u"&&!ud(i)&&window&&(da.push(i),Zn(i,"keydown",function(h){os(h,i)},d),ts||(ts=!0,Zn(window,"focus",function(){ue=[]},d)),Zn(i,"keyup",function(h){os(h,i),ld(h)},d))}function dd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(ye).forEach(function(n){var o=ye[n].filter(function(s){return s.scope===e&&s.shortcut===t});o.forEach(function(s){s&&s.method&&s.method()})})}var Qn={getPressedKeyString:sd,setScope:ha,getScope:Yt,deleteScope:rd,getPressedKeyCodes:od,isPressed:id,filter:ad,trigger:dd,unbind:cd,keyMap:Gt,modifier:Xe,modifierMap:mo};for(var eo in Qn)Object.prototype.hasOwnProperty.call(Qn,eo)&&(Ze[eo]=Qn[eo]);if(typeof window<"u"){var hd=window.hotkeys;Ze.noConflict=function(t){return t&&window.hotkeys===Ze&&(window.hotkeys=hd),Ze},window.hotkeys=Ze}let ss=36,pa="";for(;ss--;)pa+=ss.toString(36);function as(t=11){let e="",n=t;for(;n--;)e+=pa[Math.random()*36|0];return e}const pd=t=>t.replace(/[|\\{}()[\]^$+*?.-]/g,e=>`\\${e}`),fd=t=>t.replace(/\s{2,}/g," ").split(" ").join("|"),gd=({terms:t,matchExactly:e=!1})=>{if(typeof t!="string")throw new TypeError("Expected a string");const n=pd(t.trim());return`(${e?n:fd(n)})`},md=({terms:t,matchExactly:e=!1})=>{try{const n=/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.exec(t);return n?new RegExp(n[2],n[3]):new RegExp(gd({terms:t,matchExactly:e}),"ig")}catch{throw new TypeError("Expected terms to be either a string or a RegExp!")}},vd=t=>e=>e!==null&&typeof e<"u"&&t in e,un=vd("match"),dn=t=>typeof t<"u";function _d({curr:t,next:e,prev:n,clipBy:o=3}){const s=t.text.split(" "),a=s.length;if(t.match||o>=a)return t.text;const i="...";return dn(e)&&dn(n)&&un(n)&&un(e)?a>o*2?[...s.slice(0,o),i,...s.slice(-o)].join(" "):t.text:dn(e)&&un(e)?[i,...s.slice(-o)].join(" "):dn(n)&&un(n)?[...s.slice(0,o),i].join(" "):t.text}var Nt=Object.assign;const yd=t=>t.length>0,bd=({text:t,query:e,clipBy:n,matchExactly:o=!1})=>{const s=typeof e=="string"?e.trim():e;if(s==="")return[{key:as(),text:t,match:!1}];const a=md({terms:e,matchExactly:o});return t.split(a).filter(yd).map(i=>({key:as(),text:i,match:o?i.toLowerCase()===s.toLowerCase():a.test(i)})).map((i,r,l)=>Nt(Nt({},i),typeof n=="number"&&{text:_d(Nt(Nt(Nt({curr:i},r<l.length-1&&{next:l[r+1]}),r>0&&{prev:l[r-1]}),{clipBy:n}))}))},xd=["aria-label"],wd=ee({__name:"HighlightWords",props:{text:null,query:null},setup(t){const e=t,n=E([]);return ce([()=>e.text,()=>e.query],([o,s])=>{n.value=bd({text:o,query:s})},{immediate:!0}),(o,s)=>(_(),L("span",{class:"highlight-words-wrapper","aria-label":t.text},[(_(!0),L(be,null,Ke(n.value,a=>(_(),L("span",{key:a.key,class:ae({match:a.match}),"aria-hidden":""},S(a.text),3))),128))],8,xd))}});const is=oe(wd,[["__scopeId","data-v-be313243"]]);function to(t){return Math.abs(Math.floor(t))}function vt(t,e){return Math.random()*(e-t)+t}function We(t,e){return Math.floor(vt(t,e+1))}function rs(t,e,n,o){const s=Math.pow;return Math.sqrt(s(t-n,2)+s(e-o,2))}function vo(t,e,n=1){if(t>360||t<0)throw new Error(`Expected hue 0-360 range, got \`${t}\``);if(e>100||e<0)throw new Error(`Expected lightness 0-100 range, got \`${e}\``);if(n>1||n<0)throw new Error(`Expected alpha 0-1 range, got \`${n}\``);return`hsla(${t}, 100%, ${e}%, ${n})`}const ls=t=>{if(typeof t=="object"&&t!==null){if(typeof Object.getPrototypeOf=="function"){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}return Object.prototype.toString.call(t)==="[object Object]"}return!1},Ed=["__proto__","constructor","prototype"],fa=(...t)=>t.reduce((e,n)=>(Object.keys(n).forEach(o=>{Ed.includes(o)||(Array.isArray(e[o])&&Array.isArray(n[o])?e[o]=n[o]:ls(e[o])&&ls(n[o])?e[o]=fa(e[o],n[o]):e[o]=n[o])}),e),{});class Cd{constructor({x:e,y:n,ctx:o,hue:s,decay:a,gravity:i,friction:r,brightness:l,flickering:c,lineWidth:u,explosionLength:d}){O(this,"x");O(this,"y");O(this,"ctx");O(this,"hue");O(this,"friction");O(this,"gravity");O(this,"flickering");O(this,"lineWidth");O(this,"explosionLength");O(this,"angle");O(this,"speed");O(this,"brightness");O(this,"coordinates",[]);O(this,"decay");O(this,"alpha",1);for(this.x=e,this.y=n,this.ctx=o,this.hue=s,this.gravity=i,this.friction=r,this.flickering=c,this.lineWidth=u,this.explosionLength=d,this.angle=vt(0,Math.PI*2),this.speed=We(1,10),this.brightness=We(l.min,l.max),this.decay=vt(a.min,a.max);this.explosionLength--;)this.coordinates.push([e,n])}update(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&e()}draw(){const e=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=vo(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[e][0],this.coordinates[e][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=vo(this.hue,this.flickering?vt(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}}class kd{constructor(e,n){O(this,"active",!1);O(this,"x");O(this,"y");this.options=e,this.canvas=n,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(e,n){const{click:o,move:s}=this.mouseOptions;(o||s)&&(this.x=e.pageX-this.canvas.offsetLeft,this.y=e.pageY-this.canvas.offsetTop,this.active=n)}pointerDown(e){this.usePointer(e,this.mouseOptions.click)}pointerUp(e){this.usePointer(e,!1)}pointerMove(e){this.usePointer(e,this.active)}}class Sd{constructor(){O(this,"hue");O(this,"rocketsPoint");O(this,"opacity");O(this,"acceleration");O(this,"friction");O(this,"gravity");O(this,"particles");O(this,"explosion");O(this,"mouse");O(this,"boundaries");O(this,"sound");O(this,"delay");O(this,"brightness");O(this,"decay");O(this,"flickering");O(this,"intensity");O(this,"traceLength");O(this,"traceSpeed");O(this,"lineWidth");O(this,"lineStyle");O(this,"autoresize");this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={height:0,width:0,x:50,y:50}}update(e){Object.assign(this,fa(this,e))}}class $d{constructor(e,n){O(this,"tick",0);O(this,"rafId",0);O(this,"fps",60);O(this,"tolerance",.1);O(this,"now");this.options=e,this.render=n}mount(){this.now=performance.now();const e=1e3/this.fps,n=o=>{this.rafId=requestAnimationFrame(n);const s=o-this.now;s>=e-this.tolerance&&(this.render(),this.now=o-s%e,this.tick+=s*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(n)}unmount(){cancelAnimationFrame(this.rafId)}}class Id{constructor(e,n){this.options=e,this.updateSize=n,this.handleResize=this.handleResize.bind(this)}mount(){this.options.autoresize&&window.addEventListener("resize",this.handleResize)}unmount(){this.options.autoresize&&window.removeEventListener("resize",this.handleResize)}handleResize(){this.updateSize()}}class Td{constructor(e){O(this,"buffers",[]);O(this,"audioContext");O(this,"onInit",!1);this.options=e,this.init()}get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(const e of this.soundOptions.files){const n=await(await fetch(e)).arrayBuffer();this.audioContext.decodeAudioData(n).then(o=>{this.buffers.push(o)}).catch(o=>{throw o})}}play(){if(this.isEnabled&&this.buffers.length){const e=this.audioContext.createBufferSource(),n=this.buffers[We(0,this.buffers.length-1)],o=this.audioContext.createGain();e.buffer=n,o.gain.value=vt(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),o.connect(this.audioContext.destination),e.connect(o),e.start(0)}else this.init()}}class Od{constructor({x:e,y:n,dx:o,dy:s,ctx:a,hue:i,speed:r,traceLength:l,acceleration:c}){O(this,"x");O(this,"y");O(this,"sx");O(this,"sy");O(this,"dx");O(this,"dy");O(this,"ctx");O(this,"hue");O(this,"speed");O(this,"acceleration");O(this,"traceLength");O(this,"totalDistance");O(this,"angle");O(this,"brightness");O(this,"coordinates",[]);O(this,"currentDistance",0);for(this.x=e,this.y=n,this.sx=e,this.sy=n,this.dx=o,this.dy=s,this.ctx=a,this.hue=i,this.speed=r,this.traceLength=l,this.acceleration=c,this.totalDistance=rs(e,n,o,s),this.angle=Math.atan2(s-n,o-e),this.brightness=We(50,70);this.traceLength--;)this.coordinates.push([e,n])}update(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;const n=Math.cos(this.angle)*this.speed,o=Math.sin(this.angle)*this.speed;this.currentDistance=rs(this.sx,this.sy,this.x+n,this.y+o),this.currentDistance>=this.totalDistance?e(this.dx,this.dy,this.hue):(this.x+=n,this.y+=o)}draw(){const e=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[e][0],this.coordinates[e][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=vo(this.hue,this.brightness),this.ctx.stroke()}}class Md{constructor(e,n={}){O(this,"target");O(this,"container");O(this,"canvas");O(this,"ctx");O(this,"width");O(this,"height");O(this,"traces",[]);O(this,"explosions",[]);O(this,"waitStopRaf");O(this,"running",!1);O(this,"opts");O(this,"sound");O(this,"resize");O(this,"mouse");O(this,"raf");this.target=e,this.container=e,this.opts=new Sd,this.updateOptions(n),this.createCanvas(this.target),this.sound=new Td(this.opts),this.resize=new Id(this.opts,this.updateSize.bind(this)),this.mouse=new kd(this.opts,this.canvas),this.raf=new $d(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.1"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(e=!1){!this.running||(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),e&&this.canvas.remove())}async waitStop(e){if(this.running)return new Promise(n=>{this.waitStopRaf=()=>{!this.waitStopRaf||(requestAnimationFrame(this.waitStopRaf),!this.traces.length&&!this.explosions.length&&(this.waitStopRaf=null,this.stop(e),n()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){!this.ctx||(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(e=1){for(let n=0;n<e;n++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(e){this.opts.update(e)}updateSize({width:e=this.container.clientWidth,height:n=this.container.clientHeight}={}){this.width=e,this.height=n,this.canvas.width=e,this.canvas.height=n,this.updateBoundaries({...this.opts.boundaries,width:e,height:n})}updateBoundaries(e){this.updateOptions({boundaries:e})}createCanvas(e){e instanceof HTMLCanvasElement?(e.isConnected||document.body.append(e),this.canvas=e):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;const{opacity:e,lineStyle:n,lineWidth:o}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${e})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=n,this.ctx.lineJoin="round",this.ctx.lineWidth=vt(o.trace.min,o.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){const{hue:e,rocketsPoint:n,boundaries:o,traceLength:s,traceSpeed:a,acceleration:i,mouse:r}=this.opts;this.traces.push(new Od({x:this.width*We(n.min,n.max)/100,y:this.height,dx:this.mouse.x&&r.move||this.mouse.active?this.mouse.x:We(o.x,o.width-o.x*2),dy:this.mouse.y&&r.move||this.mouse.active?this.mouse.y:We(o.y,o.height*.5),ctx:this.ctx,hue:We(e.min,e.max),speed:a,acceleration:i,traceLength:to(s)}))}initTrace(){if(this.waitStopRaf)return;const{delay:e,mouse:n}=this.opts;(this.raf.tick>We(e.min,e.max)||this.mouse.active&&n.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let e=this.traces.length;for(;e--;)this.traces[e].draw(),this.traces[e].update((n,o,s)=>{this.initExplosion(n,o,s),this.sound.play(),this.traces.splice(e,1)})}initExplosion(e,n,o){const{particles:s,flickering:a,lineWidth:i,explosion:r,brightness:l,friction:c,gravity:u,decay:d}=this.opts;let h=to(s);for(;h--;)this.explosions.push(new Cd({x:e,y:n,ctx:this.ctx,hue:o,friction:c,gravity:u,flickering:We(0,100)<=a,lineWidth:vt(i.explosion.min,i.explosion.max),explosionLength:to(r),brightness:l,decay:d}))}drawExplosion(){let e=this.explosions.length;for(;e--;)this.explosions[e].draw(),this.explosions[e].update(()=>{this.explosions.splice(e,1)})}}const Ad=ee({__name:"fireworks",props:{autostart:{type:Boolean,default:!0},options:{type:Object,required:!1}},setup(t,{expose:e}){const n=t,o=E(),s=E();return pe(()=>{s.value=new Md(o.value,n.options),n.autostart&&s.value.start()}),Xt(()=>{s.value.stop()}),e({get isRunning(){return s.value.isRunning},get currentOptions(){return s.value.currentOptions},start(){s.value.start()},launch(a){s.value.launch(a)},stop(){s.value.stop()},async waitStop(){await s.value.waitStop()},pause(){s.value.pause()},clear(){s.value.clear()},updateOptions(a){s.value.updateOptions(a)},updateSize(a){s.value.updateSize(a)},updateBoundaries(a){s.value.updateBoundaries(a)}}),(a,i)=>(_(),L("div",{ref_key:"container",ref:o},null,512))}}),Dd=ee({__name:"Fireworks",setup(t){const e=E(),n=E({opacity:.5,particles:200,decay:{min:.01,max:.03}});async function o(){!e.value||(e.value.start(),await new Promise(s=>setTimeout(s,2500)),await e.value.waitStop())}return ce(e,()=>o(),{immediate:!0}),(s,a)=>(_(),A(wi,{to:"#searchbar-mask"},[p(m(Ad),{ref_key:"fw",ref:e,autostart:!1,options:n.value,style:{top:0,left:0,width:"100vw",height:"100vh",position:"fixed"}},null,8,["options"])]))}});const Ld=oe(Dd,[["__scopeId","data-v-bc435514"]]),Rd=["onKeydown"],Nd={key:0},Pd={style:{"text-align":"center"}},Fd=P("Community"),Ud={key:1,id:"on-search-extension",class:"on-search-extension"},zd={key:0,class:"alert"},Bd={class:"header"},Hd={class:"name"},Wd={class:"extension-name"},Vd={class:"extensionContent"},jd={class:"search-entry-wrapper"},Kd=["value","onClick"],Gd={class:"wrap"},Yd={class:"icon"},Xd={class:"name"},qd={class:"keyboard-indicator"},Zd=ee({__name:"index",props:{searchEntries:null,searchValue:null},emits:["open-extension"],setup(t,{expose:e,emit:n}){const o=t,{t:s}=qt(),a=E(null);Z.getCategoryTree().then(C=>{a.value=C});const i=E(null),r=E(new $t("")),l=E();ce(()=>o.searchEntries,()=>{h.value=0,c()}),pe(c);async function c(){var F;let C=de.exports.head(o.searchEntries)||{},{search_component:b,renderOnSearchCondition:I}=C;if(C&&b&&(!I||I(o.searchValue))){let H=ct.getLastClipboard();H?r.value=new $t(H,ct.getLastClipboardLangList()):r.value=new $t(""),((F=i.value)==null?void 0:F.id)!==C.id&&(i.value=C,i.value.searchComponent=Ei({loader:C.search_component,loadingComponent:Ci(ki,{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})}))}else i.value=null,r.value=new $t(""),l.value=""}const u=E(null),d=E([]),h=E(0);ce(h,C=>{y(C)});const f=()=>{const C=h.value-1;if(C>=0){h.value=C;return}h.value=o.searchEntries.length-1},v=()=>{const C=h.value+1;if(C<o.searchEntries.length){h.value=C;return}h.value=0},y=C=>{if(u.value&&d.value&&C>=0){const b=d.value.find(I=>I.getAttribute("value")===o.searchEntries[C].id);b==null||b.scrollIntoView({block:"end"})}};function w(C){l.value=C||s("home.clipboardAutoFill"),setTimeout(()=>{try{l.value=""}catch{}},2e3)}return e({up:f,down:v,preselectedSearchEntryIndex:h}),(C,b)=>{const I=k("a-divider"),F=k("a-row"),H=k("a-button"),V=k("a-typography-text"),N=k("a-space");return _(),L("div",{id:"home-searchbar-search-entries-wrapper",ref_key:"searchEntriesEle",ref:u,class:"search-entries-wrapper",onKeydown:Ve(f,["up"])},[t.searchEntries.length<=0?(_(),L("div",Nd,[t.searchValue==="2023"?(_(),L(be,{key:0},[p(I,null,{default:g(()=>[P(S(C.$t("searchEntries.2023"))+" \u{1F389} ",1)]),_:1}),p(F,{justify:"center"},{default:g(()=>[p(Ld)]),_:1})],64)):(_(),L(be,{key:1},[p(I,null,{default:g(()=>[P("\u{1F635} "+S(C.$t("searchEntries.no-result")),1)]),_:1}),x("p",Pd,[P(S(C.$t("searchEntries.feedback-feature"))+": ",1),p(H,{type:"link",onClick:b[0]||(b[0]=D=>m(K).openBrowser("https://community.he3.app/"))},{default:g(()=>[Fd]),_:1})])],64))])):B("",!0),i.value?(_(),L("div",Ud,[p(En,{name:"alert"},{default:g(()=>[l.value?(_(),L("div",zd,S(l.value),1)):B("",!0)]),_:1}),x("div",Bd,[x("div",Hd,[p(m(ys),{circled:"",class:"aha"}),x("span",null,[x("span",Wd,S(C.$t(`extension.${i.value.id}.name`)),1)])]),x("div",{id:"search-extension-quick-entry",class:"icon",onClick:b[1]||(b[1]=D=>n("open-extension",0))},[p(m(bs))])]),x("div",Vd,[(_(),A(_t(i.value.searchComponent),{"clipboard-value":r.value,"render-on-search":!0,"search-value":o.searchValue,onClick:Ie(m(de.exports.noop),["stop"]),onAcceptClipboardCb:w},null,40,["clipboard-value","search-value","onClick"]))])])):B("",!0),x("div",jd,[(_(!0),L(be,null,Ke(t.searchEntries,(D,R)=>(_(),L("div",{key:D.id,ref_for:!0,ref_key:"searchEntryEle",ref:d,value:D.id,class:ae({"search-entry":!0,"preselected-search-entry":R===h.value}),onClick:$=>n("open-extension",R)},[x("div",Gd,[x("div",Yd,[a.value?(_(),A(m(Zt),{key:0,icon:m(An)(D.category[0],a.value)},null,8,["icon"])):B("",!0)]),x("p",Xd,[p(is,{text:C.$t(`extension.${D.id}.name`),query:t.searchValue},null,8,["text","query"])]),p(V,{class:"description",type:"secondary"},{default:g(()=>[p(is,{text:C.$t(`extension.${D.id}.description`),query:t.searchValue},null,8,["text","query"])]),_:2},1024)])],10,Kd))),128))]),x("div",qd,[p(N,null,{default:g(()=>[p(H,{size:"small",type:"text",onClick:b[2]||(b[2]=()=>{C.$emit("open-extension",h.value)})},{icon:g(()=>[p(m(Si))]),default:g(()=>[P(" (Enter) "+S(C.$t("searchbar.open")),1)]),_:1}),p(H,{size:"small",type:"text",onClick:v},{icon:g(()=>[p(m($i))]),default:g(()=>[P(" (Tab) "+S(C.$t("searchbar.next")),1)]),_:1}),p(H,{size:"small",type:"text",onClick:f},{icon:g(()=>[p(m(Ii))]),default:g(()=>[P(" (Tab + Shift) "+S(C.$t("searchbar.prev")),1)]),_:1})]),_:1})])],40,Rd)}}});const Jd=oe(Zd,[["__scopeId","data-v-7b8847dc"]]),ga=t=>(tt("data-v-bb8abd93"),t=t(),nt(),t),Qd={class:"keyboard"},eh=ga(()=>x("span",{style:{color:"#aeaeae","user-select":"none"}}," + ",-1)),th=ga(()=>x("span",{class:"keyboard"}," K ",-1)),nh=ee({__name:"index",props:{closeWelcome:{type:Function,default:()=>{}}},emits:["keydown-enter"],setup(t,{expose:e,emit:n}){const o=t,s=De(),{t:a}=Ue(),i=E(null),r=E(null),l=E(),c=E([]),u=E(!1),d=U=>{u.value!==U&&(u.value=U)},h=E(!0),f=U=>{h.value!==U&&(h.value=U)},v=U=>{var me;U.key==="k"&&(U.ctrlKey||U.metaKey)&&(U.stopImmediatePropagation(),(me=i==null?void 0:i.value)==null||me.focus(),localStorage.getItem("welcome")||o.closeWelcome())};pe(()=>{document.addEventListener("keydown",v),K.focusSearch(()=>{var U;gs()&&((U=i==null?void 0:i.value)==null||U.focus())})}),Xt(()=>{document.removeEventListener("keydown",v)});async function y(){const U=await _o();try{const W=await se(U,q.RECOMMENDED);if(W.length<=0){c.value=U;return}const me=U.filter(ve=>!W.find(we=>we.id===ve.id));c.value=[...W,...me]}catch(W){console.error(W)}}const w=E(),C=async()=>{const U=l.value;if(w.value=l.value,!U||U.length<=0){await y();return}try{c.value=await jl(U)}catch(W){console.error(W)}},b=de.exports.debounce(()=>{C()},200,{leading:!0});ce(l,()=>{b()});const F=()=>{var U;T.value||r.value&&((U=i==null?void 0:i.value)==null||U.blur(),H(r.value.preselectedSearchEntryIndex))};function H(U){if(c.value.length<=0)return;const W=c.value[U];if(!W)throw new Error("targetExtension is undefined");const me=l.value;l.value=a(`extension.${W.id}.name`),n("keydown-enter",W),j(),K.sendGAEvent({category:"Extension",action:"search_extension",eventLabel:W.id,eventValue:1}),K.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:W.id,eventValue:1}),K.sendGAPageView(W.id),Re.capture("SearchOpenExtension",{searchValue:me,extensionsId:W.id}),Re.capture("OpenExtension",{extensionId:W.id,from:"search"})}const V=E(!1),N=U=>{V.value!==U&&(V.value=U)},D=async()=>{$()};function R(U){U.key==="Escape"&&j()}function $(){var U;!l.value||l.value.length<=0?y():(U=i==null?void 0:i.value)==null||U.select(),N(!0),f(!1),d(!0),document.addEventListener("keydown",R)}function j(){var U;(U=i==null?void 0:i.value)==null||U.blur(),N(!1),f(!0),d(!1),document.removeEventListener("keydown",R)}const T=E(!1),X=()=>{T.value=!0},z=()=>{T.value=!1};return pe(async()=>{await y()}),e({inputEle:i,searchEntriesVisible:u,turnOffSearchBar:j}),(U,W)=>{var ve;const me=k("a-input");return _(),L("div",{class:ae(["search",V.value&&"is-focus"]),style:{"-webkit-app-region":"no-drag"}},[p(me,{id:"home-searchbar-input",ref_key:"inputEle",ref:i,value:l.value,"onUpdate:value":W[0]||(W[0]=we=>l.value=we),class:ae(["search-bar",u.value&&"has-search-entries"]),placeholder:U.$t("searchbar.placeholder"),"allow-clear":!h.value,style:hs(m(s).dark?"background-color: var(--gray-10)":"background-color: var(--gray-1)"),onClick:Ie(D,["stop"]),onFocus:D,onChange:W[1]||(W[1]=we=>d(!0)),onKeydown:[Ve(F,["enter"]),W[2]||(W[2]=Ve(Ie(we=>{var ie;return(ie=r.value)==null?void 0:ie.down()},["exact","stop","prevent"]),["tab"])),W[3]||(W[3]=Ve(Ie(we=>{var ie;return(ie=r.value)==null?void 0:ie.up()},["shift","stop","prevent"]),["tab"])),W[4]||(W[4]=Ve(Ie(we=>{var ie;return(ie=r.value)==null?void 0:ie.up()},["stop","prevent"]),["up"])),W[5]||(W[5]=Ve(Ie(we=>{var ie;return(ie=r.value)==null?void 0:ie.down()},["stop","prevent"]),["down"]))],onCompositionstart:X,onCompositionend:z},xs({prefix:g(()=>[p(m(Ti))]),_:2},[h.value?{name:"suffix",fn:g(()=>[x("span",Qd,S(m(ws)()===m(fn).MAC?"\u2318":"Ctrl"),1),eh,th]),key:"0"}:void 0]),1032,["value","class","placeholder","allow-clear","style","onClick","onKeydown"]),u.value?(_(),A(Jd,{key:0,ref_key:"searchEntriesEle",ref:r,"search-entries":c.value,"search-value":(ve=w.value)!=null?ve:"",class:"search-entries",onOpenExtension:H},null,8,["search-entries","search-value"])):B("",!0)],2)}}});const oh=oe(nh,[["__scopeId","data-v-bb8abd93"]]),sh={class:"feedback-wrapper"},ah=P(" Join Our Discord "),ih=P(" github.com/he3-app/he3-feedback/discussions "),rh=ee({__name:"index",setup(t){const e=E(!1),n=o=>{o!==e.value&&(e.value=o)};return(o,s)=>{const a=k("a-button"),i=k("a-popover"),r=k("a-image"),l=k("a-typography-title"),c=k("a-card-grid"),u=k("a-space"),d=k("a-card"),h=k("a-modal");return _(),L("div",sh,[p(i,null,{content:g(()=>[P(S(o.$t("feedback.subject")),1)]),default:g(()=>[p(a,{id:"feedback-button",type:"text",onClick:s[0]||(s[0]=f=>n(!0))},{icon:g(()=>[m(wn)()!=="zh"?(_(),A(m(Oi),{key:0})):B("",!0),m(wn)()==="zh"?(_(),A(m(Mi),{key:1})):B("",!0)]),_:1})]),_:1}),p(h,{visible:e.value,"onUpdate:visible":s[4]||(s[4]=f=>e.value=f),title:o.$t("feedback.subject")},{footer:g(()=>[p(a,{id:"feedback-modal-close-button",onClick:s[3]||(s[3]=f=>n(!1))},{default:g(()=>[P(S(o.$t("common.close")),1)]),_:1})]),default:g(()=>[p(d,null,{default:g(()=>[p(c,{style:{width:"33%","text-align":"center",height:"220px"}},{default:g(()=>[p(r,{alt:"He3",src:"feedback/wechat-assistant.jpeg",width:100,preview:!1}),p(l,{level:5,style:{"margin-top":"16px","margin-bottom":"0","text-align":"center"}},{default:g(()=>[P(S(o.$t("feedback.weChatAssistant")),1)]),_:1})]),_:1}),p(c,{style:{width:"33%","text-align":"center",height:"220px"}},{default:g(()=>[p(r,{alt:"He3",src:"feedback/wechatOfficialAccount@3x.png",width:100,preview:!1}),p(l,{level:5,style:{"margin-top":"16px","margin-bottom":"0","text-align":"center"}},{default:g(()=>[P(S(o.$t("feedback.weChatOfficialAccount")),1)]),_:1})]),_:1}),p(c,{style:{width:"34%","text-align":"center",height:"220px"}},{default:g(()=>[p(r,{alt:"He3",src:"discord.png",width:100,preview:!1,height:100}),p(a,{onClick:s[1]||(s[1]=f=>m(K).openBrowser("https://discord.gg/F9QyJdVTwC")),class:"discordButton",size:"small"},{default:g(()=>[ah]),_:1})]),_:1}),p(c,{style:{width:"100%"}},{default:g(()=>[p(u,{align:"center"},{default:g(()=>[p(l,{level:5,style:{margin:"0",width:"max-content","font-size":"14px"}},{default:g(()=>[P(S(o.$t("feedback.communityForum")),1)]),_:1}),p(a,{type:"link",onClick:s[2]||(s[2]=f=>m(K).openBrowser("https://github.com/he3-app/he3-feedback/discussions")),style:{"padding-left":"0px"}},{default:g(()=>[ih]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"])])}}});const lh=oe(rh,[["__scopeId","data-v-9f666609"]]),ch={class:"share-wrapper"},uh=ee({__name:"index",setup(t){const{t:e}=Ue(),n=E(!1),o=()=>{s()},s=()=>{n.value=!0},a=()=>{K.sendGAEvent({category:"Extension",action:"Share Extension",eventLabel:"Share Extension",eventValue:1}),Re.capture("ShareExtension",{}),n.value=!1},i=E(e("share.shareContent"));return(r,l)=>{const c=k("a-button"),u=k("a-popover"),d=k("a-textarea"),h=k("a-modal");return _(),L("div",ch,[p(u,{placement:"bottomRight"},{content:g(()=>[P(S(m(e)("share.title")),1)]),default:g(()=>[p(c,{id:"share-button",type:"text",onClick:o},{icon:g(()=>[p(m(Ai))]),_:1})]),_:1}),p(h,{visible:n.value,"onUpdate:visible":l[1]||(l[1]=f=>n.value=f),title:m(e)("share.title")},{footer:g(()=>[p(m(Di),{type:"primary",id:"share-modal-copy-button","copy-content":i.value,title:m(e)("share.shareBtn"),"success-text":m(e)("share.copySuccess"),onAfterCopy:a},null,8,["copy-content","title","success-text"])]),default:g(()=>[p(d,{id:"share-modal-textarea",value:i.value,"onUpdate:value":l[0]||(l[0]=f=>i.value=f),rows:3},null,8,["value"])]),_:1},8,["visible","title"])])}}});const dh=oe(uh,[["__scopeId","data-v-0b2ab1a4"]]),hh={class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},ph=x("path",{d:"m512 28.444-398.222 568.89h170.666V711.11h455.112V597.333h170.666L512 28.444zM284.444 881.778h455.112V768H284.444v113.778zm0 113.778h455.112v-56.89H284.444v56.89z",fill:"currentColor"},null,-1),fh=[ph];function gh(t,e){return _(),L("svg",hh,fh)}const mh={render:gh},vh=t=>(tt("data-v-2598c778"),t=t(),nt(),t),_h={class:"version-wrapper"},yh={class:"title"},bh={width:"1.3em",height:"1.3em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},xh=["fill"],wh=["fill"],Eh=vh(()=>x("h3",null,"He3",-1)),Ch={class:"update-content"},kh=P(" https://he3.app "),Sh={style:{color:"#999"}},$h=ee({__name:"index",emits:["update:aboutUsVisible"],setup(t,{emit:e}){const n=De();function o(){K.openBrowser("https://he3.app")}const s=E("");Do().then(f=>{s.value=f});const a=E(!1),i=E(!1),r=E("NO_CHANGE");pe(async()=>{i.value=!0;try{s.value=await Do();const f=await Li();K.semverCompare(f,s.value)>0?r.value="OUTDATED":r.value="NO_CHANGE"}catch(f){console.error(f)}finally{i.value=!1}});async function l(){K.sendGAEvent({category:"App",action:"Upgrade",eventLabel:"Upgrade",eventValue:1}),Re.capture("UpgradeApp",{});const f="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-mac-arm64.dmg",v="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-mac-amd64.dmg",y="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-win64.exe",w="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-win32.exe",C="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3_linux_arm64.deb",b="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3_linux_amd64.deb";let I="";switch(ws()){case fn.MAC:const H=await K.getCpuManufacturer();H==="Apple"?I=f:H==="Intel"&&(I=v);break;case fn.WIN:const V=await K.getOSArch();V==="x64"?I=y:V==="x32"&&(I=w);break;case fn.LINUX:const N=await K.getOSArch();N==="arm64"?I=C:N==="amd64"&&(I=b);break}if(I){const H=document.createElement("a"),V=I.split("/");H.download=V[V.length-1],H.href=I,H.click()}else K.openBrowser("https://he3.app")}let c=0,u=1,d=!1;function h(){let f=new Date().getTime();f-c<1e3?u+=1:u=1,c=f,!d&&u>=5&&(d=!0,yo()?(ne.success("\u5173\u95ED\u5F00\u53D1\u8005\u6A21\u5F0F\uFF0C\u9875\u9762\u5C06\u57283\u79D2\u540E\u5237\u65B0"),localStorage.removeItem("debug"),setTimeout(()=>{window.location.reload()},3e3)):(localStorage.setItem("debug","true"),ne.success("\u8FDB\u5165\u5F00\u53D1\u8005\u6A21\u5F0F\uFF0C\u9875\u9762\u5C06\u57283\u79D2\u540E\u5237\u65B0"),setTimeout(()=>{window.location.reload()},3e3)))}return(f,v)=>{const y=k("a-button"),w=k("a-badge"),C=k("a-col"),b=k("a-typography-text"),I=k("a-row"),F=k("a-modal");return _(),L("div",_h,[x("div",yh,[p(w,{dot:r.value!=="NO_CHANGE"&&!m(n).hasUpdate,offset:[-5,5]},{default:g(()=>[p(y,{id:"about-button",type:"text",onClick:v[0]||(v[0]=H=>a.value=!0)},{icon:g(()=>[p(m(Es),null,{component:g(()=>[(_(),L("svg",bh,[x("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 158.133C0 158.23 0.0102692 158.324 0.0309117 158.416C1.57042 165.286 60.112 157.24 130.785 140.428C201.47 123.663 257.503 104.486 255.969 97.6401C254.926 92.981 227.612 95.1917 188.075 102.341C187.003 102.534 184.93 105.001 182.958 107.347C181.231 109.402 179.581 111.365 178.752 111.623C168.257 114.895 157.552 117.432 141.92 121.136C137.678 122.141 133.073 123.233 128.012 124.448C113.861 127.845 104.931 129.359 96.6079 130.77C90.9825 131.723 85.6345 132.63 79.1395 134.039C77.7395 134.348 75.3979 133.227 73.179 132.165C71.1303 131.185 69.1863 130.254 68.1843 130.545C27.5464 142.293 0 153.137 0 158.133Z",fill:m(n).dark?"#ccc":"#333"},null,8,xh),x("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M196.437 134.038C196.611 132.799 197.002 131.603 197.59 130.508L198.616 129.082C190.083 131.483 180.777 134.008 170.871 136.599C169.421 143.923 166.315 150.79 161.807 156.645C157.299 162.499 151.515 167.176 144.925 170.295L150.368 196.657L153.204 209.731C152.82 201.819 154.165 196.503 157.241 193.781C157.531 193.505 157.841 193.253 158.169 193.026C168.845 187.303 177.949 178.898 184.638 168.587C191.327 158.276 195.385 146.394 196.437 134.038ZM130.672 201.108L125.188 174.58C118.211 174.519 111.338 172.826 105.088 169.627C98.8382 166.429 93.3752 161.809 89.1113 156.115C78.6579 158.397 68.7464 160.466 59.5729 162.284C61.0526 163.343 62.3802 164.611 63.5168 166.052C64.0534 166.888 64.6633 167.672 65.3388 168.393C71.8835 178.534 80.7605 186.849 91.1788 192.596C101.597 198.344 113.233 201.345 125.05 201.334C126.941 201.334 128.815 201.259 130.672 201.108ZM98.1407 59.7888L95.3442 46.2749C95.7171 54.1867 94.3717 59.5016 91.3081 62.2194C90.991 62.4987 90.7316 62.7424 90.524 62.9504C79.864 68.9792 70.8706 77.7086 64.3928 88.3146C57.9151 98.9206 54.1667 111.053 53.5015 123.567V123.727C51.9127 135.23 39.4804 140.409 31.9054 143.564C28.3463 145.047 25.8595 146.083 26.0733 147.118C26.4308 149.002 31.4183 151.308 38.7582 154.095C51.1605 150.422 65.777 146.369 81.9213 142.209C78.489 131.657 78.7648 120.198 82.7004 109.834C86.636 99.4702 93.981 90.8622 103.451 85.5151L98.1407 59.7888ZM162.354 64.6112C151.113 57.5618 138.207 53.8374 125.05 53.846C122.548 53.8464 120.048 53.9793 117.56 54.2442L122.842 79.7982C123.764 79.715 124.687 79.715 125.621 79.715C136.833 79.7065 147.664 83.912 156.084 91.5435C164.504 99.1751 169.936 109.709 171.361 121.172C185.095 118.266 197.694 115.776 208.649 113.791C212.483 107.694 214.691 103.439 214.317 101.62C214.105 100.597 212.342 100.892 209.761 101.324C204.124 102.267 194.584 103.864 188.774 93.8113C182.735 81.763 173.594 71.6606 162.354 64.6112Z",fill:m(n).dark?"#ccc":"#333"},null,8,wh)]))]),_:1})]),_:1})]),_:1},8,["dot"])]),p(F,{visible:a.value,"onUpdate:visible":v[2]||(v[2]=H=>a.value=H),title:f.$t("aboutUs.title")},{footer:g(()=>[p(y,{onClick:v[1]||(v[1]=H=>a.value=!1)},{default:g(()=>[P(S(f.$t("common.close")),1)]),_:1})]),default:g(()=>[p(I,{type:"flex"},{default:g(()=>[p(C,{flex:2},{default:g(()=>[x("img",{id:"about-logo-image",src:ia,width:"100",onClick:h})]),_:1}),p(C,{flex:10},{default:g(()=>[Eh,x("p",Ch,[P(S(f.$t("aboutUs.version"))+": "+S(s.value)+" ",1),p(y,{size:"small",type:"dashed",loading:i.value,"data-check-update-result":r.value==="NO_CHANGE"?"NO_CHANGE":"OUTDATED",class:"check-update-btn",style:{"margin-left":"10px"},onClick:l},xs({default:g(()=>[r.value==="NO_CHANGE"?(_(),L(be,{key:0},[P(S(f.$t("aboutUs.up-to-date")),1)],64)):(_(),A(b,{key:1,ellipsis:{tooltip:!0},type:"danger",content:f.$t("aboutUs.download-new-version")},null,8,["content"]))]),_:2},[r.value==="NO_CHANGE"?{name:"icon",fn:g(()=>[p(m(oo))]),key:"0"}:{name:"icon",fn:g(()=>[x("span",{style:{color:"#ff4d4f","margin-right":"3px"}},[p(m(mh))])]),key:"1"}]),1032,["loading","data-check-update-result"])]),x("p",null,[P(S(f.$t("aboutUs.more-details"))+": ",1),p(y,{type:"link",onClick:o},{default:g(()=>[kh]),_:1})]),x("div",Sh,S(f.$t("common.company")),1)]),_:1})]),_:1})]),_:1},8,["visible","title"])])}}});const Ih=oe($h,[["__scopeId","data-v-2598c778"]]),Th=["srcset"],Oh=["srcset"],Mh=["srcset"],Ah=["srcset"],Dh=ee({__name:"index",setup(t){const e=E(!1),n=De();pe(()=>{try{K.winGetIsMaxWindow().then(i=>{e.value=i})}catch{}});function o(){K.winGetIsMaxWindow().then(i=>{i?K.winSetUnmaximizeWindow().then(()=>{e.value=!1}):K.winSetMaxWindow().then(()=>{e.value=!0})})}function s(){K.winSetMinWindow()}function a(){K.winCloseWindow()}return(i,r)=>(_(),L("div",{id:"window-controls",class:ae(!m(n).dark&&"light")},[x("div",{class:"button",onClick:s},[x("img",{class:"icon",srcset:m(n).dark?`
          icons/min-w-10.png 1x,
          icons/min-w-12.png 1.25x,
          icons/min-w-15.png 1.5x,
          icons/min-w-15.png 1.75x,
          icons/min-w-20.png 2x,
          icons/min-w-20.png 2.25x,
          icons/min-w-24.png 2.5x,
          icons/min-w-30.png 3x,
          icons/min-w-30.png 3.5x
          `:`
           icons/min-k-10.png 1x,
          icons/min-k-12.png 1.25x,
          icons/min-k-15.png 1.5x,
          icons/min-k-15.png 1.75x,
          icons/min-k-20.png 2x,
          icons/min-k-20.png 2.25x,
          icons/min-k-24.png 2.5x,
          icons/min-k-30.png 3x,
          icons/min-k-30.png 3.5x
          `,draggable:"false"},null,8,Th)]),x("div",{class:ae(["button",e.value&&"hidden"]),onClick:o},[x("img",{class:"icon",srcset:m(n).dark?`
          icons/max-w-10.png 1x,
          icons/max-w-12.png 1.25x,
          icons/max-w-15.png 1.5x,
          icons/max-w-15.png 1.75x,
          icons/max-w-20.png 2x,
          icons/max-w-20.png 2.25x,
          icons/max-w-24.png 2.5x,
          icons/max-w-30.png 3x,
          icons/max-w-30.png 3.5x
          `:`
          icons/max-k-10.png 1x,
          icons/max-k-12.png 1.25x,
          icons/max-k-15.png 1.5x,
          icons/max-k-15.png 1.75x,
          icons/max-k-20.png 2x,
          icons/max-k-20.png 2.25x,
          icons/max-k-24.png 2.5x,
          icons/max-k-30.png 3x,
          icons/max-k-30.png 3.5x
          `,draggable:"false"},null,8,Oh)],2),x("div",{class:ae(["button",!e.value&&"hidden"]),onClick:o},[x("img",{class:"icon",srcset:m(n).dark?`
          icons/restore-w-10.png 1x,
          icons/restore-w-12.png 1.25x,
          icons/restore-w-15.png 1.5x,
          icons/restore-w-15.png 1.75x,
          icons/restore-w-20.png 2x,
          icons/restore-w-20.png 2.25x,
          icons/restore-w-24.png 2.5x,
          icons/restore-w-30.png 3x,
          icons/restore-w-30.png 3.5x
          `:`
          icons/restore-k-10.png 1x,
          icons/restore-k-12.png 1.25x,
          icons/restore-k-15.png 1.5x,
          icons/restore-k-15.png 1.75x,
          icons/restore-k-20.png 2x,
          icons/restore-k-20.png 2.25x,
          icons/restore-k-24.png 2.5x,
          icons/restore-k-30.png 3x,
          icons/restore-k-30.png 3.5x
          `,draggable:"false"},null,8,Mh)],2),x("div",{class:"button close",onClick:a},[x("img",{class:"icon",srcset:m(n).dark?`
          icons/close-w-10.png 1x,
          icons/close-w-12.png 1.25x,
          icons/close-w-15.png 1.5x,
          icons/close-w-15.png 1.75x,
          icons/close-w-20.png 2x,
          icons/close-w-20.png 2.25x,
          icons/close-w-24.png 2.5x,
          icons/close-w-30.png 3x,
          icons/close-w-30.png 3.5x
          `:`
           icons/close-k-10.png 1x,
          icons/close-k-12.png 1.25x,
          icons/close-k-15.png 1.5x,
          icons/close-k-15.png 1.75x,
          icons/close-k-20.png 2x,
          icons/close-k-20.png 2.25x,
          icons/close-k-24.png 2.5x,
          icons/close-k-30.png 3x,
          icons/close-k-30.png 3.5x
          `,draggable:"false"},null,8,Ah)])],2))}});const Lh=oe(Dh,[["__scopeId","data-v-a002e03c"]]),Rh=t=>(tt("data-v-7ae7d8fb"),t=t(),nt(),t),Nh={key:0},Ph=Rh(()=>x("svg",{t:"1670555694041",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"22366",width:"20",height:"20"},[x("path",{d:"M512 0C228.693333 0 0 228.693333 0 512s228.693333 512 512 512 512-228.693333 512-512S795.306667 0 512 0z m279.893333 556.373333c-34.133333 34.133333-95.573333 34.133333-129.706666 0L614.4 508.586667V785.066667c0 58.026667-44.373333 102.4-102.4 102.4s-102.4-44.373333-102.4-102.4v-273.066667l-44.373333 44.373333c-34.133333 34.133333-95.573333 34.133333-129.706667 0-37.546667-37.546667-37.546667-95.573333 0-129.706666l235.52-235.52c23.893333-23.893333 61.44-23.893333 85.333333 0l235.52 235.52c17.066667 17.066667 27.306667 40.96 27.306667 64.853333s-10.24 47.786667-27.306667 64.853333z",fill:"#16c000","p-id":"22367"})],-1)),Fh={class:"update-content"},Uh={class:"update-title"},zh={class:"update-buttons"},Bh=ee({__name:"index",setup(t){const{t:e}=qt(),n=De();pe(()=>{K.allowRestartUpdate(()=>{n.$patch({hasUpdate:!0})})});function o(){K.handleUpdate()}return(s,a)=>{const i=k("a-button"),r=k("a-popover");return m(n).hasUpdate?(_(),L("div",Nh,[p(r,{style:{width:"300px"},title:m(e)("home.update.title"),trigger:"hover"},{content:g(()=>[x("div",Fh,[x("div",Uh,S(s.$t("home.update.desc")),1),x("div",zh,[p(i,{type:"primary",size:"small",onClick:o},{default:g(()=>[P(S(s.$t("home.update.action")),1)]),_:1})])])]),default:g(()=>[p(i,{type:"text"},{icon:g(()=>[p(m(Es),null,{component:g(()=>[Ph]),_:1})]),_:1})]),_:1},8,["title"])])):B("",!0)}}});const Hh=oe(Bh,[["__scopeId","data-v-7ae7d8fb"]]),Wh=["id","value","onClick"],Vh={class:"wrap"},jh={class:"icon"},Kh={class:"name"},Gh=ee({__name:"index",props:{recommend:null},emits:["keydown-enter"],setup(t,{emit:e}){const n=E(null);return Z.getCategoryTree().then(o=>{n.value=o}),(o,s)=>{const a=k("a-button"),i=k("a-typography-text"),r=k("a-popover");return _(),L("div",null,[p(r,null,{content:g(()=>[x("div",null,[x("p",null,S(o.$t("home.intelligentRecommendation.title")),1),(_(!0),L(be,null,Ke(t.recommend,(l,c)=>(_(),L("div",{id:"intelligent-recommend-item-"+l.extension.id,key:l.extension.id,value:l.extension.id,onClick:u=>e("keydown-enter",t.recommend[c].extension)},[x("div",Vh,[x("div",jh,[n.value?(_(),A(m(Zt),{key:0,icon:m(An)(l.extension.category[0],n.value)},null,8,["icon"])):B("",!0)]),x("p",Kh,S(o.$t(`extension.${l.extension.id}.name`)),1),p(i,{class:"description",type:"secondary"},{default:g(()=>[P(S(o.$t(`extension.${l.extension.id}.description`)),1)]),_:2},1024)])],8,Wh))),128))])]),default:g(()=>[p(a,{id:"intelligent-icon-bulb",class:"icon-bulb",type:"link",size:"small"},{icon:g(()=>[p(m(ys))]),_:1})]),_:1})])}}});const Yh=oe(Gh,[["__scopeId","data-v-4cb07c98"]]),Xh={class:"share-wrapper"},qh=ee({__name:"index",setup(t){const{t:e}=Ue(),n=De(),o=2*3600*1e3,s=E(n.syncDiff),a=E(!0),i=E(!0),r=E(),l=()=>{c()},c=()=>{s.value=!s.value},u=()=>{c()},d=()=>{c(),Fn({handleSuccess:()=>{location.reload()},handleError:()=>{ne.error("account.category.updateError")}})};pe(()=>{r.value=setTimeout(h,o),K.handleWindowShow((f,v)=>{a.value=v,n.syncDiff&&!v&&Fn({handleSuccess:()=>{location.reload()},handleError:()=>{clearInterval(r.value),r.value=setTimeout(h,o)}})})}),Xt(()=>{r.value&&clearInterval(r.value)});const h=()=>{n.token&&Z.getAutoSync().then(f=>{f&&ms().then(v=>{if(v)if(a.value){clearInterval(r.value),r.value=null,n.$patch({syncDiff:!0}),s.value=!0;return}else Fn({handleSuccess:()=>{location.reload()},handleError:()=>{clearInterval(r.value),r.value=setTimeout(h,o)}})})}),r.value=setTimeout(h,o)};return ce(()=>n.syncDiff,()=>{r.value||(n.syncDiff?i.value=!0:(r.value=setTimeout(h,o),i.value=!1))}),(f,v)=>{const y=k("a-button"),w=k("a-popconfirm");return vs((_(),L("div",Xh,[i.value?(_(),A(w,{key:0,placement:"bottomRight",visible:s.value,"cancel-text":m(e)("account.category.showConfirm.cancel"),"ok-text":m(e)("account.category.showConfirm.ok"),onCancel:u,onConfirm:d},{title:g(()=>[P(S(m(e)("account.category.showConfirm.content")),1)]),default:g(()=>[p(y,{id:"share-button",type:"text",onClick:l},{icon:g(()=>[p(m(Ri),{spin:s.value},null,8,["spin"])]),_:1})]),_:1},8,["visible","cancel-text","ok-text"])):B("",!0)],512)),[[_s,m(n).syncDiff]])}}}),Zh={class:"right"},Jh={key:0,style:{"-webkit-app-region":"no-drag"}},Qh=ee({__name:"index",emits:["openSettings","searchBarEnterHandler","menuClickHandler"],setup(t,{emit:e}){const n=E(null),o=E([]),s=De(),a=async()=>{const{extensions:c}=await ko();o.value=c.filter(u=>u.matchBy==="id")};pe(()=>{setInterval(()=>{a()},1e3)});const i=E(!0);function r(){K.winGetIsMaxWindow().then(c=>{c?K.winSetUnmaximizeWindow():K.winSetMaxWindow()})}function l(c){Re.capture("OpenExtension",{extensionId:c.id,from:"recommend"}),e("searchBarEnterHandler",c)}return(c,u)=>{var h;const d=k("a-button");return _(),L("div",{class:ae(["header",!i.value&&"noActive",(!m(s).isMenuSpread||m(rt)())&&"header-no-margin"]),style:{"-webkit-app-region":"drag"},onDblclick:r},[x("div",{class:"left",onDblclick:u[6]||(u[6]=Ie(()=>{},["stop"]))},[p(En,{name:"icon"},{default:g(()=>[x("div",{class:ae({spreadIcon:!0,isSpread:!m(s).isMenuSpread,winLeft:m(rt)()&&!m(s).isMenuSpread}),style:{"-webkit-app-region":"no-drag"}},[m(s).isMenuSpread?B("",!0):(_(),L("div",{key:0,class:"icon-content",onClick:u[0]||(u[0]=()=>{m(s).$patch({isMenuSpread:!0,userSetSpreadFlag:!0})})},[m(s).isMenuSpread?B("",!0):(_(),A(m(bs),{key:0,class:"icon2"})),m(s).isMenuSpread?B("",!0):(_(),A(m(Ni),{key:1,id:"header-open-menu-icon",class:"icon1"}))])),m(s).isMenuSpread?B("",!0):(_(),A(m(Lo),{key:1,class:"homeIcon",onClick:u[1]||(u[1]=f=>e("menuClickHandler",{key:"home"}))}))],2)]),_:1}),x("div",{id:"searchbar-mask",class:ae(["mask",!((h=n.value)!=null&&h.searchEntriesVisible)&&"hidden"]),onClick:u[2]||(u[2]=f=>{var v;return(v=n.value)==null?void 0:v.turnOffSearchBar()}),onDblclick:u[3]||(u[3]=Ie(()=>{},["stop"]))},null,34),m(s).isMenuSpread?(_(),A(d,{key:0,type:"text",style:{"-webkit-app-region":"no-drag"},onClick:u[4]||(u[4]=f=>e("menuClickHandler",{key:"home"}))},{icon:g(()=>[p(m(Lo))]),_:1})):B("",!0),p(oh,{ref_key:"searchRef",ref:n,class:ae(["search",m(s).isMenuSpread&&"searchOnSpread"]),onKeydownEnter:u[5]||(u[5]=f=>e("searchBarEnterHandler",f))},null,8,["class"]),o.value.length?(_(),A(Yh,{key:1,id:"tips",class:"tips",recommend:o.value,onKeydownEnter:l},null,8,["recommend"])):B("",!0)],32),x("div",Zh,[x("div",{class:ae(["action-bar",m(rt)()&&"left-display"]),style:{"-webkit-app-region":"no-drag"},onDblclick:u[8]||(u[8]=Ie(()=>{},["stop"]))},[p(qh),p(Hh),p(lh),p(dh),p(d,{id:"setting-button",type:"text",onClick:u[7]||(u[7]=f=>e("openSettings"))},{icon:g(()=>[p(m(Pi))]),_:1}),p(Ih)],34),m(rt)()?(_(),L("div",Jh,[p(Lh)])):B("",!0)])],34)}}});const ep=oe(Qh,[["__scopeId","data-v-790fd10b"]]),tp={class:"right"},np=ee({__name:"index",setup(t){const e=E(!Boolean(localStorage.getItem("welcome")));function n(){e.value=!1,localStorage.setItem("welcome","true")}const o=On(),s=xt(),a=De(),i=E("HOME");E(null);const r=E(),l=E(),c=E();async function u(N,D){i.value="EXTENSION";const R=await gt(N);if(!R)throw new Error("Extension not found");D!=null&&D.related?h.value=[R.category[0]]:D!=null&&D.home&&(c.value=D.home),o.push(`/extension/${N}`)}pe(()=>{K.deepLinkOpenUrl((N,D)=>{let R=Fi(D);R.token&&(ne.success("\u767B\u5F55\u6210\u529F"),a.$patch({token:R.token}),K.setLoginToken(R.token).then(()=>{var $;d(),($=l.value)==null||$.switchAutoSync(!0)}))})});const d=async function(){try{const{id:N,nickname:D,email:R}=await bo.get(Ui);a.$patch({nickname:D,email:R})}catch{}};pe(async()=>{a.$state.token&&await d()}),pe(()=>{K.handleWindowActive((N,D)=>{try{isActive.value=D}catch{}}),Ze("command+,",function(N,D){N.preventDefault(),I()}),K.deepLinkOpenUrl((N,D)=>{let R=de.exports.last(D.split("/"));R&&gt(R).then($=>{$&&(Re.capture("OpenExtension",{extensionId:R,from:"deeplink"}),b($))})})}),pe(async()=>{if(s.path.includes("extension")){i.value="EXTENSION";let N=s.path.split("/")[2],D=await gt(N);D&&b(D)}});const h=E([Ss.HOME]),f=E(null);ce(h,([N])=>{N||(f.value=null),f.value=N},{immediate:!0}),ce(()=>s.path,async()=>{let N=s.path.split("/")[2],D=await gt(N);i.value==="EXTENSION"&&!["home","star","all"].includes(f.value||"")&&D&&!D.category.includes(f.value||"")&&(h.value=[D.category[0]])},{immediate:!0});const v=async N=>{switch(i.value==="EXTENSION"&&(i.value=null,C.value=null,h.value=[]),await Fe(),N.key){case"home":i.value="HOME";break;case"star":i.value="STAR";break;default:i.value="CATEGORY";break}h.value=[N.key],o.push("/")},y=E(!1),w=()=>{y.value=!y.value},C=E(null),b=async N=>{i.value=null,h.value=[],C.value=null,await Fe(),i.value="CATEGORY",h.value=[N.category[0]],C.value=N.id},I=N=>{o.push("/"),N?r.value=N:r.value=null,i.value="SETTINGS",h.value=[],C.value=null},F=E([]),H=async()=>{const{extensions:N}=await ko();F.value=N.filter(D=>D.matchBy==="id")};let V;return pe(()=>{V=setInterval(()=>{H()},1e3)}),Xt(()=>{V&&clearInterval(V)}),(N,D)=>(_(),L("div",{class:ae(["wrapper",m(rt)()&&"winWrapper"])},[e.value?(_(),A(Hu,{key:0,close:n})):B("",!0),x("div",{id:"left-menu-div",class:ae(["left",!m(a).isMenuSpread&&"hiddenMenu"])},[p(Qu,{"is-collapse":y.value,"selected-menus":h.value,onClick:v,onOpenSettings:I,onToggleCollapsed:w},null,8,["is-collapse","selected-menus"])],2),x("div",tp,[p(ep,{onOpenSettings:I,onSearchBarEnterHandler:b,onMenuClickHandler:v}),x("div",{id:"CONTENT",class:ae({content:!0,"header-no-margin":!m(a).isMenuSpread||m(rt)()})},[i.value==="EXTENSION"?(_(),A(Lc,{key:0,"current-category":f.value||void 0,"home-ext-type":c.value,onOpenExtension:u},null,8,["current-category","home-ext-type"])):B("",!0),i.value==="HOME"?(_(),A(ec,{key:1,onOpenExtension:u})):B("",!0),i.value==="STAR"?(_(),A(Ku,{key:2,onOpenExtension:u})):B("",!0),i.value==="CATEGORY"&&f.value!==null?(_(),A(Gr,{key:3,"current-category":f.value,"specific-active-extension-id":C.value,onOpenExtension:u},null,8,["current-category","specific-active-extension-id"])):B("",!0),i.value==="SETTINGS"?(_(),A(bu,{key:4,ref_key:"settingsRef",ref:l,"active-key":r.value},null,8,["active-key"])):B("",!0)],2)])],2))}});const rp=oe(np,[["__scopeId","data-v-2a713320"]]);export{rp as default};

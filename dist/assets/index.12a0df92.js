import{d as _,aa as S,H as T,M as d,bH as g,r as u,as as w,c as x,w as l,u as t,o as y,a as n,cQ as m,e3 as D,E as M,cR as U,dt as R,cv as A,cS as B,cU as N,cd as j}from"./index.fa3829f9.js";import{i as q}from"./regs.08fe82e6.js";import{u as E}from"./index.62b13fa1.js";const $=_({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(h,{emit:H}){const s=h,{t:P}=S();T(()=>{var e,a,o;(((e=s.clipboardValue)==null?void 0:e.isIPv4())||((a=s.clipboardValue)==null?void 0:a.isDomain())||((o=s.clipboardValue)==null?void 0:o.isUrl()))&&(r.value.userInput=f(s.clipboardValue.getOriginData()),H("acceptClipboardCb"))});function f(e){return e=e.trim(),d.isIP(e)==4||g(e)&&(e=E(e).hostname),e}const r=u({userInput:"",maxHop:15}),v=u({}),i=u(!1),C=function(){var e;(e=b.value)==null||e.validate().then(()=>{i.value=!0;const a={maxHops:r.value.maxHop},o=f(r.value.userInput);d.traceroute(o,a).then(p=>{v.value=p,I.value=p.hops}).catch(p=>{v.value=p}).finally(()=>{i.value=!1})}).catch(a=>{})},b=u(),k=[{title:"Hops",dataIndex:"hop",key:"hop"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"RTT",dataIndex:"rtt1",key:"rtt1"}],V={userInput:[{required:!0,validator:(e,a)=>a===""||d.isIP(a)!==4&&!g(a)&&!q(a)?Promise.reject():Promise.resolve(),whitespace:!0,message:P("traceroute.validInputError"),trigger:"blur"}]},I=u([]),c=w(()=>navigator.platform.toLowerCase().includes("linux"));return(e,a)=>(y(),x(t(j),null,{one:l(()=>[n(t(B),{ref_key:"formRef",ref:b,model:r.value,rules:V},{default:l(()=>[t(c)?(y(),x(t(m),{key:0},{default:l(()=>[n(t(D),{message:e.$t("traceroute.linuxWarningMessage"),type:"warning"},null,8,["message"])]),_:1})):M("",!0),n(t(m),{label:"Domain/IP",name:"userInput"},{default:l(()=>[n(t(U),{value:r.value.userInput,"onUpdate:value":a[0]||(a[0]=o=>r.value.userInput=o),loading:i.value,"enter-button":e.$t("common.query"),disabled:t(c),onSearch:C},null,8,["value","loading","enter-button","disabled"])]),_:1}),n(t(R),null,{default:l(()=>[n(t(m),{name:"maxHop",label:"Max Hop"},{default:l(()=>[n(t(A),{value:r.value.maxHop,"onUpdate:value":a[1]||(a[1]=o=>r.value.maxHop=o),min:1,precision:0,disabled:t(c)},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1},8,["model"]),n(t(N),{loading:i.value,columns:k,"data-source":I.value,pagination:!1},null,8,["loading","data-source"])]),_:1}))}});export{$ as default};

import{d as w,aa as C,v as g,r as V,y as k,H as $,o as n,b as i,a as p,au as D,O as N,j as d,w as _,t as b,c as v,E as y,u as S,cn as P,bq as M,M as x,an as F,h as m,p as q,k as K,_ as O,ai as z,F as E,e as L,cd as R}from"./index.fa3829f9.js";const j=s=>(q("data-v-a0604891"),s=s(),K(),s),A={class:"wrap"},H={class:"result"},U=j(()=>d("span",{class:"equal"},"=",-1)),G=w({__name:"Formula",props:{index:null,addFormula:null,clipboardData:null,switchToNext:null},setup(s){const o=s,{t:u}=C(),e=g({input:"",result:""}),r=()=>{e.input||(e.result="");let a=x.formulaParse(e.input);a&&a.toString().indexOf("Syntax error")===-1&&(e.result=a)},f=()=>{x.writeTextToClipboard(e.result.toString()),F.success(u("common.copySuccess"))},l=V(),t=()=>{l.value.focus()};return k(()=>e.input,(a,c)=>{r(),o.addFormula(o.index)}),$(()=>{o.clipboardData&&o.index===0&&(e.input=o.clipboardData)}),(a,c)=>{const h=m("a-textarea"),I=m("a-statistic"),T=m("a-popover");return n(),i("div",A,[p(h,{ref_key:"textareaRef",ref:l,value:e.input,"onUpdate:value":c[0]||(c[0]=B=>e.input=B),class:"formula-input",placeholder:a.$t("formulaParser.placeholder"),"auto-size":"",autofocus:"",onKeydown:D(N(s.switchToNext,["prevent"]),["enter"])},null,8,["value","placeholder","onKeydown"]),d("div",H,[d("div",{style:{width:"100%",height:"37.7px"},onClick:t}),U,p(T,null,{content:_(()=>[d("p",null,b(a.$t("formulaParser.copy")),1)]),default:_(()=>[e.result?(n(),v(I,{key:0,value:`${e.result}`,onClick:f},null,8,["value"])):y("",!0)]),_:1}),e.result?(n(),v(S(M),{key:0,size:"small",type:"text",title:" ","copy-content":e.result.toString()},{default:_(()=>[p(S(P))]),_:1},8,["copy-content"])):y("",!0)])])}}});const J=O(G,[["__scopeId","data-v-a0604891"]]),Q={class:"wrap"},W={class:"formula"},X={key:0,class:"equal"},Y=w({__name:"SearchFormula",props:{searchValue:null},setup(s){const o=s,{t:u}=C(),e=g({result:""}),r=()=>{o.searchValue||(e.result="");let l=x.formulaParse(o.searchValue);l&&l.toString().indexOf("Syntax error")===-1&&(e.result=l)},f=()=>{x.writeTextToClipboard(e.result.toString()),F.success(u("common.copySuccess"))};return $(()=>{r()}),k(()=>o.searchValue,(l,t)=>{r()}),(l,t)=>{const a=m("a-statistic"),c=m("a-popover");return n(),i("div",Q,[d("div",W,b(s.searchValue),1),e.result?(n(),i("div",X,"=")):y("",!0),p(c,null,{content:_(()=>[d("p",null,b(l.$t("formulaParser.copy")),1)]),default:_(()=>[e.result?(n(),v(a,{key:0,class:"result",value:`${e.result}`,onClick:f},null,8,["value"])):y("",!0)]),_:1})])}}});const Z=O(Y,[["__scopeId","data-v-67bff7a6"]]),ee={key:0},te={key:1,style:{height:"100%"}},se=w({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean},searchValue:null},emits:["acceptClipboardCb"],setup(s,{emit:o}){const u=s,e=V("");z(()=>{var t,a;(t=u.clipboardValue)!=null&&t.isFormula()&&(e.value=(a=u.clipboardValue)==null?void 0:a.getOriginData(),r.push(!0),!u.renderOnSearch&&o("acceptClipboardCb"))});const r=g([!0]),f=t=>{t+1===r.length&&r.push(!0)},l=t=>{var a,c;(a=t==null?void 0:t.path)!=null&&a[2].nextSibling.firstChild.firstChild&&((c=t==null?void 0:t.path)==null||c[2].nextSibling.firstChild.firstChild.focus())};return(t,a)=>(n(),v(S(R),{"max-width":800},{one:_(()=>[s.renderOnSearch?(n(),i("div",te,[p(Z,{"search-value":s.searchValue},null,8,["search-value"])])):(n(),i("div",ee,[(n(!0),i(E,null,L(r,(c,h)=>(n(),i("div",{key:h},[p(J,{style:{"margin-bottom":"10px"},index:h,"add-formula":f,"clipboard-data":e.value,"switch-to-next":l},null,8,["index","clipboard-data"])]))),128))]))]),_:1}))}});export{se as default};

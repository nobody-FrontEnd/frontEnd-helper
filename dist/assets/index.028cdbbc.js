import{d as E,aa as H,H as L,r as c,M as I,bH as P,as as U,c as u,w as l,u as t,o as d,j as B,a as r,cQ as w,e3 as j,E as m,cR as z,dt as F,cv as O,cS as q,cT as p,R as v,t as y,cU as C,cd as G,_ as Q}from"./index.fa3829f9.js";import{i as X}from"./regs.08fe82e6.js";import{u as J}from"./index.62b13fa1.js";const K={class:"ping-wrapper"},W=E({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(D,{emit:S}){const f=D,{t:T}=H();L(()=>{var n,s,a;(((n=f.clipboardValue)==null?void 0:n.isIPv4())||((s=f.clipboardValue)==null?void 0:s.isDomain())||((a=f.clipboardValue)==null?void 0:a.isUrl()))&&(o.value.address=x(f.clipboardValue.getOriginData()),S("acceptClipboardCb"))});const R=150,V=[{title:"Connected To",dataIndex:"numericHost",key:"numericHost"},{title:"Response Time",dataIndex:"time",key:"time"}],k=c([]),M=[{title:"Min",dataIndex:"min",key:"min"},{title:"Max",dataIndex:"max",key:"max"},{title:"Average",dataIndex:"average",key:"average"},{title:"Std Dev",dataIndex:"stdDev",key:"stdDev"},{title:"Loss",dataIndex:"loss",key:"loss"}],b=c([]);function x(n){return n=n.trim(),I.isIP(n)==4||P(n)&&(n=J(n).hostname),n}const h=c(),o=c({address:"",pingIPv6:!1,minReply:6}),A={address:[{required:!0,transform:x,validator:(n,s)=>s===""||I.isIP(s)!==4&&!P(s)&&!X(s)?Promise.reject():Promise.resolve(),message:T("ping.validAddressError"),trigger:"change"}]},g=c(!1),_=c(""),N=U(()=>_.value!=="");async function $(){var a;try{await((a=h.value)==null?void 0:a.validateFields())}catch{return}const n=x(o.value.address),s={numeric:!1,min_reply:o.value.minReply,v6:o.value.pingIPv6};g.value=!0,_.value="",k.value=[],b.value=[],I.domainPing(n,s).then(e=>{e.times&&e.times.forEach((i,Y)=>{k.value.push({numericHost:e.numeric_host,time:i})}),b.value=[{min:e.min==="unknown"?0:e.min,max:e.max=="unknown"?0:e.max,average:e.avg==="unknown"?0:e.avg,stdDev:e.stddev==="unknown"?0:e.stddev,loss:e.packetLoss==="unknown"?0:e.packetLoss}]}).catch(e=>{_.value=e.toString()}).finally(()=>{g.value=!1})}return(n,s)=>(d(),u(t(G),{"max-width":1280},{one:l(()=>[B("div",K,[r(t(q),{ref_key:"formRef",ref:h,rules:A,model:o.value},{default:l(()=>[t(N)?(d(),u(t(w),{key:0},{default:l(()=>[r(t(j),{message:_.value,type:"error",banner:""},null,8,["message"])]),_:1})):m("",!0),r(t(w),{name:"address"},{default:l(()=>[r(t(z),{value:o.value.address,"onUpdate:value":s[0]||(s[0]=a=>o.value.address=a),"enter-button":"Ping","allow-clear":"",autofocus:"",onSearch:$},null,8,["value"])]),_:1}),r(t(F),{size:"middle"},{default:l(()=>[r(t(w),{name:"minReply",label:"Min Reply"},{default:l(()=>[r(t(O),{value:o.value.minReply,"onUpdate:value":s[1]||(s[1]=a=>o.value.minReply=a),min:1,precision:0},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),r(t(C),{"data-source":b.value,columns:M,"table-layout":"auto",size:"middle",pagination:!1,loading:g.value},{bodyCell:l(({record:a,index:e,column:i})=>[i.key==="min"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.min} ms`),1)]),_:2},1024)):m("",!0),i.key==="max"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.max} ms`),1)]),_:2},1024)):m("",!0),i.key==="average"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.average} ms`),1)]),_:2},1024)):m("",!0),i.key==="stdDev"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.stdDev} ms`),1)]),_:2},1024)):m("",!0),i.key==="loss"?(d(),u(t(p),{key:e,type:a.loss>0?"warning":""},{default:l(()=>[v(y(`${a.loss} %`),1)]),_:2},1032,["type"])):m("",!0)]),_:1},8,["data-source","loading"]),r(t(C),{"data-source":k.value,columns:V,"table-layout":"auto",size:"middle",pagination:!1,loading:g.value,class:"ping-wrapper-body-table"},{bodyCell:l(({record:a,index:e,column:i})=>[i.key==="time"?(d(),u(t(p),{key:e,type:a.time>R?"warning":""},{default:l(()=>[v(y(`${a.time} ms`),1)]),_:2},1032,["type"])):m("",!0)]),_:1},8,["data-source","loading"])])]),_:1}))}});const te=Q(W,[["__scopeId","data-v-9e86f39d"]]);export{te as default};

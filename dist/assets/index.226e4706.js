import{d as $,aa as P,r as m,H as j,as as f,c as g,w as o,u as a,o as y,a as i,cQ as E,cT as v,R as A,t as F,cR as R,cS as W,E as h,dd as D,b as H,bq as M,F as N,cU as q,cd as L}from"./index.fa3829f9.js";import{A as c}from"./ipv4.7b623bf1.js";import{A as p}from"./ipv6.a83e9e03.js";const Z=$({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(w,{emit:S}){const I=w,{t:s}=P(),d=m({userInput:""}),B={userInput:[{required:!0,whitespace:!0,message:s("ipFormatter.inputErrorIpAddressMsg")}]};j(()=>{var e,r;(((e=I.clipboardValue)==null?void 0:e.isIPv4())||((r=I.clipboardValue)==null?void 0:r.isIPv6()))&&(d.value.userInput=I.clipboardValue.getOriginData(),S("acceptClipboardCb"),k())});const l=m(),x=m(""),T=m(),k=function(){var e;(e=T.value)==null||e.validate().then(()=>{V(d.value.userInput).then(r=>{l.value=r.address,x.value=r.fromType}).catch(r=>{l.value=void 0,x.value=""})}).catch(()=>{})},_=[{title:"Label",dataIndex:"label",key:"label",width:"30%"},{title:"Value",dataIndex:"value",key:"value",width:"55%",ellipsis:!0},{title:"Action",key:"action",width:"15%"}],C=m([{label:s("ipFormatter.standerIpAddress"),value:f(()=>{var e;return(e=l.value)==null?void 0:e.address})},{label:s("ipFormatter.decimalFormat"),value:f(()=>{var e;return(e=l.value)==null?void 0:e.bigInteger().toString()})},{label:s("ipFormatter.binaryFormat"),value:f(()=>{const e=l.value;return e?`0b${e.binaryZeroPad()}`:""})},{label:s("ipFormatter.hexadecimalFormat"),value:f(()=>{const e=l.value;return e instanceof c?`0x${e.toHex()}`:e instanceof p?`0x${e.parsedAddress.map(r=>parseInt(r,16).toString(16).padStart(4,"0")).join(":")}`:""})},{label:s("ipFormatter.octalFormat"),value:f(()=>{const e=l.value;return e instanceof c?"0o"+e.toArray().map(r=>r.toString(8)).join(":"):e instanceof p?"0o"+e.parsedAddress.map(r=>parseInt(r,16).toString(8).padStart(6,"0")).join(":"):""})}]),V=function(e){return new Promise((r,u)=>{try{const t=new c(e);return r({fromType:"ipv4",address:t})}catch{}try{const t=new p(e);return r({fromType:"ipv6",address:t})}catch{}try{const t=BigInt(e);if(t>=BigInt(0)&&t<=BigInt(4294967295)){const n=c.fromBigInteger(t);return r({fromType:"Decimal",address:n})}}catch{}try{if(e.startsWith("0x")){const t=e.replaceAll("0x","");if(t.split(":").length===4){const n=c.fromHex(t);return r({fromType:"hex",address:n})}}}catch{}try{if(e.startsWith("0o")&&e.split(":").length===4){const t=e.split(":").map(b=>parseInt(b.replaceAll("o",""),8)).join("."),n=new c(t);return r({fromType:"octal",address:n})}}catch{}try{const t=BigInt(e);if(t>=BigInt(0)&&t<=BigInt("340282366920938463463374607431768211455")){const n=p.fromBigInteger(t);return r({fromType:"BigInteger",address:n})}}catch{}try{if(e.startsWith("0x")&&e.split(":").length===8){const t=new p(e.replace("0x",""));return r({fromType:"hex",address:t})}}catch{}try{if(e.startsWith("0o")&&e.split(":").length===8){const t=e.split(":").map(b=>parseInt(b.replaceAll("o",""),8).toString(16)).join(":"),n=new p(t);return r({fromType:"octal",address:n})}}catch{}u(new Error("Invalid IP Address"))})};return(e,r)=>(y(),g(a(L),null,{one:o(()=>[i(a(W),{ref_key:"formRef",ref:T,model:d.value,rules:B},{default:o(()=>[i(a(E),{name:"userInput"},{extra:o(()=>[i(a(v),{type:"secondary"},{default:o(()=>[A(F(`${a(s)("ipFormatter.example")}: 192.168.1.1 or 167772161`),1)]),_:1})]),default:o(()=>[i(a(R),{value:d.value.userInput,"onUpdate:value":r[0]||(r[0]=u=>d.value.userInput=u),"enter-button":e.$t("common.format"),onSearch:k},null,8,["value","enter-button"])]),_:1})]),_:1},8,["model"]),i(a(q),{columns:_,"data-source":C.value,"show-header":!1,pagination:!1},{bodyCell:o(({column:u,record:t})=>[u.key==="label"?(y(),g(a(v),{key:0,strong:""},{default:o(()=>[A(F(`${t.label}:`),1)]),_:2},1024)):h("",!0),u.key==="value"?(y(),g(a(D),{key:1,title:t.value},{default:o(()=>[i(a(v),{content:t.value},null,8,["content"])]),_:2},1032,["title"])):h("",!0),u.key==="action"?(y(),H(N,{key:2},[t.value?(y(),g(a(M),{key:0,type:"link","copy-content":t.value},null,8,["copy-content"])):h("",!0)],64)):h("",!0)]),_:1},8,["data-source"])]),_:1}))}});export{Z as default};

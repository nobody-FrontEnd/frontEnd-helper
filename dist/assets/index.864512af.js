import{d as I,aa as x,H as E,bH as S,r as s,c as B,w as c,u,aO as O,o as h,j as y,a as d,cQ as U,cR as $,cS as M,b as V,e as P,t as Y,F as A,E as H,cU as L,cd as T,M as q}from"./index.fa3829f9.js";import{u as W}from"./index.62b13fa1.js";import{i as z}from"./regs.08fe82e6.js";const Q={class:"whois-wrapper"},G=["href"],J=y("br",null,null,-1),ee=I({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(_,{emit:F}){const f=_,{t:o}=x();E(()=>{var e,a;(((e=f.clipboardValue)==null?void 0:e.isDomain())||((a=f.clipboardValue)==null?void 0:a.isUrl()))&&(r.value.domain=k(f.clipboardValue.getOriginData()),F("acceptClipboardCb"))});function k(e){return e=e.trim(),S(e)&&(e=W(e).hostname.split(".").slice(-2).join(".")),e}const v=function(e,a){return e?(a||(a="YYYY-MM-DD"),O(e).format(a)):""},p=s(!1),g=s(),r=s({domain:""}),C={domain:[{required:!0,validator:(e,a)=>a===""||!S(a)&&!z(a)?Promise.reject():Promise.resolve(),whitespace:!0,message:o("whois.validDomainError"),trigger:"change"}]},w=s({}),N=s([{title:"Name",dataIndex:"name",key:"name",align:"right",width:200},{title:"Value",dataIndex:"value",key:"value"}]),b=[{name:o("whois.domainName"),key:"Domain Name",value:""},{name:o("whois.register"),key:"Registrar",value:""},{name:o("whois.registrantName"),key:"Registrant Name",value:""},{name:o("whois.contactEmail"),key:"Registrar Abuse Contact Email",value:""},{name:o("whois.createdDate"),key:"Created Date",value:"",formatValueFunc:v},{name:o("whois.updatedDate"),key:"Updated Date",value:"",formatValueFunc:v},{name:o("whois.expiryDate"),key:"Expiry Date",value:"",formatValueFunc:v},{name:o("whois.registrarServer"),key:"Registrar WHOIS Server",value:""},{name:"DNS",key:"Name Server",value:"",formatValueFunc:e=>e.join(", ")},{name:o("whois.domainStatus"),key:"Domain Status",value:""}],m=s(b.map(e=>({...e})));function R(e){const a=m.value,t=[];for(const n of a)for(const i in e)if(n.key===i){let l=e[i];if(!l)continue;const D=n.formatValueFunc;D&&(l=D(l)),n.value=l,t.push(n)}m.value=t}const j=async()=>{var e;(e=g.value)==null||e.validateFields().then(a=>{r.value.domain=k(r.value.domain),m.value=b.map(t=>({...t})),p.value=!0,q.whoiser(r.value.domain).then(t=>{if(!t)return;const n=Object.keys(t);n.length!==0&&(w.value=t[n[0]],R(w.value))}).finally(()=>{p.value=!1})}).catch(a=>{})};return(e,a)=>(h(),B(u(T),{"max-width":1280},{one:c(()=>[y("div",Q,[d(u(M),{ref_key:"formRef",ref:g,rules:C,model:r.value},{default:c(()=>[d(u(U),{name:"domain"},{default:c(()=>[d(u($),{value:r.value.domain,"onUpdate:value":a[0]||(a[0]=t=>r.value.domain=t),"enter-button":e.$t("common.query"),"allow-clear":"",autofocus:"",onSearch:j},null,8,["value","enter-button"])]),_:1})]),_:1},8,["model"]),d(u(L),{title:()=>e.$t("whois.domainInfo"),"data-source":m.value,columns:N.value,"table-layout":"auto",size:"middle","show-header":!1,pagination:!1,loading:p.value,bordered:""},{bodyCell:c(({column:t,record:n})=>[t.key==="value"&&n.key==="Domain Status"?(h(!0),V(A,{key:0},P(n.value,(i,l)=>(h(),V("div",{key:l},[y("a",{href:i.split(" ")[1],target:"_blank"},Y(e.$t(`whois.${i.split(" ")[0]}`)+`(${i.split(" ")[0]})`),9,G),J]))),128)):H("",!0)]),_:1},8,["title","data-source","columns","loading"])])]),_:1}))}});export{ee as default};

import{d as G,q as J,r as h,n as Q,y as ee,c as I,w as c,u as o,an as M,o as x,j as R,a as u,ce as te,R as b,t as _,cf as ae,fw as oe,b as H,F as C,ct as le,E as ne,e as re,b8 as se,M as ue,h as v,p as ie,k as ce,_ as de}from"./index.fa3829f9.js";import{L as pe}from"./layout4.50af5d66.js";import{M as Z}from"./MultiLineResult.eeac4e9b.js";var y=(t=>(t.WEB="web",t.TEXT="text",t.FILE="file",t))(y||{}),g=(t=>(t.SPACE="space",t.NUMBER="number",t.LETTER="letter",t.LINE_BREAK="line_break",t.CHINESE_CHARACTERS="chinese_characters",t.SYMBOL="symbol",t.OTHER="other",t))(g||{});const me=`[~!@#$^&*()=|{}':;'%,"\\[\\].<>\u300A\u300B/?~\uFF01@#\uFFE5\u2026\u2026&*\uFF08\uFF09_\u2014\u2014|{}\u3010\u3011\xB7\u2018\uFF1B\uFF1A\u201D\u201C'\u3002\uFF0C\u3001\uFF1F+-/]|[\\\\/]`,ve=t=>t===" "||t==="	"?"space":t.match(/[0-9]/)?"number":t.match(/[A-Za-z]/)?"letter":t.match(/\n/)?"line_break":t.match(/[\u4e00-\u9fa5]/)||t.match(/[\u9FA6-\u9fcb]/)?"chinese_characters":t.match(/[^\x00-\xff]/)||new RegExp(me).test(t)||t==="`"||t==="\\"?"symbol":"other",_e=(t,a,z)=>{if(a.length>1){const m=t.get(a);m?t.set(a,m+1):t.set(a,1),z()}},q=(t,a,z)=>({key:t[0],wordName:t[0],wordTotal:t[1],proportion:(t[1]/z*100).toFixed(2)+"%",type:a}),fe="Sit exercitation qui aliqua labore. Exercitation dolore ullamco dolore. Nulla deserunt officia aliqua ea. Dolore voluptate consectetur exercitation cupidatat cupidatat qui quis dolor est. Officia esse magna commodo reprehenderit proident laboris non veniam velit quis in et exercitation mollit. Magna velit ex ad veniam sunt veniam fugiat aute mollit ullamco pariatur magna exercitation incididunt sit.",Te=t=>(ie("data-v-0e14186b"),t=t(),ce(),t),we={class:"ant-radio-group-warpper"},he=Te(()=>R("div",{class:"invisible-box",style:{position:"absolute",width:"0px",height:"0px",overflow:"hidden",opacity:"0"}},null,-1)),xe=["innerHTML"],be={class:"text-output word-tips-dom"},ye={class:"text-output"},ge=G({__name:"index",setup(t){const{t:a}=J(),z=[{title:a("textAnalyzer.tableHeader.wordName"),dataIndex:"wordName"},{title:a("textAnalyzer.tableHeader.wordTotal"),dataIndex:"wordTotal",sorter:(n,e)=>n.wordTotal-e.wordTotal,defaultSortOrder:"descend"},{title:a("textAnalyzer.tableHeader.proportion"),dataIndex:"proportion"}],m=h(fe),F=h(""),T=h({total:0,wordTotal:{total:0,iTotal:0,eTotal:0,wordsTotal:0,orderTotal:0},numTotal:0,symbolTotal:0,spaceTotal:0,lineTotal:0}),L=h(!1),A=h(!1),B=h(!1),w=h(y.TEXT),N=h([]),$=()=>{const n=m.value;if(m.value.length<=0){M.warning(a("textAnalyzer.message.inputWarn")),A.value=!1;return}const e={total:n.length,symbolTotal:0,wordTotal:{total:0,iTotal:0,eTotal:0,wordsTotal:0,orderTotal:0},numTotal:0,spaceTotal:0,lineTotal:1},l=[];for(let s=0;s<n.length;s++){let p=n.charAt(s);switch(ve(p)){case g.SPACE:e.spaceTotal++;break;case g.NUMBER:e.numTotal++;break;case g.LINE_BREAK:e.lineTotal++;break;case g.SYMBOL:e.symbolTotal++;break;case g.OTHER:e.wordTotal.orderTotal++;break;case g.CHINESE_CHARACTERS:e.wordTotal.iTotal++;break;case g.LETTER:const f=l==null?void 0:l.at(-1);f&&f.key===s-1?(f.key++,f.value+=p):l.push({key:s,value:p}),e.wordTotal.eTotal++;break}}const r=new Map,i=new Map;let d=0;l.map(s=>{_e(r,s.value,()=>{d++})}),N.value=[...Array.from(r).map(s=>q(s,"en",d)),...Array.from(i).map(s=>q(s,"zh",d))],e.wordTotal.total=e.wordTotal.iTotal+e.wordTotal.eTotal+e.wordTotal.orderTotal+e.numTotal,e.wordTotal.wordsTotal=d,e.total=e.total-e.lineTotal+1,T.value={...e},A.value&&(A.value=!1)},W=()=>{let n="";const e=T.value.wordTotal,l=["iTotal","eTotal","numTotal","orderTotal"];for(const r of l){const i=e[r];n+=i?a(`textAnalyzer.wordTips.${r}`)+i+"<br/>":""}return T.value.numTotal&&(n+=a("textAnalyzer.wordTips.numTotal")+T.value.numTotal+"<br/>"),n},U=n=>{F.value=n,L.value=!0;const e=document.querySelector(".invisible-box");F.value.match("(https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9]+.[^s]{2,}|www.[a-zA-Z0-9]+.[^s]{2,})")?fetch(F.value).then(l=>l.text()).then(l=>{if(e){const r=document.createElement("div");r.innerHTML=l,V(r,["script","meta","link","img","style","iframe","video"]),e.innerHTML=r.innerHTML||"",e.innerText!==""?(m.value=e.innerText,e.innerHTML=""):M.error(a("textAnalyzer.message.analyzeError")),L.value=!1}}).catch(()=>{M.error(a("textAnalyzer.message.fetchError")),L.value=!1}):(M.warning(a("textAnalyzer.message.searchWarn")),L.value=!1)},V=(n,e)=>{var r;const l=n.querySelectorAll("[onerror]");if(l){const i=l.length;for(let d=i-1;d>=0;d--)l[d].onerror=null}for(let i=0;i<e.length;i++){const d=n.getElementsByTagName(e[i]),s=d.length;for(let p=s-1;p>=0;p--)d[p]!=null&&((r=d[p].parentNode)==null||r.removeChild(d[p]))}},S=()=>{A.value||(A.value=!0),D()},D=Q.exports.debounce(()=>{$()},200,{leading:!0}),P=async n=>{let e=n.type.split("/")[0];if(e==="image"||e==="video"||e==="audio"){M.warn(a("multilineInput.chooseTextFile"));return}B.value=!0;const l=se()?n.path:`file://${n.path}`;let r;try{r=(await ue.getEncoding(l)).encoding}catch{B.value=!1}return new Promise((i,d)=>{let s=new FileReader;s.readAsText(n,r),s.onload=function(p){var f;i(r),B.value=!1,m.value=(f=p.target)==null?void 0:f.result}})};return ee(m,()=>{S()}),setTimeout(()=>{S()}),(n,e)=>{const l=v("a-radio-button"),r=v("a-radio-group"),i=v("a-textarea"),d=v("a-button"),s=v("a-upload"),p=v("a-input-search"),f=v("a-tooltip"),O=v("a-form-item"),X=v("a-table"),j=v("a-form"),K=v("a-spin");return x(),I(o(pe),{"right-width":450,class:"text-analyze"},{one:c(()=>[R("div",we,[u(r,{value:w.value,"onUpdate:value":e[0]||(e[0]=E=>w.value=E)},{default:c(()=>[u(l,{value:o(y).TEXT},{default:c(()=>[u(o(te)),b(" "+_(o(a)("textAnalyzer.inputType.text")),1)]),_:1},8,["value"]),u(l,{value:o(y).FILE},{default:c(()=>[u(o(ae)),b(" "+_(o(a)("textAnalyzer.inputType.file")),1)]),_:1},8,["value"]),u(l,{value:o(y).WEB},{default:c(()=>[u(o(oe)),b(" "+_(o(a)("textAnalyzer.inputType.web")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),w.value===o(y).TEXT?(x(),H(C,{key:0},[b(_(o(a)(`textAnalyzer.title.${w.value}`))+" ",1),u(i,{value:m.value,"onUpdate:value":e[1]||(e[1]=E=>m.value=E),autofocus:!0},null,8,["value"])],64)):w.value===o(y).FILE?(x(),H(C,{key:1},[b(_(o(a)(`textAnalyzer.title.${w.value}`))+" ",1),u(s,{class:"file-button","before-upload":P,"max-count":1},{itemRender:c(({})=>[]),default:c(()=>[u(d,{type:"primary",size:"small",loading:B.value},{icon:c(()=>[u(o(le))]),default:c(()=>[b(" "+_(o(a)("multilineInput.read_file")),1)]),_:1},8,["loading"])]),_:1}),u(o(Z),{result:m.value,"result-desc":o(a)("textAnalyzer.preview"),height:"calc(100vh - 310px)"},null,8,["result","result-desc"])],64)):w.value===o(y).WEB?(x(),H(C,{key:2},[b(_(o(a)(`textAnalyzer.title.${w.value}`))+" ",1),u(p,{modelValue:F.value,"onUpdate:modelValue":e[2]||(e[2]=E=>F.value=E),placeholder:o(a)("textAnalyzer.search.placeholder"),"enter-button":o(a)("textAnalyzer.search.enter"),loading:L.value,autofocus:!0,onSearch:U},null,8,["modelValue","placeholder","enter-button","loading"]),u(o(Z),{result:m.value,"result-desc":o(a)("textAnalyzer.preview"),height:"calc(100vh - 345px)"},null,8,["result","result-desc"])],64)):ne("",!0),he]),two:c(()=>[u(K,{spinning:A.value},{default:c(()=>[u(j,{"label-col":{span:8},"wrapper-col":{span:6},style:{"max-width":"450px"}},{default:c(()=>[(x(!0),H(C,null,re(T.value,(E,k,Y)=>(x(),H("div",{key:Y},[k==="wordTotal"?(x(),I(O,{key:0,label:o(a)(`textAnalyzer.label.${k}`)},{default:c(()=>[u(f,{placement:"right",overlayStyle:{maxWidth:"200px"}},{title:c(()=>[R("span",{innerHTML:W()},null,8,xe)]),default:c(()=>[R("div",be,_(T.value[k].total),1)]),_:2},1024)]),_:2},1032,["label"])):(x(),I(O,{key:1,label:o(a)(`textAnalyzer.label.${k}`)},{default:c(()=>[R("div",ye,_(T.value[k]),1)]),_:2},1032,["label"]))]))),128)),u(X,{size:"small",columns:z,"data-source":N.value,scroll:{y:"calc(100vh - 570px)"},pagination:{size:"small",showSizeChanger:!0},bordered:""},{title:c(()=>[b(_(`${o(a)("textAnalyzer.tableHeader.titlePre")+T.value.wordTotal.wordsTotal+o(a)("textAnalyzer.tableHeader.titleEnd")}`),1)]),_:1},8,["data-source","scroll"])]),_:1})]),_:1},8,["spinning"])]),_:1})}}});const Fe=de(ge,[["__scopeId","data-v-0e14186b"]]);export{Fe as default};

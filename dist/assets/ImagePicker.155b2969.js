import{d as E,r as n,H as I,a8 as P,y as B,X as S,o as l,b as d,c as V,w as k,j as p,t as m,u as v,de as $,E as L,Z as y,a as _,bu as N,R as x,cA as F,an as M,h as w,_ as T}from"./index.fa3829f9.js";import{g as b}from"./getBase64.b1142636.js";const U={class:"upload-area"},z={key:0},A={key:1,class:"preview-image"},D=["src"],j=E({__name:"ImagePicker",props:{width:{default:"100%"},height:{default:"100%"},imageHeight:{default:"78vh"},pickHook:null,onLoadHook:{type:Function,default:()=>{}},resetHook:{type:Function,default:()=>{}}},setup(o){const c=o;F(e=>({"78ac6281":e.$props.imageHeight}));const a=n(""),g=n(null),r=n(!1),f=()=>{navigator.clipboard.read().then(e=>{e[0].types[0].includes("image")?r.value=!0:r.value=!1}).catch(e=>{M.warn(e.toString())})},h=async e=>{var i;let t=(i=e.clipboardData)==null?void 0:i.items[0];if((t==null?void 0:t.kind)=="file"){let s=t.getAsFile();s&&s.size!==0&&(a.value=await b(s))}};I(()=>{f(),document.addEventListener("paste",h,!1)}),P(()=>{document.removeEventListener("paste",h)});const u=n(!1),H=()=>{f(),u.value=!0,setTimeout(()=>{u.value=!1,a.value="",c.resetHook()},500)},C=async e=>(c.pickHook(e),a.value=await b(e),!1);return B(a,async e=>{!e||(await S(),c.onLoadHook(g.value))}),(e,t)=>{const i=w("a-upload-dragger"),s=w("a-button");return l(),d("div",{style:y({width:o.width,height:o.height})},[a.value?(l(),d("div",A,[p("img",{ref_key:"imgEle",ref:g,class:"image",alt:"He3",src:a.value},null,8,D),_(s,{type:"primary",shape:"round",onClick:H},{default:k(()=>[_(v(N),{spin:u.value},null,8,["spin"]),x(m(e.$t("imagePicker.reselect")),1)]),_:1})])):(l(),V(i,{key:0,accept:"image/*","max-count":1,"before-upload":C,"show-upload-list":!1,"list-type":"picture",style:y({width:o.width})},{default:k(()=>[p("div",U,[p("p",null,m(e.$t("imagePicker.upload")),1),r.value?(l(),d("p",z," ("+m(v($)()?e.$t("imagePicker.clipboardMac"):e.$t("imagePicker.clipboardWin"))+") ",1)):L("",!0)])]),_:1},8,["style"]))],4)}}}),W=T(j,[["__scopeId","data-v-f39345cf"]]);export{W as I};

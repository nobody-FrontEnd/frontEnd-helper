import{d as z,aa as L,r as y,as as C,v as R,c as U,w as t,u as g,o as k,g as F,a,R as r,t as d,co as D,an as N,M as h,h as s}from"./index.fa3829f9.js";import{L as O}from"./layout6.1a679aa9.js";import{_ as S}from"./multiImagePicker.vue_vue_type_script_setup_true_lang.df756f7c.js";import{J as q}from"./jszip.min.b7d97c15.js";import{i as B}from"./imageToIcon.67342468.js";import"./_commonjs-dynamic-modules.30ae7933.js";const I=r("ico"),j=r("icns"),G=z({__name:"index",setup(A){const{t:T}=L(),b=y(),v=C(()=>{var e;return(e=b.value)==null?void 0:e.fileList}),f=y(!1),x=[{label:"16x16",value:16},{label:"32x32",value:32},{label:"48x48",value:48},{label:"64x64",value:64},{label:"96x96",value:96},{label:"128x128",value:128},{label:"256x256",value:256},{label:"512x512",value:512},{label:"1024x1024",value:1024}],o=R({size:[16],shape:"square",bleed:!1,iconType:"ico"}),$=async()=>{var n;if(!v.value.length){N.warn(T("image.imageChoose"));return}f.value=!0;const e=new q;for(const i of v.value){const l=i.name.split(".")[0];e.folder(l);for(const u of o.size){const c={source:i,size:u,shape:o.shape,bleed:!1,iconType:o.iconType},m=await B.convert(c);if(v.value.length===1&&o.size.length===1&&c.iconType!=="icns"){const _=URL.createObjectURL(m);h.handleDownload(_),f.value=!1;return}(n=e.folder(l))==null||n.file(`${l}--${u}x${u}.${c.iconType}`,m)}}e.generateAsync({type:"blob"}).then(i=>{const l=URL.createObjectURL(i);h.handleDownload(l)}),f.value=!1};return(e,n)=>{const i=s("a-checkbox-group"),l=s("a-radio-button"),u=s("a-radio-group"),c=s("a-select-option"),m=s("a-select"),_=s("a-space"),w=s("a-spin");return k(),U(g(O),{"max-width":1e3},{one:t(()=>[F(e.$slots,"default",{},()=>[a(w,{spinning:f.value},{default:t(()=>[a(_,{direction:"vertical",size:20},{default:t(()=>[a(g(S),{ref_key:"imageRef",ref:b},null,512),a(i,{value:o.size,"onUpdate:value":n[0]||(n[0]=p=>o.size=p),options:x},null,8,["value"]),a(u,{value:o.shape,"onUpdate:value":n[1]||(n[1]=p=>o.shape=p)},{default:t(()=>[a(l,{value:"square"},{default:t(()=>[r(d(e.$t("imageToFavicon.square")),1)]),_:1}),a(l,{value:"circle"},{default:t(()=>[r(d(e.$t("imageToFavicon.circle")),1)]),_:1}),a(l,{value:"fillet"},{default:t(()=>[r(d(e.$t("imageToFavicon.fillet")),1)]),_:1})]),_:1},8,["value"]),a(m,{value:o.iconType,"onUpdate:value":n[2]||(n[2]=p=>o.iconType=p),style:{width:"80px"}},{default:t(()=>[a(c,{value:"ico"},{default:t(()=>[I]),_:1}),a(c,{value:"icns"},{default:t(()=>[j]),_:1})]),_:1},8,["value"]),a(g(D),{type:"primary",onClick:$},{default:t(()=>[r(d(o.iconType==="ico"?e.$t("imageToFavicon.transformICO"):e.$t("imageToFavicon.transformICNS")),1)]),_:1})]),_:1})]),_:1},8,["spinning"])])]),_:3})}}});export{G as default};

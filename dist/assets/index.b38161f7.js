import{d as H,aa as M,r as i,n as $,H as z,o as _,b as I,j as c,a as l,w as f,u as t,ce as P,R as W,t as g,cf as q,c as B,cg as G,ch as J,E as L,g as K,ci as Q,an as Y,h as m,_ as Z}from"./index.fa3829f9.js";import{M as ee}from"./MultiLineResult.eeac4e9b.js";import{b as te}from"./base64.25d9ff21.js";var o=(a=>(a.TEXT="text",a.FILE="file",a))(o||{}),O=(a=>(a.ENC="enc",a.DEC="dec",a))(O||{}),ae=(a=>(a.C1C2C3="C1C2C3",a.C1C3C2="C1C3C2",a))(ae||{}),ne=(a=>(a.ECB="ECB",a.CBC="CBC",a))(ne||{});const le={class:"cryptography"},oe={class:"ant-radio-group-warpper"},se={class:"input"},ue={key:1,class:"file-input"},re={class:"ant-upload-drag-icon"},pe={class:"ant-upload-text"},ie={class:"ant-upload-hint"},ce={class:"option"},de={class:"output"},ve={key:0,class:"output-file-wrapper"},_e=H({__name:"index",props:{encrypt:null,sample:null,type:null,autoFillInput:null},setup(a,{expose:X}){const u=a,{t:s}=M(),r=i(o.TEXT),d=i(null),y=i(u.sample),v=i(""),x=i(""),p=i(!1),F=i([]),j=async n=>(F.value=[{uid:n.uid,name:n.name,status:"done"}],new Promise((e,T)=>{let h=new FileReader;h.readAsBinaryString(n),h.onload=E=>{if(E.target){let k=E.target.result;if(typeof k=="string"){let w=te.encode(k);d.value={binary:w,name:n.name},b(),e(!1)}}}})),R=()=>{v.value="",d.value=null,F.value=[],p.value=!1},S=()=>{var n;switch(r.value){case o.FILE:(n=d.value)!=null&&n.binary?v.value=u.encrypt(d.value.binary):Y.warn({key:"crypt-wrapper-file",content:s("cryptWrapper.fileWarn")});break;case o.TEXT:x.value=u.encrypt(y.value);break}p.value=!1},V=n=>{const e=n.split(".");return u.type===O.ENC?n+".enc":(e.at(-1)==="enc"&&e.pop(),e.splice(e.length-1,0,"dec"),e.join("."))},A=()=>{var n;if(v.value){const e=document.createElement("a");e.href="data:application/octet-stream;base64,"+v.value,e.setAttribute("download",V((n=d.value)==null?void 0:n.name)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},b=()=>{p.value||(p.value=!0),D()},D=$.exports.debounce(()=>{S()},200,{leading:!0});return z(()=>{u.autoFillInput&&(y.value=u.autoFillInput),b()}),X({handleEncrypt:b,raw:y}),(n,e)=>{var N;const T=m("a-radio-button"),h=m("a-radio-group"),E=m("a-upload-dragger"),k=m("a-button"),w=m("a-alert"),U=m("a-spin");return _(),I("div",le,[c("div",oe,[l(h,{value:r.value,"onUpdate:value":e[0]||(e[0]=C=>r.value=C)},{default:f(()=>[l(T,{value:t(o).TEXT},{default:f(()=>[l(t(P)),W(" "+g(t(s)("cryptWrapper.inputType.text")),1)]),_:1},8,["value"]),l(T,{value:t(o).FILE},{default:f(()=>[l(t(q)),W(" "+g(t(s)("cryptWrapper.inputType.file")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),c("div",se,[r.value===t(o).TEXT?(_(),B(t(G),{key:0,"select-all-on-mount":"",modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=C=>y.value=C),autofocus:"",class:"input",title:t(s)("cryptWrapper.input"),onChange:b},null,8,["modelValue","title"])):r.value===t(o).FILE?(_(),I("div",ue,[l(E,{name:"file","max-count":1,"before-upload":j,remove:R,"file-list":F.value},{default:f(()=>[c("p",re,[l(t(J))]),c("p",pe,g(t(s)("cryptWrapper.uploadText")),1),c("p",ie,g(t(s)("cryptWrapper.uploadHint")),1)]),_:1},8,["file-list"])])):L("",!0),c("div",ce,[K(n.$slots,"option",{},void 0,!0)])]),c("div",de,[r.value===t(o).FILE?(_(),I("div",ve,[l(k,{type:"primary",disabled:!v.value.length,loading:p.value,onClick:A},{default:f(()=>[l(t(Q)),W(" "+g(t(s)("cryptWrapper.outputFile")),1)]),_:1},8,["disabled","loading"]),v.value.length&&!p.value?(_(),B(w,{key:0,message:t(s)(`cryptWrapper.outputTips.${u.type}`)+V((N=d.value)==null?void 0:N.name),type:"success","show-icon":""},null,8,["message"])):L("",!0)])):r.value===t(o).TEXT?(_(),B(U,{key:1,spinning:p.value},{default:f(()=>[l(t(ee),{result:x.value,"onUpdate:result":e[2]||(e[2]=C=>x.value=C),"result-desc":t(s)("cryptWrapper.output")},null,8,["result","result-desc"])]),_:1},8,["spinning"])):L("",!0)])])}}});const Ce=Z(_e,[["__scopeId","data-v-1fc77f1f"]]);export{O as C,ae as S,Ce as a,ne as b};
